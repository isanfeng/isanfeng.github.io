<!DOCTYPE html>
<html lang="en">
<!--统计信息-->

<head>
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<!--	<meta charset="utf-8">-->
	<title>Python Cheatsheet - 流浪⬝𝓲三丰⬝异想世界</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#311e3e">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#311e3e">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#311e3e">

	<!--baidu part start-->
	<!--baidu site management: https://ziyuan.baidu.com/site/index#/-->
	<!--github-->
<!--	<meta name="baidu-site-verification" content="code-sh9EoLnxS0" />-->
	<!--gitee-->
	<meta name="baidu-site-verification" content="code-1kzAZ69Njq" />

	<!--baidu site page auto push-->
	<script>
	(function(){
		var bp = document.createElement('script');
		var curProtocol = window.location.protocol.split(':')[0];
		if (curProtocol === 'https') {
			bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
		}
		else {
			bp.src = 'http://push.zhanzhang.baidu.com/push.js';
		}
		var s = document.getElementsByTagName("script")[0];
		s.parentNode.insertBefore(bp, s);
	})();
	</script>

	<!--百度统计-->
	<script>
		var _hmt = _hmt || [];
		(function() {
		  var hm = document.createElement("script");
		  hm.src = "https://hm.baidu.com/hm.js?42bccbe026e11e0ec8bcd67d40d41529";
		  var s = document.getElementsByTagName("script")[0];
		  s.parentNode.insertBefore(hm, s);
		})();
	</script>

    <script>
        var _hmt = _hmt || [];
        (function() {
          var hm = document.createElement("script");
          hm.src = "https://hm.baidu.com/hm.js?c1cc63cef10ce15edf05b9fcab36e06b";
          var s = document.getElementsByTagName("script")[0];
          s.parentNode.insertBefore(hm, s);
        })();
    </script>
	<!--baidu part end-->

	<!-- icons part 1: Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
<!--	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">-->
    <!-- icons part 2: Font mdx -->
    <link rel="stylesheet" href="/assets/css/mdx-icons.css" />

	<!--在线引用google字体-->
	<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Orbitron|Texturina|Teko|Play">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">

	<!--网站计数系统-->
<!--  	<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>-->
	<script async src="/assets/js/busuanzi/busuanzi.pure.mini.js"></script>

	<!--评论系统型号1-->
<!--    <script src="//unpkg.com/valine@latest/dist/Valine.min.js"></script>-->
	<script src="/assets/js/valine/Valine.min.js"></script>

	<!--禁止查看网页源码-->
	<script type="text/javascript">
        window.onload = function(){
            //屏蔽键盘事件
            document.onkeydown = function (){
                var e = window.event || arguments[0];
                //F12
                if(e.keyCode == 123){
                    return false;
                //Ctrl+Shift+I
                }else if((e.ctrlKey) && (e.shiftKey) && (e.keyCode == 73)){
                    return false;
                //Shift+F10
                }else if((e.shiftKey) && (e.keyCode == 121)){
                    return false;
                //Ctrl+U
                }else if((e.ctrlKey) && (e.keyCode == 85)){
                    return false;
                }
            };
            //屏蔽鼠标右键
            document.oncontextmenu = function (){
                return false;
            }
        }
	</script>

</head>

<body>
  <div class="flex-container">
  
<!--左侧文档分类 和 页面导航-->
<header class="main-header">
  <div class="wrapper">
    <div class="header-flex">
      <div class="menu-icon-container">
        <span class="menu-icon"><i class="fa fa-bars" aria-hidden="true"></i></span>
      </div>
      <nav class="main-nav">
        <span class="menu-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
        <!--<ul style="height:800px;overflow-y:scroll;overflow-y:auto;"> -->
        <ul>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/">全部(31)</a></li>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/blog/Bikepacking">分时分段环游地球<i class="fa fa-diamond" aria-hidden="true"></i><i class="fa fa-diamond" aria-hidden="true"></i>(23)</a></li>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/blog/Life">工欲善其事(1)</a></li>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/blog/Tools">必先利其器(0)</a></li>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/blog/Study">自强不息(4)</a></li>
		 
			 

			 

			 

			 

			 

			 

			 

			 <li><a  href="/blog/Essays">厚德载物<i class="fa fa-diamond" aria-hidden="true"></i>(3)</a></li>
		 
          <!--<li style="margin-bottom:200px;"><a href="/about">About(3)</a></li>-->
        </ul>
      </nav>
      <p class="logo"><a href="/">流浪⬝𝓲三丰<i class="fa fa-bicycle" aria-hidden="true"></i>异想世界</a></p>


		<div class="navbar-container">

		<div class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></div>

			<div class="navbar-menu">
			   
<!--					<a href="/travel_map"  data-hover="Travel Map <i class="fa fa-bell-o"></i>">Travel Map <i class="fa fa-bell-o"></i></a>-->
					<a href="/travel_map">Travel Map <i class="fa fa-bell-o"></i></a>
				
<!--					<a href="/about"  data-hover="About">About</a>-->
					<a href="/about">About</a>
				
			</div>


			<div class="navbar-mobile-menu" onclick="">
				<span class="icon-menu cross"><span class="middle"></span></span>
				<ul>
				   
					 <li><a href="/travel_map"data-hover="Travel Map <i class="fa fa-bell-o"></i>">Travel Map <i class="fa fa-bell-o"></i></a></li>  <!--title="访问 Travel Map <i class="fa fa-bell-o"></i>"-->
					 <!--<li><a href="/travel_map">Travel Map <i class="fa fa-bell-o"></i></a></li>-->
				   
					 <li><a href="/about"data-hover="About">About</a></li>  <!--title="访问 About"-->
					 <!--<li><a href="/about">About</a></li>-->
				   
				</ul>
			</div>

		</div>

    <!--  <div class="search-icon-container">
	    <a href="/" style="text-decoration: none; color: inherit;margin-right:20px;">Home</a>
		<a href="/about" style=" text-decoration: none; color: inherit;margin-right:20px;">About</a>
        <span class="search-icon"><a><i class="fa fa-search" aria-hidden="true"></i></a></span>
      </div> -->


    </div>
  </div>
</header> <!-- End Header -->

  <article class="article-page">

    <div class="page-image">
      <div class="cover-image" style="background: url(/assets/img/posts/python-cheat-sheet.webp) center no-repeat; background-size: cover;"></div>
    </div>

    <div class="wrapper">
      <div class="page-content">
        <div class="header-page">
          <h1 class="page-title">Python Cheatsheet</h1>
          <div class="page-date">
            <i class="fa fa-clock-o" aria-hidden="true"></i>
            <time datetime="2000-11-30 20:04:00 +0800">2000, Nov 30</time>
            <span id="author"> | <i class="fa fa-pencil-square-o" aria-hidden="true"></i><a href="/about">   三丰</a></span>
		  <!-- <span id="busuanzi_container_page_pv"> | 来访：<span id="busuanzi_value_page_pv"></span>人</span> -->
		  </div>
        </div>
        <h1 id="comprehensive-python-cheatsheet">Comprehensive Python Cheatsheet</h1>

<p><a href="https://raw.githubusercontent.com/gto76/python-cheatsheet/master/README.md">Download text file</a>, <a href="https://transactions.sendowl.com/products/78175486/4422834F/view">Buy PDF</a>, <a href="https://github.com/gto76/python-cheatsheet">Fork me on GitHub</a> or <a href="https://github.com/gto76/python-cheatsheet/wiki/Frequently-Asked-Questions">Check out FAQ</a>.</p>

<h2 id="contents"><a href="#toc">#</a>Contents</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ToC = {
    '1. Collections': [List, Dictionary, Set, Tuple, Range, Enumerate, Iterator, Generator],
    '2. Types':       [Type, String, Regular_Exp, Format, Numbers, Combinatorics, Datetime],
    '3. Syntax':      [Args, Inline, Closure, Decorator, Class, Duck_Type, Enum, Exception],
    '4. System':      [Exit, Print, Input, Command_Line_Arguments, Open, Path, OS_Commands],
    '5. Data':        [JSON, Pickle, CSV, SQLite, Bytes, Struct, Array, Memory_View, Deque],
    '6. Advanced':    [Threading, Operator, Introspection, Metaprograming, Eval, Coroutine],
    '7. Libraries':   [Progress_Bar, Plot, Table, Curses, Logging, Scraping, Web, Profile,
                       NumPy, Image, Audio, Games, Data, GUI]
}
</code></pre></div></div>

<h2 id="main"><a href="#main">#</a>Main</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>if __name__ == '__main__':     # Runs main() if file wasn't imported.
    main()
</code></pre></div></div>

<h2 id="list"><a href="#list">#</a>List</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt; = &lt;list&gt;[from_inclusive : to_exclusive : ±step_size]


&lt;list&gt;.append(&lt;el&gt;)            # Or: &lt;list&gt; += [&lt;el&gt;]
&lt;list&gt;.extend(&lt;collection&gt;)    # Or: &lt;list&gt; += &lt;collection&gt;


&lt;list&gt;.sort()
&lt;list&gt;.reverse()
&lt;list&gt; = sorted(&lt;collection&gt;)
&lt;iter&gt; = reversed(&lt;list&gt;)


sum_of_elements  = sum(&lt;collection&gt;)
elementwise_sum  = [sum(pair) for pair in zip(list_a, list_b)]
sorted_by_second = sorted(&lt;collection&gt;, key=lambda el: el[1])
sorted_by_both   = sorted(&lt;collection&gt;, key=lambda el: (el[1], el[0]))
flatter_list     = list(itertools.chain.from_iterable(&lt;list&gt;))
product_of_elems = functools.reduce(lambda out, el: out * el, &lt;collection&gt;)
list_of_chars    = list(&lt;str&gt;)
</code></pre></div></div>

<ul>
  <li>
    <p><strong>Module <a href="#operator">operator</a> provides functions itemgetter() and mul() that offer the same functionality as <a href="#lambda">lambda</a> expressions above.</strong></p>

    <int> = <list>.count(<el>)     # Returns number of occurrences. Also works on strings.
index = <list>.index(<el>)     # Returns index of first occurrence or raises ValueError.
<list>.insert(index, <el>)     # Inserts item at index and moves the rest to the right.
<el> = <list>.pop([index])     # Removes and returns item at index or from the end.
<list>.remove(<el>)            # Removes first occurrence of item or raises ValueError.
<list>.clear()                 # Removes all items. Also works on dictionary and set.
    

</list></el></list></list></el></el></list></el></list></el></list></int>
  </li>
</ul>
<p><a href="#dictionary">#</a>Dictionary
————————–</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;view&gt; = &lt;dict&gt;.keys()                          # Coll. of keys that reflects changes.
&lt;view&gt; = &lt;dict&gt;.values()                        # Coll. of values that reflects changes.
&lt;view&gt; = &lt;dict&gt;.items()                         # Coll. of key-value tuples that reflects chgs.


value  = &lt;dict&gt;.get(key, default=None)          # Returns default if key is missing.
value  = &lt;dict&gt;.setdefault(key, default=None)   # Returns and writes default if key is missing.
&lt;dict&gt; = collections.defaultdict(&lt;type&gt;)        # Creates a dict with default value of type.
&lt;dict&gt; = collections.defaultdict(lambda: 1)     # Creates a dict with default value 1.


&lt;dict&gt; = dict(&lt;collection&gt;)                     # Creates a dict from coll. of key-value pairs.
&lt;dict&gt; = dict(zip(keys, values))                # Creates a dict from two collections.
&lt;dict&gt; = dict.fromkeys(keys [, value])          # Creates a dict from collection of keys.


&lt;dict&gt;.update(&lt;dict&gt;)                           # Adds items. Replaces ones with matching keys.
value = &lt;dict&gt;.pop(key)                         # Removes item or raises KeyError.
{k for k, v in &lt;dict&gt;.items() if v == value}    # Returns set of keys that point to the value.
{k: v for k, v in &lt;dict&gt;.items() if k in keys}  # Returns a dictionary, filtered by keys.
</code></pre></div></div>

<h3 id="counter">Counter</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from collections import Counter
&gt;&gt;&gt; colors = ['blue', 'blue', 'blue', 'red', 'red']
&gt;&gt;&gt; counter = Counter(colors)
&gt;&gt;&gt; counter['yellow'] += 1
Counter({'blue': 3, 'red': 2, 'yellow': 1})
&gt;&gt;&gt; counter.most_common()[0]
('blue', 3)
</code></pre></div></div>

<h2 id="set"><a href="#set">#</a>Set</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;set&gt; = set()


&lt;set&gt;.add(&lt;el&gt;)                                 # Or: &lt;set&gt; |= {&lt;el&gt;}
&lt;set&gt;.update(&lt;collection&gt; [, ...])              # Or: &lt;set&gt; |= &lt;set&gt;


&lt;set&gt;  = &lt;set&gt;.union(&lt;coll.&gt;)                   # Or: &lt;set&gt; | &lt;set&gt;
&lt;set&gt;  = &lt;set&gt;.intersection(&lt;coll.&gt;)            # Or: &lt;set&gt; &amp; &lt;set&gt;
&lt;set&gt;  = &lt;set&gt;.difference(&lt;coll.&gt;)              # Or: &lt;set&gt; - &lt;set&gt;
&lt;set&gt;  = &lt;set&gt;.symmetric_difference(&lt;coll.&gt;)    # Or: &lt;set&gt; ^ &lt;set&gt;
&lt;bool&gt; = &lt;set&gt;.issubset(&lt;coll.&gt;)                # Or: &lt;set&gt; &lt;= &lt;set&gt;
&lt;bool&gt; = &lt;set&gt;.issuperset(&lt;coll.&gt;)              # Or: &lt;set&gt; &gt;= &lt;set&gt;


&lt;el&gt; = &lt;set&gt;.pop()                              # Raises KeyError if empty.
&lt;set&gt;.remove(&lt;el&gt;)                              # Raises KeyError if missing.
&lt;set&gt;.discard(&lt;el&gt;)                             # Doesn't raise an error.
</code></pre></div></div>

<h3 id="frozen-set">Frozen Set</h3>

<ul>
  <li><strong>Is immutable and hashable.</strong></li>
  <li>
    <p><strong>That means it can be used as a key in a dictionary or as an element in a set.</strong></p>

    <frozenset> = frozenset(<collection>)
    

</collection></frozenset>
  </li>
</ul>
<p><a href="#tuple">#</a>Tuple
—————-</p>

<p><strong>Tuple is an immutable and hashable list.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;tuple&gt; = ()
&lt;tuple&gt; = (&lt;el&gt;, )
&lt;tuple&gt; = (&lt;el_1&gt;, &lt;el_2&gt; [, ...])
</code></pre></div></div>

<h3 id="named-tuple">Named Tuple</h3>

<p><strong>Tuple’s subclass with named elements.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; Point = namedtuple('Point', 'x y')
&gt;&gt;&gt; p = Point(1, y=2)
Point(x=1, y=2)
&gt;&gt;&gt; p[0]
1
&gt;&gt;&gt; p.x
1
&gt;&gt;&gt; getattr(p, 'y')
2
&gt;&gt;&gt; p._fields  # Or: Point._fields
('x', 'y')
</code></pre></div></div>

<h2 id="range"><a href="#range">#</a>Range</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;range&gt; = range(to_exclusive)
&lt;range&gt; = range(from_inclusive, to_exclusive)
&lt;range&gt; = range(from_inclusive, to_exclusive, ±step_size)


from_inclusive = &lt;range&gt;.start
to_exclusive   = &lt;range&gt;.stop
</code></pre></div></div>

<h2 id="enumerate"><a href="#enumerate">#</a>Enumerate</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>for i, el in enumerate(&lt;collection&gt; [, i_start]):
    ...
</code></pre></div></div>

<h2 id="iterator"><a href="#iterator">#</a>Iterator</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;iter&gt; = iter(&lt;collection&gt;)                 # `iter(&lt;iter&gt;)` returns unmodified iterator.
&lt;iter&gt; = iter(&lt;function&gt;, to_exclusive)     # A sequence of return values until 'to_exclusive'.
&lt;el&gt;   = next(&lt;iter&gt; [, default])           # Raises StopIteration or returns 'default' on end.
&lt;list&gt; = list(&lt;iter&gt;)                       # Returns a list of iterator's remaining elements.
</code></pre></div></div>

<h3 id="itertools">Itertools</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from itertools import count, repeat, cycle, chain, islice


&lt;iter&gt; = count(start=0, step=1)             # Returns updated value endlessly. Accepts floats.
&lt;iter&gt; = repeat(&lt;el&gt; [, times])             # Returns element endlessly or 'times' times.
&lt;iter&gt; = cycle(&lt;collection&gt;)                # Repeats the sequence endlessly.


&lt;iter&gt; = chain(&lt;coll_1&gt;, &lt;coll_2&gt; [, ...])  # Empties collections in order.
&lt;iter&gt; = chain.from_iterable(&lt;collection&gt;)  # Empties collections inside a collection in order.


&lt;iter&gt; = islice(&lt;coll&gt;, to_exclusive)       # Only returns first 'to_exclusive' elements.
&lt;iter&gt; = islice(&lt;coll&gt;, from_inclusive, …)  # `to_exclusive, step_size`.
</code></pre></div></div>

<h2 id="generator"><a href="#generator">#</a>Generator</h2>

<ul>
  <li><strong>Any function that contains a yield statement returns a generator.</strong></li>
  <li>
    <p><strong>Generators and iterators are interchangeable.</strong></p>

    <p>def count(start, step):
    while True:
        yield start
        start += step</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>counter = count(10, 2)
next(counter), next(counter), next(counter)
(10, 12, 14)</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h2 id="type"><a href="#type">#</a>Type</h2>

<ul>
  <li><strong>Everything is an object.</strong></li>
  <li><strong>Every object has a type.</strong></li>
  <li>
    <p><strong>Type and class are synonymous.</strong></p>

    <type> = type(<el>)                          # Or: <el>.__class__
<bool> = isinstance(<el>, <type>)            # Or: issubclass(type(<el>), <type>)
    

&gt;&gt;&gt; type('a'), 'a'.__class__, str
(&lt;class 'str'&gt;, &lt;class 'str'&gt;, &lt;class 'str'&gt;)
    

</type></el></type></el></bool></el></el></type>
  </li>
</ul>
<h4 id="some-types-do-not-have-built-in-names-so-they-must-be-imported">Some types do not have built-in names, so they must be imported:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from types import FunctionType, MethodType, LambdaType, GeneratorType
</code></pre></div></div>

<h3 id="abstract-base-classes">Abstract Base Classes</h3>

<p><strong>Each abstract base class specifies a set of virtual subclasses. These classes are then recognized by isinstance() and issubclass() as subclasses of the ABC, although they are really not. ABC can also manually decide whether or not a specific class is its virtual subclass, usually based on which methods the class has implemented (Collection, Iterable).</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from collections.abc import Sequence, Collection, Iterable
&gt;&gt;&gt; isinstance([1, 2, 3], Iterable)
True


┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓
┃                  │  Sequence  │ Collection │  Iterable  ┃
┠──────────────────┼────────────┼────────────┼────────────┨
┃ list, range, str │     ✓      │     ✓      │     ✓      ┃
┃ dict, set        │            │     ✓      │     ✓      ┃
┃ iter             │            │            │     ✓      ┃
┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛


&gt;&gt;&gt; from numbers import Integral, Rational, Real, Complex, Number
&gt;&gt;&gt; isinstance(123, Number)
True


┏━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┓
┃                    │ Integral │ Rational │   Real   │ Complex  │  Number  ┃
┠────────────────────┼──────────┼──────────┼──────────┼──────────┼──────────┨
┃ int                │    ✓     │    ✓     │    ✓     │    ✓     │    ✓     ┃
┃ fractions.Fraction │          │    ✓     │    ✓     │    ✓     │    ✓     ┃
┃ float              │          │          │    ✓     │    ✓     │    ✓     ┃
┃ complex            │          │          │          │    ✓     │    ✓     ┃
┃ decimal.Decimal    │          │          │          │          │    ✓     ┃
┗━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┛
</code></pre></div></div>

<h2 id="string"><a href="#string">#</a>String</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;str&gt;  = &lt;str&gt;.strip()                       # Strips all whitespace characters from both ends.
&lt;str&gt;  = &lt;str&gt;.strip('&lt;chars&gt;')              # Strips all passed characters from both ends.


&lt;list&gt; = &lt;str&gt;.split()                       # Splits on one or more whitespace characters.
&lt;list&gt; = &lt;str&gt;.split(sep=None, maxsplit=-1)  # Splits on 'sep' str at most 'maxsplit' times.
&lt;list&gt; = &lt;str&gt;.splitlines(keepends=False)    # Splits on \n,\r,\r\n. Keeps them if 'keepends'.
&lt;str&gt;  = &lt;str&gt;.join(&lt;coll_of_strings&gt;)       # Joins elements using string as separator.


&lt;bool&gt; = &lt;sub_str&gt; in &lt;str&gt;                  # Checks if string contains a substring.
&lt;bool&gt; = &lt;str&gt;.startswith(&lt;sub_str&gt;)         # Pass tuple of strings for multiple options.
&lt;bool&gt; = &lt;str&gt;.endswith(&lt;sub_str&gt;)           # Pass tuple of strings for multiple options.
&lt;int&gt;  = &lt;str&gt;.find(&lt;sub_str&gt;)               # Returns start index of first match or -1.
&lt;int&gt;  = &lt;str&gt;.index(&lt;sub_str&gt;)              # Same but raises ValueError if missing.


&lt;str&gt;  = &lt;str&gt;.replace(old, new [, count])   # Replaces 'old' with 'new' at most 'count' times.
&lt;str&gt;  = &lt;str&gt;.translate(&lt;table&gt;)            # Use `str.maketrans(&lt;dict&gt;)` to generate table.


&lt;str&gt;  = chr(&lt;int&gt;)                          # Converts int to Unicode char.
&lt;int&gt;  = ord(&lt;str&gt;)                          # Converts Unicode char to int.
</code></pre></div></div>

<ul>
  <li><strong>Also: <code class="language-plaintext highlighter-rouge">'lstrip()'</code>, <code class="language-plaintext highlighter-rouge">'rstrip()'</code>.</strong></li>
  <li><strong>Also: <code class="language-plaintext highlighter-rouge">'lower()'</code>, <code class="language-plaintext highlighter-rouge">'upper()'</code>, <code class="language-plaintext highlighter-rouge">'capitalize()'</code> and <code class="language-plaintext highlighter-rouge">'title()'</code>.</strong></li>
</ul>

<h3 id="property-methods">Property Methods</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┯━━━━━━━━━━┓
┃               │ [ !#$%…] │ [a-zA-Z] │  [¼½¾]   │  [²³¹]   │  [0-9]   ┃
┠───────────────┼──────────┼──────────┼──────────┼──────────┼──────────┨
┃ isprintable() │    ✓     │    ✓     │    ✓     │    ✓     │    ✓     ┃
┃ isalnum()     │          │    ✓     │    ✓     │    ✓     │    ✓     ┃
┃ isnumeric()   │          │          │    ✓     │    ✓     │    ✓     ┃
┃ isdigit()     │          │          │          │    ✓     │    ✓     ┃
┃ isdecimal()   │          │          │          │          │    ✓     ┃
┗━━━━━━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┷━━━━━━━━━━┛
</code></pre></div></div>

<ul>
  <li><strong>Also: <code class="language-plaintext highlighter-rouge">'isspace()'</code> checks for <code class="language-plaintext highlighter-rouge">'[ \t\n\r\f\v…]'</code>.</strong></li>
</ul>

<h2 id="regex"><a href="#regex">#</a>Regex</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import re
&lt;str&gt;   = re.sub(&lt;regex&gt;, new, text, count=0)  # Substitutes all occurrences with 'new'.
&lt;list&gt;  = re.findall(&lt;regex&gt;, text)            # Returns all occurrences as strings.
&lt;list&gt;  = re.split(&lt;regex&gt;, text, maxsplit=0)  # Use brackets in regex to include the matches.
&lt;Match&gt; = re.search(&lt;regex&gt;, text)             # Searches for first occurrence of the pattern.
&lt;Match&gt; = re.match(&lt;regex&gt;, text)              # Searches only at the beginning of the text.
&lt;iter&gt;  = re.finditer(&lt;regex&gt;, text)           # Returns all occurrences as match objects.
</code></pre></div></div>

<ul>
  <li><strong>Search() and match() return None if they can’t find a match.</strong></li>
  <li><strong>Argument <code class="language-plaintext highlighter-rouge">'flags=re.IGNORECASE'</code> can be used with all functions.</strong></li>
  <li><strong>Argument <code class="language-plaintext highlighter-rouge">'flags=re.MULTILINE'</code> makes <code class="language-plaintext highlighter-rouge">'^'</code> and <code class="language-plaintext highlighter-rouge">'$'</code> match the start/end of each line.</strong></li>
  <li><strong>Argument <code class="language-plaintext highlighter-rouge">'flags=re.DOTALL'</code> makes dot also accept the <code class="language-plaintext highlighter-rouge">'\n'</code>.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">r'\1'</code> or <code class="language-plaintext highlighter-rouge">'\\1'</code> for backreference.</strong></li>
  <li><strong>Add <code class="language-plaintext highlighter-rouge">'?'</code> after an operator to make it non-greedy.</strong></li>
</ul>

<h3 id="match-object">Match Object</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;str&gt;   = &lt;Match&gt;.group()                      # Returns the whole match. Also group(0).
&lt;str&gt;   = &lt;Match&gt;.group(1)                     # Returns part in the first bracket.
&lt;tuple&gt; = &lt;Match&gt;.groups()                     # Returns all bracketed parts.
&lt;int&gt;   = &lt;Match&gt;.start()                      # Returns start index of the match.
&lt;int&gt;   = &lt;Match&gt;.end()                        # Returns exclusive end index of the match.
</code></pre></div></div>

<h3 id="special-sequences">Special Sequences</h3>

<ul>
  <li><strong>By default digits, alphanumerics and whitespaces from all alphabets are matched, unless <code class="language-plaintext highlighter-rouge">'flags=re.ASCII'</code> argument is used.</strong></li>
  <li>
    <p><strong>Use a capital letter for negation.</strong></p>

    <p>‘\d’ == ‘[0-9]’                                # Matches any digit.
‘\w’ == ‘[a-zA-Z0-9_]’                         # Matches any alphanumeric.
‘\s’ == ‘[ \t\n\r\f\v]’                        # Matches any whitespace.</p>
  </li>
</ul>

<h2 id="format"><a href="#format">#</a>Format</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;str&gt; = f'{&lt;el_1&gt;}, {&lt;el_2&gt;}'
&lt;str&gt; = '{}, {}'.format(&lt;el_1&gt;, &lt;el_2&gt;)
</code></pre></div></div>

<h3 id="attributes">Attributes</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from collections import namedtuple
&gt;&gt;&gt; Person = namedtuple('Person', 'name height')
&gt;&gt;&gt; person = Person('Jean-Luc', 187)
&gt;&gt;&gt; f'{person.height}'
'187'
&gt;&gt;&gt; '{p.height}'.format(p=person)
'187'
</code></pre></div></div>

<h3 id="general-options">General Options</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{&lt;el&gt;:&lt;10}                                     # '&lt;el&gt;      '
{&lt;el&gt;:^10}                                     # '   &lt;el&gt;   '
{&lt;el&gt;:&gt;10}                                     # '      &lt;el&gt;'
{&lt;el&gt;:.&lt;10}                                    # '&lt;el&gt;......'
{&lt;el&gt;:0}                                       # '&lt;el&gt;'
</code></pre></div></div>

<h3 id="strings">Strings</h3>

<p><strong><code class="language-plaintext highlighter-rouge">'!r'</code> calls object’s <a href="#class">repr()</a> method, instead of <a href="#class">str()</a>, to get a string.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{'abcde'!r:10}                                 # "'abcde'   "
{'abcde':10.3}                                 # 'abc       '
{'abcde':.3}                                   # 'abc'
</code></pre></div></div>

<h3 id="numbers">Numbers</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{ 123456:10,}                                  # '   123,456'
{ 123456:10_}                                  # '   123_456'
{ 123456:+10}                                  # '   +123456'
{-123456:=10}                                  # '-   123456'
{ 123456: }                                    # ' 123456'
{-123456: }                                    # '-123456'
</code></pre></div></div>

<h3 id="floats">Floats</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{1.23456:10.3}                                 # '      1.23'
{1.23456:10.3f}                                # '     1.235'
{1.23456:10.3e}                                # ' 1.235e+00'
{1.23456:10.3%}                                # '  123.456%'
</code></pre></div></div>

<h4 id="comparison-of-presentation-types">Comparison of presentation types:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┓
┃               │    {&lt;float&gt;}    │   {&lt;float&gt;:f}   │   {&lt;float&gt;:e}   │   {&lt;float&gt;:%}   ┃
┠───────────────┼─────────────────┼─────────────────┼─────────────────┼─────────────────┨
┃   0.000056789 │    '5.6789e-05' │     '0.000057'  │  '5.678900e-05' │     '0.005679%' ┃
┃   0.00056789  │    '0.00056789' │     '0.000568'  │  '5.678900e-04' │     '0.056789%' ┃
┃   0.0056789   │    '0.0056789'  │     '0.005679'  │  '5.678900e-03' │     '0.567890%' ┃
┃   0.056789    │    '0.056789'   │     '0.056789'  │  '5.678900e-02' │     '5.678900%' ┃
┃   0.56789     │    '0.56789'    │     '0.567890'  │  '5.678900e-01' │    '56.789000%' ┃
┃   5.6789      │    '5.6789'     │     '5.678900'  │  '5.678900e+00' │   '567.890000%' ┃
┃  56.789       │   '56.789'      │    '56.789000'  │  '5.678900e+01' │  '5678.900000%' ┃
┃ 567.89        │  '567.89'       │   '567.890000'  │  '5.678900e+02' │ '56789.000000%' ┃
┗━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┛


┏━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━┓
┃               │   {&lt;float&gt;:.2}  │  {&lt;float&gt;:.2f}  │  {&lt;float&gt;:.2e}  │  {&lt;float&gt;:.2%}  ┃
┠───────────────┼─────────────────┼─────────────────┼─────────────────┼─────────────────┨
┃   0.000056789 │    '5.7e-05'    │       '0.00'    │    '5.68e-05'   │       '0.01%'   ┃
┃   0.00056789  │    '0.00057'    │       '0.00'    │    '5.68e-04'   │       '0.06%'   ┃
┃   0.0056789   │    '0.0057'     │       '0.01'    │    '5.68e-03'   │       '0.57%'   ┃
┃   0.056789    │    '0.057'      │       '0.06'    │    '5.68e-02'   │       '5.68%'   ┃
┃   0.56789     │    '0.57'       │       '0.57'    │    '5.68e-01'   │      '56.79%'   ┃
┃   5.6789      │    '5.7'        │       '5.68'    │    '5.68e+00'   │     '567.89%'   ┃
┃  56.789       │    '5.7e+01'    │      '56.79'    │    '5.68e+01'   │    '5678.90%'   ┃
┃ 567.89        │    '5.7e+02'    │     '567.89'    │    '5.68e+02'   │   '56789.00%'   ┃
┗━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━┛
</code></pre></div></div>

<h3 id="ints">Ints</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{90:c}                                   # 'Z'
{90:b}                                   # '1011010'
{90:X}                                   # '5A'
</code></pre></div></div>

<h2 id="numbers-1"><a href="#numbers">#</a>Numbers</h2>

<h3 id="types">Types</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;int&gt;      = int(&lt;float/str/bool&gt;)       # Or: math.floor(&lt;float&gt;)
&lt;float&gt;    = float(&lt;int/str/bool&gt;)       # Or: &lt;real&gt;e±&lt;int&gt;
&lt;complex&gt;  = complex(real=0, imag=0)     # Or: &lt;real&gt; ± &lt;real&gt;j
&lt;Fraction&gt; = fractions.Fraction(0, 1)    # Or: Fraction(numerator=0, denominator=1)
&lt;Decimal&gt;  = decimal.Decimal(&lt;str/int&gt;)  # Or: Decimal((sign, digits, exponent))
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'int(&lt;str&gt;)'</code> and <code class="language-plaintext highlighter-rouge">'float(&lt;str&gt;)'</code> raise ValueError on malformed strings.</strong></li>
  <li><strong>Decimal numbers can be represented exactly, unlike floats where <code class="language-plaintext highlighter-rouge">'1.1 + 2.2 != 3.3'</code>.</strong></li>
  <li><strong>Precision of decimal operations is set with: <code class="language-plaintext highlighter-rouge">'decimal.getcontext().prec = &lt;int&gt;'</code>.</strong></li>
</ul>

<h3 id="basic-functions">Basic Functions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;num&gt; = pow(&lt;num&gt;, &lt;num&gt;)                # Or: &lt;num&gt; ** &lt;num&gt;
&lt;num&gt; = abs(&lt;num&gt;)                       # &lt;float&gt; = abs(&lt;complex&gt;)
&lt;num&gt; = round(&lt;num&gt; [, ±ndigits])        # `round(126, -1) == 130`
</code></pre></div></div>

<h3 id="math">Math</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from math import e, pi, inf, nan, isinf, isnan
from math import cos, acos, sin, asin, tan, atan, degrees, radians
from math import log, log10, log2
</code></pre></div></div>

<h3 id="statistics">Statistics</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from statistics import mean, median, variance, stdev, pvariance, pstdev
</code></pre></div></div>

<h3 id="random">Random</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from random import random, randint, choice, shuffle
&lt;float&gt; = random()
&lt;int&gt;   = randint(from_inclusive, to_inclusive)
&lt;el&gt;    = choice(&lt;list&gt;)
shuffle(&lt;list&gt;)
</code></pre></div></div>

<h3 id="bin-hex">Bin, Hex</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;int&gt; = ±0b&lt;bin&gt;                         # Or: ±0x&lt;hex&gt;
&lt;int&gt; = int('±&lt;bin&gt;', 2)                 # Or: int('±&lt;hex&gt;', 16)
&lt;int&gt; = int('±0b&lt;bin&gt;', 0)               # Or: int('±0x&lt;hex&gt;', 0)
&lt;str&gt; = bin(&lt;int&gt;)                       # Returns '[-]0b&lt;bin&gt;'.
</code></pre></div></div>

<h3 id="bitwise-operators">Bitwise Operators</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;int&gt; = &lt;int&gt; &amp; &lt;int&gt;                    # And
&lt;int&gt; = &lt;int&gt; | &lt;int&gt;                    # Or
&lt;int&gt; = &lt;int&gt; ^ &lt;int&gt;                    # Xor (0 if both bits equal)
&lt;int&gt; = &lt;int&gt; &lt;&lt; n_bits                  # Shift left (&gt;&gt; for right)
&lt;int&gt; = ~&lt;int&gt;                           # Not (also: -&lt;int&gt; - 1)
</code></pre></div></div>

<h2 id="combinatorics"><a href="#combinatorics">#</a>Combinatorics</h2>

<ul>
  <li><strong>Every function returns an iterator.</strong></li>
  <li>
    <p><strong>If you want to print the iterator, you need to pass it to the list() function first!</strong></p>

    <p>from itertools import product, combinations, combinations_with_replacement, permutations</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>product([0, 1], repeat=3)
[(0, 0, 0), (0, 0, 1), (0, 1, 0), (0, 1, 1), …, (1, 1, 1)]</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>product(‘abc’, ‘abc’)                    #   a  b  c
[(‘a’, ‘a’), (‘a’, ‘b’), (‘a’, ‘c’),         # a x  x  x
 (‘b’, ‘a’), (‘b’, ‘b’), (‘b’, ‘c’),         # b x  x  x
 (‘c’, ‘a’), (‘c’, ‘b’), (‘c’, ‘c’)]         # c x  x  x</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>combinations(‘abc’, 2)                   #   a  b  c
[(‘a’, ‘b’), (‘a’, ‘c’),                     # a .  x  x
 (‘b’, ‘c’)]                                 # b .  .  x</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>combinations_with_replacement(‘abc’, 2)  #   a  b  c
[(‘a’, ‘a’), (‘a’, ‘b’), (‘a’, ‘c’),         # a x  x  x
 (‘b’, ‘b’), (‘b’, ‘c’),                     # b .  x  x
 (‘c’, ‘c’)]                                 # c .  .  x</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>permutations(‘abc’, 2)                   #   a  b  c
[(‘a’, ‘b’), (‘a’, ‘c’),                     # a .  x  x
 (‘b’, ‘a’), (‘b’, ‘c’),                     # b x  .  x
 (‘c’, ‘a’), (‘c’, ‘b’)]                     # c x  x  .</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h2 id="datetime"><a href="#datetime">#</a>Datetime</h2>

<ul>
  <li><strong>Module ‘datetime’ provides ‘date’ <code class="language-plaintext highlighter-rouge">&lt;D&gt;</code>, ‘time’ <code class="language-plaintext highlighter-rouge">&lt;T&gt;</code>, ‘datetime’ <code class="language-plaintext highlighter-rouge">&lt;DT&gt;</code> and ‘timedelta’ <code class="language-plaintext highlighter-rouge">&lt;TD&gt;</code> classes. All are immutable and hashable.</strong></li>
  <li><strong>Time and datetime objects can be ‘aware’ <code class="language-plaintext highlighter-rouge">&lt;a&gt;</code>, meaning they have defined timezone, or ‘naive’ <code class="language-plaintext highlighter-rouge">&lt;n&gt;</code>, meaning they don’t.</strong></li>
  <li>
    <p><strong>If object is naive, it is presumed to be in the system’s timezone.</strong></p>

    <p>from datetime import date, time, datetime, timedelta
from dateutil.tz import UTC, tzlocal, gettz, resolve_imaginary</p>
  </li>
</ul>

<h3 id="constructors">Constructors</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;D&gt;  = date(year, month, day)
&lt;T&gt;  = time(hour=0, minute=0, second=0, microsecond=0, tzinfo=None, fold=0)
&lt;DT&gt; = datetime(year, month, day, hour=0, minute=0, second=0, ...)
&lt;TD&gt; = timedelta(days=0, seconds=0, microseconds=0, milliseconds=0,
                 minutes=0, hours=0, weeks=0)
</code></pre></div></div>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'&lt;D/DT&gt;.weekday()'</code> to get the day of the week (Mon == 0).</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'fold=1'</code> means the second pass in case of time jumping back for one hour.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;DTa&gt; = resolve_imaginary(&lt;DTa&gt;)'</code> fixes DTs that fall into the missing hour.</strong></li>
</ul>

<h3 id="now">Now</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;D/DTn&gt;  = D/DT.today()                     # Current local date or naive datetime.
&lt;DTn&gt;    = DT.utcnow()                      # Naive datetime from current UTC time.
&lt;DTa&gt;    = DT.now(&lt;tzinfo&gt;)                 # Aware datetime from current tz time.
</code></pre></div></div>

<ul>
  <li><strong>To extract time use <code class="language-plaintext highlighter-rouge">'&lt;DTn&gt;.time()'</code>, <code class="language-plaintext highlighter-rouge">'&lt;DTa&gt;.time()'</code> or <code class="language-plaintext highlighter-rouge">'&lt;DTa&gt;.timetz()'</code>.</strong></li>
</ul>

<h3 id="timezone">Timezone</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;tzinfo&gt; = UTC                              # UTC timezone. London without DST.
&lt;tzinfo&gt; = tzlocal()                        # Local timezone. Also gettz().
&lt;tzinfo&gt; = gettz('&lt;Continent&gt;/&lt;City&gt;')      # 'Continent/City_Name' timezone or None.
&lt;DTa&gt;    = &lt;DT&gt;.astimezone(&lt;tzinfo&gt;)        # Datetime, converted to passed timezone.
&lt;Ta/DTa&gt; = &lt;T/DT&gt;.replace(tzinfo=&lt;tzinfo&gt;)  # Unconverted object with new timezone.
</code></pre></div></div>

<h3 id="encode">Encode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;D/T/DT&gt; = D/T/DT.fromisoformat('&lt;iso&gt;')    # Object from ISO string. Raises ValueError.
&lt;DT&gt;     = DT.strptime(&lt;str&gt;, '&lt;format&gt;')   # Datetime from str, according to format.
&lt;D/DTn&gt;  = D/DT.fromordinal(&lt;int&gt;)          # D/DTn from days since Christ, at midnight.
&lt;DTn&gt;    = DT.fromtimestamp(&lt;real&gt;)         # Local time DTn from seconds since Epoch.
&lt;DTa&gt;    = DT.fromtimestamp(&lt;real&gt;, &lt;tz.&gt;)  # Aware datetime from seconds since Epoch.
</code></pre></div></div>

<ul>
  <li><strong>ISO strings come in following forms: <code class="language-plaintext highlighter-rouge">'YYYY-MM-DD'</code>, <code class="language-plaintext highlighter-rouge">'HH:MM:SS.ffffff[±&lt;offset&gt;]'</code>, or both separated by an arbitrary character. Offset is formatted as: <code class="language-plaintext highlighter-rouge">'HH:MM'</code>.</strong></li>
  <li><strong>Epoch on Unix systems is: <code class="language-plaintext highlighter-rouge">'1970-01-01 00:00 UTC'</code>, <code class="language-plaintext highlighter-rouge">'1970-01-01 01:00 CET'</code>, …</strong></li>
</ul>

<h3 id="decode">Decode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;str&gt;    = &lt;D/T/DT&gt;.isoformat(sep='T')      # Also timespec='auto/hours/minutes/seconds'.
&lt;str&gt;    = &lt;D/T/DT&gt;.strftime('&lt;format&gt;')    # Custom string representation.
&lt;int&gt;    = &lt;D/DT&gt;.toordinal()               # Days since Christ, ignoring time and tz.
&lt;float&gt;  = &lt;DTn&gt;.timestamp()                # Seconds since Epoch, from DTn in local tz.
&lt;float&gt;  = &lt;DTa&gt;.timestamp()                # Seconds since Epoch, from DTa.
</code></pre></div></div>

<h3 id="format-1">Format</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from datetime import datetime
&gt;&gt;&gt; dt = datetime.strptime('2015-05-14 23:39:00.00 +0200', '%Y-%m-%d %H:%M:%S.%f %z')
&gt;&gt;&gt; dt.strftime("%A, %dth of %B '%y, %I:%M%p %Z")
"Thursday, 14th of May '15, 11:39PM UTC+02:00"
</code></pre></div></div>

<ul>
  <li><strong>When parsing, <code class="language-plaintext highlighter-rouge">'%z'</code> also accepts <code class="language-plaintext highlighter-rouge">'±HH:MM'</code>.</strong></li>
  <li><strong>For abbreviated weekday and month use <code class="language-plaintext highlighter-rouge">'%a'</code> and <code class="language-plaintext highlighter-rouge">'%b'</code>.</strong></li>
</ul>

<h3 id="arithmetics">Arithmetics</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;D/DT&gt;   = &lt;D/DT&gt;   ± &lt;TD&gt;                  # Returned datetime can fall into missing hour.
&lt;TD&gt;     = &lt;D/DTn&gt;  - &lt;D/DTn&gt;               # Returns the difference, ignoring time jumps.
&lt;TD&gt;     = &lt;DTa&gt;    - &lt;DTa&gt;                 # Ignores time jumps if they share tzinfo object.
&lt;TD&gt;     = &lt;DT_UTC&gt; - &lt;DT_UTC&gt;              # Convert DTs to UTC to get the actual delta.
</code></pre></div></div>

<h2 id="arguments"><a href="#arguments">#</a>Arguments</h2>

<h3 id="inside-function-call">Inside Function Call</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;function&gt;(&lt;positional_args&gt;)                  # f(0, 0)
&lt;function&gt;(&lt;keyword_args&gt;)                     # f(x=0, y=0)
&lt;function&gt;(&lt;positional_args&gt;, &lt;keyword_args&gt;)  # f(0, y=0)
</code></pre></div></div>

<h3 id="inside-function-definition">Inside Function Definition</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def f(&lt;nondefault_args&gt;):                      # def f(x, y):
def f(&lt;default_args&gt;):                         # def f(x=0, y=0):
def f(&lt;nondefault_args&gt;, &lt;default_args&gt;):      # def f(x, y=0):
</code></pre></div></div>

<h2 id="splat-operator"><a href="#splatoperator">#</a>Splat Operator</h2>

<h3 id="inside-function-call-1">Inside Function Call</h3>

<p><strong>Splat expands a collection into positional arguments, while splatty-splat expands a dictionary into keyword arguments.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>args   = (1, 2)
kwargs = {'x': 3, 'y': 4, 'z': 5}
func(*args, **kwargs)
</code></pre></div></div>

<h4 id="is-the-same-as">Is the same as:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>func(1, 2, x=3, y=4, z=5)
</code></pre></div></div>

<h3 id="inside-function-definition-1">Inside Function Definition</h3>

<p><strong>Splat combines zero or more positional arguments into a tuple, while splatty-splat combines zero or more keyword arguments into a dictionary.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def add(*a):
    return sum(a)


&gt;&gt;&gt; add(1, 2, 3)
6
</code></pre></div></div>

<h4 id="legal-argument-combinations">Legal argument combinations:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def f(x, y, z):                # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)
def f(*, x, y, z):             # f(x=1, y=2, z=3)
def f(x, *, y, z):             # f(x=1, y=2, z=3) | f(1, y=2, z=3)
def f(x, y, *, z):             # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)


def f(*args):                  # f(1, 2, 3)
def f(x, *args):               # f(1, 2, 3)
def f(*args, z):               # f(1, 2, z=3)
def f(x, *args, z):            # f(1, 2, z=3)


def f(**kwargs):               # f(x=1, y=2, z=3)
def f(x, **kwargs):            # f(x=1, y=2, z=3) | f(1, y=2, z=3)
def f(*, x, **kwargs):         # f(x=1, y=2, z=3)


def f(*args, **kwargs):        # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)
def f(x, *args, **kwargs):     # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3) | f(1, 2, 3)
def f(*args, y, **kwargs):     # f(x=1, y=2, z=3) | f(1, y=2, z=3)
def f(x, *args, z, **kwargs):  # f(x=1, y=2, z=3) | f(1, y=2, z=3) | f(1, 2, z=3)
</code></pre></div></div>

<h3 id="other-uses">Other Uses</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt;  = [*&lt;collection&gt; [, ...]]
&lt;set&gt;   = {*&lt;collection&gt; [, ...]}
&lt;tuple&gt; = (*&lt;collection&gt;, [...])
&lt;dict&gt;  = {**&lt;dict&gt; [, ...]}


head, *body, tail = &lt;collection&gt;
</code></pre></div></div>

<h2 id="inline"><a href="#inline">#</a>Inline</h2>

<h3 id="lambda">Lambda</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;function&gt; = lambda: &lt;return_value&gt;
&lt;function&gt; = lambda &lt;argument_1&gt;, &lt;argument_2&gt;: &lt;return_value&gt;
</code></pre></div></div>

<h3 id="comprehensions">Comprehensions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt; = [i+1 for i in range(10)]                   # [1, 2, ..., 10]
&lt;set&gt;  = {i for i in range(10) if i &gt; 5}            # {6, 7, 8, 9}
&lt;iter&gt; = (i+5 for i in range(10))                   # (5, 6, ..., 14)
&lt;dict&gt; = {i: i*2 for i in range(10)}                # {0: 0, 1: 2, ..., 9: 18}


out = [i+j for i in range(10) for j in range(10)]
</code></pre></div></div>

<h4 id="is-the-same-as-1">Is the same as:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>out = []
for i in range(10):
    for j in range(10):
        out.append(i+j)
</code></pre></div></div>

<h3 id="map-filter-reduce">Map, Filter, Reduce</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import reduce
&lt;iter&gt; = map(lambda x: x + 1, range(10))            # (1, 2, ..., 10)
&lt;iter&gt; = filter(lambda x: x &gt; 5, range(10))         # (6, 7, 8, 9)
&lt;obj&gt;  = reduce(lambda out, x: out + x, range(10))  # 45
</code></pre></div></div>

<h3 id="any-all">Any, All</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;bool&gt; = any(&lt;collection&gt;)                          # False if empty.
&lt;bool&gt; = all(el[1] for el in &lt;collection&gt;)          # True if empty.
</code></pre></div></div>

<h3 id="if---else">If - Else</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;obj&gt; = &lt;expression_if_true&gt; if &lt;condition&gt; else &lt;expression_if_false&gt;


&gt;&gt;&gt; [a if a else 'zero' for a in (0, 1, 2, 3)]
['zero', 1, 2, 3]
</code></pre></div></div>

<h3 id="namedtuple-enum-dataclass">Namedtuple, Enum, Dataclass</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from collections import namedtuple
Point     = namedtuple('Point', 'x y')
point     = Point(0, 0)


from enum import Enum
Direction = Enum('Direction', 'n e s w')
direction = Direction.n


from dataclasses import make_dataclass
Creature  = make_dataclass('Creature', ['location', 'direction'])
creature  = Creature(Point(0, 0), Direction.n)
</code></pre></div></div>

<h2 id="closure"><a href="#closure">#</a>Closure</h2>

<p><strong>We have a closure in Python when:</strong></p>

<ul>
  <li><strong>A nested function references a value of its enclosing function and then</strong></li>
  <li>
    <p><strong>the enclosing function returns the nested function.</strong></p>

    <p>def get_multiplier(a):
    def out(b):
        return a * b
    return out</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>multiply_by_3 = get_multiplier(3)
multiply_by_3(10)
30</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
  <li><strong>If multiple nested functions within enclosing function reference the same value, that value gets shared.</strong></li>
  <li><strong>To dynamically access function’s first free variable use <code class="language-plaintext highlighter-rouge">'&lt;function&gt;.__closure__[0].cell_contents'</code>.</strong></li>
</ul>

<h3 id="partial">Partial</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import partial
&lt;function&gt; = partial(&lt;function&gt; [, &lt;arg_1&gt;, &lt;arg_2&gt;, ...])


&gt;&gt;&gt; import operator as op
&gt;&gt;&gt; multiply_by_3 = partial(op.mul, 3)
&gt;&gt;&gt; multiply_by_3(10)
30
</code></pre></div></div>

<ul>
  <li><strong>Partial is also useful in cases when function needs to be passed as an argument, because it enables us to set its arguments beforehand.</strong></li>
  <li><strong>A few examples being: <code class="language-plaintext highlighter-rouge">'defaultdict(&lt;function&gt;)'</code>, <code class="language-plaintext highlighter-rouge">'iter(&lt;function&gt;, to_exclusive)'</code> and dataclass’s <code class="language-plaintext highlighter-rouge">'field(default_factory=&lt;function&gt;)'</code>.</strong></li>
</ul>

<h3 id="non-local">Non-Local</h3>

<p><strong>If variable is being assigned to anywhere in the scope, it is regarded as a local variable, unless it is declared as a ‘global’ or a ‘nonlocal’.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def get_counter():
    i = 0
    def out():
        nonlocal i
        i += 1
        return i
    return out


&gt;&gt;&gt; counter = get_counter()
&gt;&gt;&gt; counter(), counter(), counter()
(1, 2, 3)
</code></pre></div></div>

<h2 id="decorator"><a href="#decorator">#</a>Decorator</h2>

<p><strong>A decorator takes a function, adds some functionality and returns it.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@decorator_name
def function_that_gets_passed_to_decorator():
    ...
</code></pre></div></div>

<h3 id="debugger-example">Debugger Example</h3>

<p><strong>Decorator that prints function’s name every time it gets called.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import wraps

def debug(func):
    @wraps(func)
    def out(*args, **kwargs):
        print(func.__name__)
        return func(*args, **kwargs)
    return out

@debug
def add(x, y):
    return x + y
</code></pre></div></div>

<ul>
  <li><strong>Wraps is a helper decorator that copies the metadata of the passed function (func) to the function it is wrapping (out).</strong></li>
  <li><strong>Without it <code class="language-plaintext highlighter-rouge">'add.__name__'</code> would return <code class="language-plaintext highlighter-rouge">'out'</code>.</strong></li>
</ul>

<h3 id="lru-cache">LRU Cache</h3>

<p><strong>Decorator that caches function’s return values. All function’s arguments must be hashable.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import lru_cache

@lru_cache(maxsize=None)
def fib(n):
    return n if n &lt; 2 else fib(n-2) + fib(n-1)
</code></pre></div></div>

<ul>
  <li><strong>CPython interpreter limits recursion depth to 1000 by default. To increase it use <code class="language-plaintext highlighter-rouge">'sys.setrecursionlimit(&lt;depth&gt;)'</code>.</strong></li>
</ul>

<h3 id="parametrized-decorator">Parametrized Decorator</h3>

<p><strong>A decorator that accepts arguments and returns a normal decorator that accepts a function.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import wraps

def debug(print_result=False):
    def decorator(func):
        @wraps(func)
        def out(*args, **kwargs):
            result = func(*args, **kwargs)
            print(func.__name__, result if print_result else '')
            return result
        return out
    return decorator

@debug(print_result=True)
def add(x, y):
    return x + y
</code></pre></div></div>

<h2 id="class"><a href="#class">#</a>Class</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class &lt;name&gt;:
    def __init__(self, a):
        self.a = a
    def __repr__(self):
        class_name = self.__class__.__name__
        return f'{class_name}({self.a!r})'
    def __str__(self):
        return str(self.a)

    @classmethod
    def get_class_name(cls):
        return cls.__name__
</code></pre></div></div>

<ul>
  <li><strong>Return value of repr() should be unambiguous and of str() readable.</strong></li>
  <li><strong>If only repr() is defined, it will also be used for str().</strong></li>
</ul>

<h4 id="str-use-cases">Str() use cases:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print(&lt;el&gt;)
print(f'{&lt;el&gt;}')
raise Exception(&lt;el&gt;)
loguru.logger.debug(&lt;el&gt;)
csv.writer(&lt;file&gt;).writerow([&lt;el&gt;])
</code></pre></div></div>

<h4 id="repr-use-cases">Repr() use cases:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print([&lt;el&gt;])
print(f'{&lt;el&gt;!r}')
&gt;&gt;&gt; &lt;el&gt;
loguru.logger.exception()
Z = dataclasses.make_dataclass('Z', ['a']); print(Z(&lt;el&gt;))
</code></pre></div></div>

<h3 id="constructor-overloading">Constructor Overloading</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class &lt;name&gt;:
    def __init__(self, a=None):
        self.a = a
</code></pre></div></div>

<h3 id="inheritance">Inheritance</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class Person:
    def __init__(self, name, age):
        self.name = name
        self.age  = age

class Employee(Person):
    def __init__(self, name, age, staff_num):
        super().__init__(name, age)
        self.staff_num = staff_num
</code></pre></div></div>

<h3 id="multiple-inheritance">Multiple Inheritance</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class A: pass
class B: pass
class C(A, B): pass
</code></pre></div></div>

<p><strong>MRO determines the order in which parent classes are traversed when searching for a method:</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; C.mro()
[&lt;class 'C'&gt;, &lt;class 'A'&gt;, &lt;class 'B'&gt;, &lt;class 'object'&gt;]
</code></pre></div></div>

<h3 id="property">Property</h3>

<p><strong>Pythonic way of implementing getters and setters.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class MyClass:
    @property
    def a(self):
        return self._a

    @a.setter
    def a(self, value):
        self._a = value


&gt;&gt;&gt; el = MyClass()
&gt;&gt;&gt; el.a = 123
&gt;&gt;&gt; el.a
123
</code></pre></div></div>

<h3 id="dataclass">Dataclass</h3>

<p><strong>Decorator that automatically generates init(), repr() and eq() special methods.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from dataclasses import dataclass, field

@dataclass(order=False, frozen=False)
class &lt;class_name&gt;:
    &lt;attr_name_1&gt;: &lt;type&gt;
    &lt;attr_name_2&gt;: &lt;type&gt; = &lt;default_value&gt;
    &lt;attr_name_3&gt;: list/dict/set = field(default_factory=list/dict/set)
</code></pre></div></div>

<ul>
  <li><strong>Objects can be made sortable with <code class="language-plaintext highlighter-rouge">'order=True'</code> and immutable with <code class="language-plaintext highlighter-rouge">'frozen=True'</code>.</strong></li>
  <li><strong>For object to be hashable, all attributes must be hashable and frozen must be True.</strong></li>
  <li><strong>Function field() is needed because <code class="language-plaintext highlighter-rouge">'&lt;attr_name&gt;: list = []'</code> would make a list that is shared among all instances.</strong></li>
  <li><strong>Default_factory can be any <a href="#callable">callable</a>.</strong></li>
</ul>

<h4 id="inline-1">Inline:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from dataclasses import make_dataclass
&lt;class&gt; = make_dataclass('&lt;class_name&gt;', &lt;coll_of_attribute_names&gt;)
&lt;class&gt; = make_dataclass('&lt;class_name&gt;', &lt;coll_of_tuples&gt;)
&lt;tuple&gt; = ('&lt;attr_name&gt;', &lt;type&gt; [, &lt;default_value&gt;])
</code></pre></div></div>

<h3 id="slots">Slots</h3>

<p><strong>Mechanism that restricts objects to attributes listed in ‘slots’ and significantly reduces their memory footprint.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class MyClassWithSlots:
    __slots__ = ['a']
    def __init__(self):
        self.a = 1
</code></pre></div></div>

<h3 id="copy">Copy</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from copy import copy, deepcopy
&lt;object&gt; = copy(&lt;object&gt;)
&lt;object&gt; = deepcopy(&lt;object&gt;)
</code></pre></div></div>

<h2 id="duck-types"><a href="#ducktypes">#</a>Duck Types</h2>

<p><strong>A duck type is an implicit type that prescribes a set of special methods. Any object that has those methods defined is considered a member of that duck type.</strong></p>

<h3 id="comparable">Comparable</h3>

<ul>
  <li><strong>If eq() method is not overridden, it returns <code class="language-plaintext highlighter-rouge">'id(self) == id(other)'</code>, which is the same as <code class="language-plaintext highlighter-rouge">'self is other'</code>.</strong></li>
  <li><strong>That means all objects compare not equal by default.</strong></li>
  <li>
    <p><strong>Only the left side object has eq() method called, unless it returns NotImplemented, in which case the right object is consulted.</strong></p>

    <p>class MyComparable:
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>eq</strong>(self, other):
        if isinstance(other, type(self)):
            return self.a == other.a
        return NotImplemented</p>
  </li>
</ul>

<h3 id="hashable">Hashable</h3>

<ul>
  <li><strong>Hashable object needs both hash() and eq() methods and its hash value should never change.</strong></li>
  <li><strong>Hashable objects that compare equal must have the same hash value, meaning default hash() that returns <code class="language-plaintext highlighter-rouge">'id(self)'</code> will not do.</strong></li>
  <li>
    <p><strong>That is why Python automatically makes classes unhashable if you only implement eq().</strong></p>

    <p>class MyHashable:
    def <strong>init</strong>(self, a):
        self._a = a
    @property
    def a(self):
        return self._a
    def <strong>eq</strong>(self, other):
        if isinstance(other, type(self)):
            return self.a == other.a
        return NotImplemented
    def <strong>hash</strong>(self):
        return hash(self.a)</p>
  </li>
</ul>

<h3 id="sortable">Sortable</h3>

<ul>
  <li>
    <p><strong>With total_ordering decorator, you only need to provide eq() and one of lt(), gt(), le() or ge() special methods.</strong></p>

    <p>from functools import total_ordering</p>

    <p>@total_ordering
class MySortable:
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>eq</strong>(self, other):
        if isinstance(other, type(self)):
            return self.a == other.a
        return NotImplemented
    def <strong>lt</strong>(self, other):
        if isinstance(other, type(self)):
            return self.a &lt; other.a
        return NotImplemented</p>
  </li>
</ul>

<h3 id="iterator-1">Iterator</h3>

<ul>
  <li><strong>Any object that has methods next() and iter() is an iterator.</strong></li>
  <li><strong>Next() should return next item or raise StopIteration.</strong></li>
  <li>
    <p><strong>Iter() should return ‘self’.</strong></p>

    <p>class Counter:
    def <strong>init</strong>(self):
        self.i = 0
    def <strong>next</strong>(self):
        self.i += 1
        return self.i
    def <strong>iter</strong>(self):
        return self</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>counter = Counter()
next(counter), next(counter), next(counter)
(1, 2, 3)</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h4 id="python-has-many-different-iterator-objects">Python has many different iterator objects:</h4>

<ul>
  <li><strong>Iterators returned by the <a href="#iterator">iter()</a> function, such as list_iterator and set_iterator.</strong></li>
  <li><strong>Objects returned by the <a href="#itertools">itertools</a> module, such as count, repeat and cycle.</strong></li>
  <li><strong>Generators returned by the <a href="#generator">generator functions</a> and <a href="#comprehensions">generator expressions</a>.</strong></li>
  <li><strong>File objects returned by the <a href="#open">open()</a> function, etc.</strong></li>
</ul>

<h3 id="callable">Callable</h3>

<ul>
  <li><strong>All functions and classes have a call() method, hence are callable.</strong></li>
  <li>
    <p><strong>When this cheatsheet uses <code class="language-plaintext highlighter-rouge">'&lt;function&gt;'</code> as an argument, it actually means <code class="language-plaintext highlighter-rouge">'&lt;callable&gt;'</code>.</strong></p>

    <p>class Counter:
    def <strong>init</strong>(self):
        self.i = 0
    def <strong>call</strong>(self):
        self.i += 1
        return self.i</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>counter = Counter()
counter(), counter(), counter()
(1, 2, 3)</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h3 id="context-manager">Context Manager</h3>

<ul>
  <li><strong>Enter() should lock the resources and optionally return an object.</strong></li>
  <li><strong>Exit() should release the resources.</strong></li>
  <li><strong>Any exception that happens inside the with block is passed to the exit() method.</strong></li>
  <li>
    <p><strong>If it wishes to suppress the exception it must return a true value.</strong></p>

    <p>class MyOpen:
    def <strong>init</strong>(self, filename):
        self.filename = filename
    def <strong>enter</strong>(self):
        self.file = open(self.filename)
        return self.file
    def <strong>exit</strong>(self, exc_type, exception, traceback):
        self.file.close()</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>with open(‘test.txt’, ‘w’) as file:
…     file.write(‘Hello World!’)
with MyOpen(‘test.txt’) as file:
…     print(file.read())
Hello World!</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h2 id="iterable-duck-types"><a href="#iterableducktypes">#</a>Iterable Duck Types</h2>

<h3 id="iterable">Iterable</h3>

<ul>
  <li><strong>Only required method is iter(). It should return an iterator of object’s items.</strong></li>
  <li>
    <p><strong>Contains() automatically works on any object that has iter() defined.</strong></p>

    <p>class MyIterable:
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>iter</strong>(self):
        return iter(self.a)
    def <strong>contains</strong>(self, el):
        return el in self.a</p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>obj = MyIterable([1, 2, 3])
[el for el in obj]
[1, 2, 3]
1 in obj
True</p>
        </blockquote>
      </blockquote>
    </blockquote>
  </li>
</ul>

<h3 id="collection">Collection</h3>

<ul>
  <li><strong>Only required methods are iter() and len().</strong></li>
  <li><strong>This cheatsheet actually means <code class="language-plaintext highlighter-rouge">'&lt;iterable&gt;'</code> when it uses <code class="language-plaintext highlighter-rouge">'&lt;collection&gt;'</code>.</strong></li>
  <li>
    <p><strong>I chose not to use the name ‘iterable’ because it sounds scarier and more vague than ‘collection’.</strong></p>

    <p>class MyCollection:
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>iter</strong>(self):
        return iter(self.a)
    def <strong>contains</strong>(self, el):
        return el in self.a
    def <strong>len</strong>(self):
        return len(self.a)</p>
  </li>
</ul>

<h3 id="sequence">Sequence</h3>

<ul>
  <li><strong>Only required methods are len() and getitem().</strong></li>
  <li><strong>Getitem() should return an item at index or raise IndexError.</strong></li>
  <li><strong>Iter() and contains() automatically work on any object that has getitem() defined.</strong></li>
  <li>
    <p><strong>Reversed() automatically works on any object that has len() and getitem() defined.</strong></p>

    <p>class MySequence:
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>iter</strong>(self):
        return iter(self.a)
    def <strong>contains</strong>(self, el):
        return el in self.a
    def <strong>len</strong>(self):
        return len(self.a)
    def <strong>getitem</strong>(self, i):
        return self.a[i]
    def <strong>reversed</strong>(self):
        return reversed(self.a)</p>
  </li>
</ul>

<h3 id="abc-sequence">ABC Sequence</h3>

<ul>
  <li><strong>It’s a richer interface than the basic sequence.</strong></li>
  <li><strong>Extending it generates iter(), contains(), reversed(), index() and count().</strong></li>
  <li>
    <p><strong>Unlike <code class="language-plaintext highlighter-rouge">'abc.Iterable'</code> and <code class="language-plaintext highlighter-rouge">'abc.Collection'</code>, it is not a duck type. That is why <code class="language-plaintext highlighter-rouge">'issubclass(MySequence, abc.Sequence)'</code> would return False even if MySequence had all the methods defined.</strong></p>

    <p>from collections import abc</p>

    <p>class MyAbcSequence(abc.Sequence):
    def <strong>init</strong>(self, a):
        self.a = a
    def <strong>len</strong>(self):
        return len(self.a)
    def <strong>getitem</strong>(self, i):
        return self.a[i]</p>
  </li>
</ul>

<h4 id="table-of-required-and-automatically-available-special-methods">Table of required and automatically available special methods:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓
┃            │  Iterable  │ Collection │  Sequence  │ abc.Sequence ┃
┠────────────┼────────────┼────────────┼────────────┼──────────────┨
┃ iter()     │     !      │     !      │     ✓      │      ✓       ┃
┃ contains() │     ✓      │     ✓      │     ✓      │      ✓       ┃
┃ len()      │            │     !      │     !      │      !       ┃
┃ getitem()  │            │            │     !      │      !       ┃
┃ reversed() │            │            │     ✓      │      ✓       ┃
┃ index()    │            │            │            │      ✓       ┃
┃ count()    │            │            │            │      ✓       ┃
┗━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛
</code></pre></div></div>

<ul>
  <li><strong>Other ABCs that generate missing methods are: MutableSequence, Set, MutableSet, Mapping and MutableMapping.</strong></li>
  <li><strong>Names of their required methods are stored in <code class="language-plaintext highlighter-rouge">'&lt;abc&gt;.__abstractmethods__'</code>.</strong></li>
</ul>

<h2 id="enum"><a href="#enum">#</a>Enum</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from enum import Enum, auto

class &lt;enum_name&gt;(Enum):
    &lt;member_name_1&gt; = &lt;value_1&gt;
    &lt;member_name_2&gt; = &lt;value_2_a&gt;, &lt;value_2_b&gt;
    &lt;member_name_3&gt; = auto()
</code></pre></div></div>

<ul>
  <li><strong>If there are no numeric values before auto(), it returns 1.</strong></li>
  <li>
    <p><strong>Otherwise it returns an increment of the last numeric value.</strong></p>

    <member> = <enum>.<member_name>                 # Returns a member.
<member> = <enum>['<member_name>']              # Returns a member or raises KeyError.
<member> = <enum>(<value>)                      # Returns a member or raises ValueError.
<str>    = <member>.name                        # Returns member's name.
<obj>    = <member>.value                       # Returns member's value.
    

list_of_members = list(<enum>)
member_names    = [a.name for a in <enum>]
member_values   = [a.value for a in <enum>]
random_member   = random.choice(list(<enum>))
    

def get_next_member(member):
    members = list(member.__class__)
    index   = (members.index(member) + 1) % len(members)
    return members[index]
    

</enum></enum></enum></enum></member></obj></member></str></value></enum></member></member_name></enum></member></member_name></enum></member>
  </li>
</ul>
<h3 id="inline-2">Inline</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Cutlery = Enum('Cutlery', 'fork knife spoon')
Cutlery = Enum('Cutlery', ['fork', 'knife', 'spoon'])
Cutlery = Enum('Cutlery', {'fork': 1, 'knife': 2, 'spoon': 3})
</code></pre></div></div>

<h4 id="user-defined-functions-cannot-be-values-so-they-must-be-wrapped">User-defined functions cannot be values, so they must be wrapped:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from functools import partial
LogicOp = Enum('LogicOp', {'AND': partial(lambda l, r: l and r),
                           'OR' : partial(lambda l, r: l or r)})
</code></pre></div></div>

<ul>
  <li><strong>Another solution in this particular case is to use built-in functions and_() and or_() from the module <a href="#operator">operator</a>.</strong></li>
</ul>

<h2 id="exceptions"><a href="#exceptions">#</a>Exceptions</h2>

<h3 id="basic-example">Basic Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>try:
    &lt;code&gt;
except &lt;exception&gt;:
    &lt;code&gt;
</code></pre></div></div>

<h3 id="complex-example">Complex Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>try:
    &lt;code_1&gt;
except &lt;exception_a&gt;:
    &lt;code_2_a&gt;
except &lt;exception_b&gt;:
    &lt;code_2_b&gt;
else:
    &lt;code_2_c&gt;
finally:
    &lt;code_3&gt;
</code></pre></div></div>

<ul>
  <li><strong>Code inside the <code class="language-plaintext highlighter-rouge">'else'</code> block will only be executed if <code class="language-plaintext highlighter-rouge">'try'</code> block had no exception.</strong></li>
  <li><strong>Code inside the <code class="language-plaintext highlighter-rouge">'finally'</code> block will always be executed.</strong></li>
</ul>

<h3 id="catching-exceptions">Catching Exceptions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>except &lt;exception&gt;:
except &lt;exception&gt; as &lt;name&gt;:
except (&lt;exception&gt;, [...]):
except (&lt;exception&gt;, [...]) as &lt;name&gt;:
</code></pre></div></div>

<ul>
  <li><strong>Also catches subclasses of the exception.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'traceback.print_exc()'</code> to print the error message to stderr.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'print(&lt;name&gt;)'</code> to print just the cause of the exception (its arguments).</strong></li>
</ul>

<h3 id="raising-exceptions">Raising Exceptions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>raise &lt;exception&gt;
raise &lt;exception&gt;()
raise &lt;exception&gt;(&lt;el&gt; [, ...])
</code></pre></div></div>

<h4 id="re-raising-caught-exception">Re-raising caught exception:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>except &lt;exception&gt; as &lt;name&gt;:
    ...
    raise
</code></pre></div></div>

<h3 id="exception-object">Exception Object</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>arguments = &lt;name&gt;.args
exc_type  = &lt;name&gt;.__class__
filename  = &lt;name&gt;.__traceback__.tb_frame.f_code.co_filename
func_name = &lt;name&gt;.__traceback__.tb_frame.f_code.co_name
line      = linecache.getline(filename, &lt;name&gt;.__traceback__.tb_lineno)
error_msg = ''.join(traceback.format_exception(exc_type, &lt;name&gt;, &lt;name&gt;.__traceback__))
</code></pre></div></div>

<h3 id="built-in-exceptions">Built-in Exceptions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>BaseException
 ├── SystemExit                   # Raised by the sys.exit() function.
 ├── KeyboardInterrupt            # Raised when the user hits the interrupt key (ctrl-c).
 └── Exception                    # User-defined exceptions should be derived from this class.
      ├── ArithmeticError         # Base class for arithmetic errors.
      │    └── ZeroDivisionError  # Raised when dividing by zero.
      ├── AttributeError          # Raised when an attribute is missing.
      ├── EOFError                # Raised by input() when it hits end-of-file condition.
      ├── LookupError             # Raised when a look-up on a collection fails.
      │    ├── IndexError         # Raised when a sequence index is out of range.
      │    └── KeyError           # Raised when a dictionary key or set element is not found.
      ├── NameError               # Raised when a variable name is not found.
      ├── OSError                 # Errors such as “file not found” or “disk full” (see Open).
      │    └── FileNotFoundError  # When a file or directory is requested but doesn't exist.
      ├── RuntimeError            # Raised by errors that don't fall in other categories.
      │    └── RecursionError     # Raised when the maximum recursion depth is exceeded.
      ├── StopIteration           # Raised by next() when run on an empty iterator.
      ├── TypeError               # Raised when an argument is of wrong type.
      └── ValueError              # When an argument is of right type but inappropriate value.
           └── UnicodeError       # Raised when encoding/decoding strings to/from bytes fails.
</code></pre></div></div>

<h4 id="collections-and-their-exceptions">Collections and their exceptions:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┓
┃           │    list    │    dict    │    set     ┃
┠───────────┼────────────┼────────────┼────────────┨
┃ getitem() │ IndexError │  KeyError  │            ┃
┃ pop()     │ IndexError │  KeyError  │  KeyError  ┃
┃ remove()  │ ValueError │            │  KeyError  ┃
┃ index()   │ ValueError │            │            ┃
┗━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┛
</code></pre></div></div>

<h4 id="useful-built-in-exceptions">Useful built-in exceptions:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>raise TypeError('Argument is of wrong type!')
raise ValueError('Argument is of right type but inappropriate value!')
raise RuntimeError('None of above!')
</code></pre></div></div>

<h3 id="user-defined-exceptions">User-defined Exceptions</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class MyError(Exception):
    pass

class MyInputError(MyError):
    pass
</code></pre></div></div>

<h2 id="exit"><a href="#exit">#</a>Exit</h2>

<p><strong>Exits the interpreter by raising SystemExit exception.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
sys.exit()                        # Exits with exit code 0 (success).
sys.exit(&lt;el&gt;)                    # Prints to stderr and exits with 1.
sys.exit(&lt;int&gt;)                   # Exits with passed exit code.
</code></pre></div></div>

<h2 id="print"><a href="#print">#</a>Print</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>print(&lt;el_1&gt;, ..., sep=' ', end='\n', file=sys.stdout, flush=False)
</code></pre></div></div>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'file=sys.stderr'</code> for messages about errors.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'flush=True'</code> to forcibly flush the stream.</strong></li>
</ul>

<h3 id="pretty-print">Pretty Print</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from pprint import pprint
pprint(&lt;collection&gt;, width=80, depth=None, compact=False, sort_dicts=True)
</code></pre></div></div>

<ul>
  <li><strong>Levels deeper than ‘depth’ get replaced by ‘…’.</strong></li>
</ul>

<h2 id="input"><a href="#input">#</a>Input</h2>

<p><strong>Reads a line from user input or pipe if present.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;str&gt; = input(prompt=None)
</code></pre></div></div>

<ul>
  <li><strong>Trailing newline gets stripped.</strong></li>
  <li><strong>Prompt string is printed to the standard output before reading input.</strong></li>
  <li><strong>Raises EOFError when user hits EOF (ctrl-d/z) or input stream gets exhausted.</strong></li>
</ul>

<h2 id="command-line-arguments"><a href="#commandlinearguments">#</a>Command Line Arguments</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sys
script_name = sys.argv[0]
arguments   = sys.argv[1:]
</code></pre></div></div>

<h3 id="argument-parser">Argument Parser</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from argparse import ArgumentParser, FileType
p = ArgumentParser(description=&lt;str&gt;)
p.add_argument('-&lt;short_name&gt;', '--&lt;name&gt;', action='store_true')  # Flag
p.add_argument('-&lt;short_name&gt;', '--&lt;name&gt;', type=&lt;type&gt;)          # Option
p.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs=1)                    # First argument
p.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs='+')                  # Remaining arguments
p.add_argument('&lt;name&gt;', type=&lt;type&gt;, nargs='*')                  # Optional arguments
args  = p.parse_args()                                            # Exits on error.
value = args.&lt;name&gt;
</code></pre></div></div>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'help=&lt;str&gt;'</code> to set argument description.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'default=&lt;el&gt;'</code> to set the default value.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'type=FileType(&lt;mode&gt;)'</code> for files.</strong></li>
</ul>

<h2 id="open"><a href="#open">#</a>Open</h2>

<p><strong>Opens the file and returns a corresponding file object.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;file&gt; = open(&lt;path&gt;, mode='r', encoding=None, newline=None)
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'encoding=None'</code> means that the default encoding is used, which is platform dependent. Best practice is to use <code class="language-plaintext highlighter-rouge">'encoding="utf-8"'</code> whenever possible.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'newline=None'</code> means all different end of line combinations are converted to ‘\n’ on read, while on write all ‘\n’ characters are converted to system’s default line separator.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'newline=""'</code> means no conversions take place, but input is still broken into chunks by readline() and readlines() on either ‘\n’, ‘\r’ or ‘\r\n’.</strong></li>
</ul>

<h3 id="modes">Modes</h3>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'r'</code> - Read (default).</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'w'</code> - Write (truncate).</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'x'</code> - Write or fail if the file already exists.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'a'</code> - Append.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'w+'</code> - Read and write (truncate).</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'r+'</code> - Read and write from the start.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'a+'</code> - Read and write from the end.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'t'</code> - Text mode (default).</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'b'</code> - Binary mode.</strong></li>
</ul>

<h3 id="exceptions-1">Exceptions</h3>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'FileNotFoundError'</code> can be raised when reading with <code class="language-plaintext highlighter-rouge">'r'</code> or <code class="language-plaintext highlighter-rouge">'r+'</code>.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'FileExistsError'</code> can be raised when writing with <code class="language-plaintext highlighter-rouge">'x'</code>.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'IsADirectoryError'</code> and <code class="language-plaintext highlighter-rouge">'PermissionError'</code> can be raised by any.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'OSError'</code> is the parent class of all listed exceptions.</strong></li>
</ul>

<h3 id="file-object">File Object</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;file&gt;.seek(0)                      # Moves to the start of the file.
&lt;file&gt;.seek(offset)                 # Moves 'offset' chars/bytes from the start.
&lt;file&gt;.seek(0, 2)                   # Moves to the end of the file.
&lt;bin_file&gt;.seek(±offset, &lt;anchor&gt;)  # Anchor: 0 start, 1 current position, 2 end.


&lt;str/bytes&gt; = &lt;file&gt;.read(size=-1)  # Reads 'size' chars/bytes or until EOF.
&lt;str/bytes&gt; = &lt;file&gt;.readline()     # Returns a line or empty string/bytes on EOF.
&lt;list&gt;      = &lt;file&gt;.readlines()    # Returns a list of remaining lines.
&lt;str/bytes&gt; = next(&lt;file&gt;)          # Returns a line using buffer. Do not mix.


&lt;file&gt;.write(&lt;str/bytes&gt;)           # Writes a string or bytes object.
&lt;file&gt;.writelines(&lt;collection&gt;)     # Writes a coll. of strings or bytes objects.
&lt;file&gt;.flush()                      # Flushes write buffer.
</code></pre></div></div>

<ul>
  <li><strong>Methods do not add or strip trailing newlines, even writelines().</strong></li>
</ul>

<h3 id="read-text-from-file">Read Text from File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_file(filename):
    with open(filename, encoding='utf-8') as file:
        return file.readlines()
</code></pre></div></div>

<h3 id="write-text-to-file">Write Text to File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_to_file(filename, text):
    with open(filename, 'w', encoding='utf-8') as file:
        file.write(text)
</code></pre></div></div>

<h2 id="path"><a href="#path">#</a>Path</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from os import getcwd, path, listdir
from glob import glob


&lt;str&gt;  = getcwd()                   # Returns the current working directory.
&lt;str&gt;  = path.join(&lt;path&gt;, ...)     # Joins two or more pathname components.
&lt;str&gt;  = path.abspath(&lt;path&gt;)       # Returns absolute path.


&lt;str&gt;  = path.basename(&lt;path&gt;)      # Returns final component of the path.
&lt;str&gt;  = path.dirname(&lt;path&gt;)       # Returns path without the final component.
&lt;tup.&gt; = path.splitext(&lt;path&gt;)      # Splits on last period of the final component.


&lt;list&gt; = listdir(path='.')          # Returns filenames located at path.
&lt;list&gt; = glob('&lt;pattern&gt;')          # Returns paths matching the wildcard pattern.


&lt;bool&gt; = path.exists(&lt;path&gt;)        # Or: &lt;Path&gt;.exists()
&lt;bool&gt; = path.isfile(&lt;path&gt;)        # Or: &lt;DirEntry/Path&gt;.is_file()
&lt;bool&gt; = path.isdir(&lt;path&gt;)         # Or: &lt;DirEntry/Path&gt;.is_dir()
</code></pre></div></div>

<h3 id="direntry">DirEntry</h3>

<p><strong>Using scandir() instead of listdir() can significantly increase the performance of code that also needs file type information.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from os import scandir


&lt;iter&gt; = scandir(path='.')          # Returns DirEntry objects located at path.
&lt;str&gt;  = &lt;DirEntry&gt;.path            # Returns whole path as a string.
&lt;str&gt;  = &lt;DirEntry&gt;.name            # Returns final component as a string.
&lt;file&gt; = open(&lt;DirEntry&gt;)           # Opens the file and returns file object.
</code></pre></div></div>

<h3 id="path-object">Path Object</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from pathlib import Path


&lt;Path&gt; = Path(&lt;path&gt; [, ...])       # Accepts strings, Paths and DirEntry objects.
&lt;Path&gt; = &lt;path&gt; / &lt;path&gt; [/ ...]    # One of the paths must be a Path object.


&lt;Path&gt; = Path()                     # Returns relative cwd. Also Path('.').
&lt;Path&gt; = Path.cwd()                 # Returns absolute cwd. Also Path().resolve().
&lt;Path&gt; = Path.home()                # Returns user's home directory.
&lt;Path&gt; = Path(__file__).resolve()   # Returns script's path if cwd wasn't changed.


&lt;Path&gt; = &lt;Path&gt;.parent              # Returns Path without final component.
&lt;str&gt;  = &lt;Path&gt;.name                # Returns final component as a string.
&lt;str&gt;  = &lt;Path&gt;.stem                # Returns final component without extension.
&lt;str&gt;  = &lt;Path&gt;.suffix              # Returns final component's extension.
&lt;tup.&gt; = &lt;Path&gt;.parts               # Returns all components as strings.


&lt;iter&gt; = &lt;Path&gt;.iterdir()           # Returns dir contents as Path objects.
&lt;iter&gt; = &lt;Path&gt;.glob('&lt;pattern&gt;')   # Returns Paths matching the wildcard pattern.


&lt;str&gt;  = str(&lt;Path&gt;)                # Returns path as a string.
&lt;file&gt; = open(&lt;Path&gt;)               # Opens the file and returns file object.
</code></pre></div></div>

<h2 id="os-commands"><a href="#oscommands">#</a>OS Commands</h2>

<h3 id="files-and-directories">Files and Directories</h3>

<ul>
  <li><strong>Paths can be either strings, Paths or DirEntry objects.</strong></li>
  <li>
    <p><strong>Functions report OS related errors by raising either OSError or one of its <a href="#exceptions-1">subclasses</a>.</strong></p>

    <p>import os, shutil</p>

    <p>os.chdir(<path>)                    # Changes the current working directory.
os.mkdir(<path>, mode=0o777)        # Creates a directory. Mode is in octal.</path></path></p>

    <p>shutil.copy(from, to)               # Copies the file. ‘to’ can exist or be a dir.
shutil.copytree(from, to)           # Copies the directory. ‘to’ must not exist.</p>

    <p>os.rename(from, to)                 # Renames/moves the file or directory.
os.replace(from, to)                # Same, but overwrites ‘to’ if it exists.</p>

    <p>os.remove(<path>)                   # Deletes the file.
os.rmdir(<path>)                    # Deletes the empty directory.
shutil.rmtree(<path>)               # Deletes the directory.</path></path></path></p>
  </li>
</ul>

<h3 id="shell-commands">Shell Commands</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import os
&lt;str&gt; = os.popen('&lt;shell_command&gt;').read()
</code></pre></div></div>

<h4 id="sends-1--1-to-the-basic-calculator-and-captures-its-output">Sends ‘1 + 1’ to the basic calculator and captures its output:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from subprocess import run
&gt;&gt;&gt; run('bc', input='1 + 1\n', capture_output=True, encoding='utf-8')
CompletedProcess(args='bc', returncode=0, stdout='2\n', stderr='')
</code></pre></div></div>

<h4 id="sends-testin-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-testout">Sends test.in to the basic calculator running in standard mode and saves its output to test.out:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from shlex import split
&gt;&gt;&gt; os.popen('echo 1 + 1 &gt; test.in')
&gt;&gt;&gt; run(split('bc -s'), stdin=open('test.in'), stdout=open('test.out', 'w'))
CompletedProcess(args=['bc', '-s'], returncode=0)
&gt;&gt;&gt; open('test.out').read()
'2\n'
</code></pre></div></div>

<h2 id="json"><a href="#json">#</a>JSON</h2>

<p><strong>Text file format for storing collections of strings and numbers.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import json
&lt;str&gt;    = json.dumps(&lt;object&gt;, ensure_ascii=True, indent=None)
&lt;object&gt; = json.loads(&lt;str&gt;)
</code></pre></div></div>

<h3 id="read-object-from-json-file">Read Object from JSON File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_json_file(filename):
    with open(filename, encoding='utf-8') as file:
        return json.load(file)
</code></pre></div></div>

<h3 id="write-object-to-json-file">Write Object to JSON File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_to_json_file(filename, an_object):
    with open(filename, 'w', encoding='utf-8') as file:
        json.dump(an_object, file, ensure_ascii=False, indent=2)
</code></pre></div></div>

<h2 id="pickle"><a href="#pickle">#</a>Pickle</h2>

<p><strong>Binary file format for storing objects.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import pickle
&lt;bytes&gt;  = pickle.dumps(&lt;object&gt;)
&lt;object&gt; = pickle.loads(&lt;bytes&gt;)
</code></pre></div></div>

<h3 id="read-object-from-file">Read Object from File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_pickle_file(filename):
    with open(filename, 'rb') as file:
        return pickle.load(file)
</code></pre></div></div>

<h3 id="write-object-to-file">Write Object to File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_to_pickle_file(filename, an_object):
    with open(filename, 'wb') as file:
        pickle.dump(an_object, file)
</code></pre></div></div>

<h2 id="csv"><a href="#csv">#</a>CSV</h2>

<p><strong>Text file format for storing spreadsheets.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import csv
</code></pre></div></div>

<h3 id="read">Read</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;reader&gt; = csv.reader(&lt;file&gt;)       # Also: `dialect='excel', delimiter=','`.
&lt;list&gt;   = next(&lt;reader&gt;)           # Returns next row as a list of strings.
&lt;list&gt;   = list(&lt;reader&gt;)           # Returns list of remaining rows.
</code></pre></div></div>

<ul>
  <li><strong>File must be opened with <code class="language-plaintext highlighter-rouge">'newline=""'</code> argument, or newlines embedded inside quoted fields will not be interpreted correctly!</strong></li>
</ul>

<h3 id="write">Write</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;writer&gt; = csv.writer(&lt;file&gt;)       # Also: `dialect='excel', delimiter=','`.
&lt;writer&gt;.writerow(&lt;collection&gt;)     # Encodes objects using `str(&lt;el&gt;)`.
&lt;writer&gt;.writerows(&lt;coll_of_coll&gt;)  # Appends multiple rows.
</code></pre></div></div>

<ul>
  <li><strong>File must be opened with <code class="language-plaintext highlighter-rouge">'newline=""'</code> argument, or ‘\r’ will be added in front of every ‘\n’ on platforms that use ‘\r\n’ line endings!</strong></li>
</ul>

<h3 id="parameters">Parameters</h3>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'dialect'</code> - Master parameter that sets the default values.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'delimiter'</code> - A one-character string used to separate fields.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'quotechar'</code> - Character for quoting fields that contain special characters.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'doublequote'</code> - Whether quotechars inside fields get doubled or escaped.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'skipinitialspace'</code> - Whether whitespace after delimiter gets stripped.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'lineterminator'</code> - Specifies how writer terminates rows.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'quoting'</code> - Controls the amount of quoting: 0 - as necessary, 1 - all.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'escapechar'</code> - Character for escaping ‘quotechar’ if ‘doublequote’ is False.</strong></li>
</ul>

<h3 id="dialects">Dialects</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━┓
┃                  │     excel    │   excel-tab  │     unix     ┃
┠──────────────────┼──────────────┼──────────────┼──────────────┨
┃ delimiter        │       ','    │      '\t'    │       ','    ┃
┃ quotechar        │       '"'    │       '"'    │       '"'    ┃
┃ doublequote      │      True    │      True    │      True    ┃
┃ skipinitialspace │     False    │     False    │     False    ┃
┃ lineterminator   │    '\r\n'    │    '\r\n'    │      '\n'    ┃
┃ quoting          │         0    │         0    │         1    ┃
┃ escapechar       │      None    │      None    │      None    ┃
┗━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━┛
</code></pre></div></div>

<h3 id="read-rows-from-csv-file">Read Rows from CSV File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_csv_file(filename):
    with open(filename, encoding='utf-8', newline='') as file:
        return list(csv.reader(file))
</code></pre></div></div>

<h3 id="write-rows-to-csv-file">Write Rows to CSV File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_to_csv_file(filename, rows):
    with open(filename, 'w', encoding='utf-8', newline='') as file:
        writer = csv.writer(file)
        writer.writerows(rows)
</code></pre></div></div>

<h2 id="sqlite"><a href="#sqlite">#</a>SQLite</h2>

<p><strong>Server-less database engine that stores each database into a separate file.</strong></p>

<h3 id="connect">Connect</h3>

<p><strong>Opens a connection to the database file. Creates a new file if path doesn’t exist.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import sqlite3
&lt;conn&gt; = sqlite3.connect(&lt;path&gt;)                # Also ':memory:'.
&lt;conn&gt;.close()                                  # Closes the connection.
</code></pre></div></div>

<h3 id="read-1">Read</h3>

<p><strong>Returned values can be of type str, int, float, bytes or None.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;cursor&gt; = &lt;conn&gt;.execute('&lt;query&gt;')            # Can raise a subclass of sqlite3.Error.
&lt;tuple&gt;  = &lt;cursor&gt;.fetchone()                  # Returns next row. Also next(&lt;cursor&gt;).
&lt;list&gt;   = &lt;cursor&gt;.fetchall()                  # Returns remaining rows. Also list(&lt;cursor&gt;).
</code></pre></div></div>

<h3 id="write-1">Write</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;conn&gt;.execute('&lt;query&gt;')                       # Can raise a subclass of sqlite3.Error.
&lt;conn&gt;.commit()                                 # Commits all transactions since last commit.
</code></pre></div></div>

<h4 id="or">Or:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>with &lt;conn&gt;:
    &lt;conn&gt;.execute('&lt;query&gt;')
</code></pre></div></div>

<h3 id="placeholders">Placeholders</h3>

<ul>
  <li><strong>Passed values can be of type str, int, float, bytes, None, bool, datetime.date or datetime.datetme.</strong></li>
  <li>
    <p><strong>Bools will be stored and returned as ints and dates as <a href="#encode">ISO formatted strings</a>.</strong></p>

    <conn>.execute('<query>', &lt;list/tuple&gt;)         # Replaces '?'s in query with values.
<conn>.execute('<query>', &lt;dict/namedtuple&gt;)    # Replaces ':<key>'s with values.
<conn>.executemany('<query>', <coll_of_above>)  # Runs execute() multiple times.
    

</coll_of_above></query></conn></key></query></conn></query></conn>
  </li>
</ul>
<h3 id="example">Example</h3>

<p><strong>In this example values are not actually saved because <code class="language-plaintext highlighter-rouge">'conn.commit()'</code> is omitted!</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; conn = sqlite3.connect('test.db')
&gt;&gt;&gt; conn.execute('create table person (person_id integer primary key, name, height)')
&gt;&gt;&gt; conn.execute('insert into person values (null, ?, ?)', ('Jean-Luc', 187)).lastrowid
1
&gt;&gt;&gt; conn.execute('select * from person').fetchall()
[(1, 'Jean-Luc', 187)]
</code></pre></div></div>

<h3 id="mysql">MySQL</h3>

<p><strong>Has a very similar interface, with differences listed below.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install mysql-connector
from mysql import connector
&lt;conn&gt;   = connector.connect(host=&lt;str&gt;, …)     # `user=&lt;str&gt;, password=&lt;str&gt;, database=&lt;str&gt;`.
&lt;cursor&gt; = &lt;conn&gt;.cursor()                      # Only cursor has execute method.
&lt;cursor&gt;.execute('&lt;query&gt;')                     # Can raise a subclass of connector.Error.
&lt;cursor&gt;.execute('&lt;query&gt;', &lt;list/tuple&gt;)       # Replaces '%s's in query with values.
&lt;cursor&gt;.execute('&lt;query&gt;', &lt;dict/namedtuple&gt;)  # Replaces '%(&lt;key&gt;)s's with values.
</code></pre></div></div>

<h2 id="bytes"><a href="#bytes">#</a>Bytes</h2>

<p><strong>Bytes object is an immutable sequence of single bytes. Mutable version is called bytearray.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;bytes&gt; = b'&lt;str&gt;'                       # Only accepts ASCII characters and \x00 - \xff.
&lt;int&gt;   = &lt;bytes&gt;[&lt;index&gt;]               # Returns int in range from 0 to 255.
&lt;bytes&gt; = &lt;bytes&gt;[&lt;slice&gt;]               # Returns bytes even if it has only one element.
&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_bytes&gt;)  # Joins elements using bytes object as separator.
</code></pre></div></div>

<h3 id="encode-1">Encode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;bytes&gt; = bytes(&lt;coll_of_ints&gt;)          # Ints must be in range from 0 to 255.
&lt;bytes&gt; = bytes(&lt;str&gt;, 'utf-8')          # Or: &lt;str&gt;.encode('utf-8')
&lt;bytes&gt; = &lt;int&gt;.to_bytes(n_bytes, …)     # `byteorder='big/little', signed=False`.
&lt;bytes&gt; = bytes.fromhex('&lt;hex&gt;')         # Hex pairs can be separated by spaces.
</code></pre></div></div>

<h3 id="decode-1">Decode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt;  = list(&lt;bytes&gt;)                  # Returns ints in range from 0 to 255.
&lt;str&gt;   = str(&lt;bytes&gt;, 'utf-8')          # Or: &lt;bytes&gt;.decode('utf-8')
&lt;int&gt;   = int.from_bytes(&lt;bytes&gt;, …)     # `byteorder='big/little', signed=False`.
'&lt;hex&gt;' = &lt;bytes&gt;.hex()                  # Returns a string of hexadecimal pairs.
</code></pre></div></div>

<h3 id="read-bytes-from-file">Read Bytes from File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_bytes(filename):
    with open(filename, 'rb') as file:
        return file.read()
</code></pre></div></div>

<h3 id="write-bytes-to-file">Write Bytes to File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_bytes(filename, bytes_obj):
    with open(filename, 'wb') as file:
        file.write(bytes_obj)
</code></pre></div></div>

<h2 id="struct"><a href="#struct">#</a>Struct</h2>

<ul>
  <li><strong>Module that performs conversions between a sequence of numbers and a bytes object.</strong></li>
  <li>
    <p><strong>Machine’s native type sizes and byte order are used by default.</strong></p>

    <p>from struct import pack, unpack, iter_unpack</p>
    <bytes>  = pack('<format>', <num_1> [, <num_2>, ...])
<tuple>  = unpack('<format>', <bytes>)
<tuples> = iter_unpack('<format>', <bytes>)
    

</bytes></format></tuples></bytes></format></tuple></num_2></num_1></format></bytes>
  </li>
</ul>
<h3 id="example-1">Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; pack('&gt;hhl', 1, 2, 3)
b'\x00\x01\x00\x02\x00\x00\x00\x03'
&gt;&gt;&gt; unpack('&gt;hhl', b'\x00\x01\x00\x02\x00\x00\x00\x03')
(1, 2, 3)
</code></pre></div></div>

<h3 id="format-2">Format</h3>

<h4 id="for-standard-type-sizes-start-format-string-with">For standard type sizes start format string with:</h4>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'='</code> - native byte order (usually little-endian)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;'</code> - little-endian</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&gt;'</code> - big-endian (also <code class="language-plaintext highlighter-rouge">'!'</code>)</strong></li>
</ul>

<h4 id="integer-types-use-a-capital-letter-for-unsigned-type-minimum-and-standard-sizes-are-in-brackets">Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:</h4>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'x'</code> - pad byte</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'b'</code> - char (1/1)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'h'</code> - short (2/2)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'i'</code> - int (2/4)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'l'</code> - long (4/4)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'q'</code> - long long (8/8)</strong></li>
</ul>

<h4 id="floating-point-types">Floating point types:</h4>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'f'</code> - float (4/4)</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'d'</code> - double (8/8)</strong></li>
</ul>

<h2 id="array"><a href="#array">#</a>Array</h2>

<p><strong>List that can only hold numbers of a predefined type. Available types and their minimum sizes in bytes are listed above. Sizes and byte order are always determined by the system.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from array import array
&lt;array&gt; = array('&lt;typecode&gt;', &lt;collection&gt;)    # Array from collection of numbers.
&lt;array&gt; = array('&lt;typecode&gt;', &lt;bytes&gt;)         # Array from bytes object.
&lt;array&gt; = array('&lt;typecode&gt;', &lt;array&gt;)         # Treats array as a sequence of numbers.
&lt;bytes&gt; = bytes(&lt;array&gt;)                       # Or: &lt;array&gt;.tobytes()
</code></pre></div></div>

<h2 id="memory-view"><a href="#memoryview">#</a>Memory View</h2>

<ul>
  <li><strong>A sequence object that points to the memory of another object.</strong></li>
  <li><strong>Each element can reference a single or multiple consecutive bytes, depending on format.</strong></li>
  <li>
    <p><strong>Order and number of elements can be changed with slicing.</strong></p>

    <mview> = memoryview(&lt;bytes/bytearray/array&gt;)  # Immutable if bytes, else mutable.
<real>  = <mview>[<index>]                     # Returns an int or a float.
<mview> = <mview>[<slice>]                     # Mview with rearranged elements.
<mview> = <mview>.cast('<typecode>')           # Casts memoryview to the new format.
<mview>.release()                              # Releases the object's memory buffer.
    

</mview></typecode></mview></mview></slice></mview></mview></index></mview></real></mview>
  </li>
</ul>
<h3 id="decode-2">Decode</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;bin_file&gt;.write(&lt;mview&gt;)                      # Writes mview to the binary file.
&lt;bytes&gt; = bytes(&lt;mview&gt;)                       # Creates a new bytes object.
&lt;bytes&gt; = &lt;bytes&gt;.join(&lt;coll_of_mviews&gt;)       # Joins mviews using bytes object as sep.
&lt;array&gt; = array('&lt;typecode&gt;', &lt;mview&gt;)         # Treats mview as a sequence of numbers.


&lt;list&gt;  = list(&lt;mview&gt;)                        # Returns list of ints or floats.
&lt;str&gt;   = str(&lt;mview&gt;, 'utf-8')                # Treats mview as a bytes object.
&lt;int&gt;   = int.from_bytes(&lt;mview&gt;, …)           # `byteorder='big/little', signed=False`.
'&lt;hex&gt;' = &lt;mview&gt;.hex()                        # Treats mview as a bytes object.
</code></pre></div></div>

<h2 id="deque"><a href="#deque">#</a>Deque</h2>

<p><strong>A thread-safe list with efficient appends and pops from either side. Pronounced “deck”.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from collections import deque
&lt;deque&gt; = deque(&lt;collection&gt;, maxlen=None)


&lt;deque&gt;.appendleft(&lt;el&gt;)                       # Opposite element is dropped if full.
&lt;deque&gt;.extendleft(&lt;collection&gt;)               # Collection gets reversed.
&lt;el&gt; = &lt;deque&gt;.popleft()                       # Raises IndexError if empty.
&lt;deque&gt;.rotate(n=1)                            # Rotates elements to the right.
</code></pre></div></div>

<h2 id="threading"><a href="#threading">#</a>Threading</h2>

<ul>
  <li><strong>CPython interpreter can only run a single thread at a time.</strong></li>
  <li>
    <p><strong>That is why using multiple threads won’t result in a faster execution, unless at least one of the threads contains an I/O operation.</strong></p>

    <p>from threading import Thread, RLock, Semaphore, Event, Barrier</p>
  </li>
</ul>

<h3 id="thread">Thread</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Thread&gt; = Thread(target=&lt;function&gt;)  # Use `args=&lt;collection&gt;` to set arguments.
&lt;Thread&gt;.start()                      # Starts the thread.
&lt;bool&gt; = &lt;Thread&gt;.is_alive()          # Checks if thread has finished executing.
&lt;Thread&gt;.join()                       # Waits for thread to finish.
</code></pre></div></div>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'kwargs=&lt;dict&gt;'</code> to pass keyword arguments to the function.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'daemon=True'</code>, or the program will not be able to exit while the thread is alive.</strong></li>
</ul>

<h3 id="lock">Lock</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;lock&gt; = RLock()                      # Lock that can only be released by the owner.
&lt;lock&gt;.acquire()                      # Waits for lock to be available.
&lt;lock&gt;.release()                      # Makes the lock available again.
</code></pre></div></div>

<h4 id="or-1">Or:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>lock = RLock()
with lock:
    ...
</code></pre></div></div>

<h3 id="semaphore-event-barrier">Semaphore, Event, Barrier</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Semaphore&gt; = Semaphore(value=1)      # Lock that can be acquired 'value' times.
&lt;Event&gt;     = Event()                 # Method wait() blocks until set() is called.
&lt;Barrier&gt;   = Barrier(n_times)        # Method wait() blocks until it's called 'n_times'.
</code></pre></div></div>

<h3 id="thread-pool-executor">Thread Pool Executor</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from concurrent.futures import ThreadPoolExecutor
with ThreadPoolExecutor(max_workers=None) as executor:         # Does not exit until done.
    &lt;iter&gt;   = executor.map(lambda x: x + 1, range(3))         # (1, 2, 3)
    &lt;iter&gt;   = executor.map(lambda x, y: x + y, 'abc', '123')  # ('a1', 'b2', 'c3')
    &lt;Future&gt; = executor.submit(&lt;function&gt; [, &lt;arg_1&gt;, ...])    # Also visible outside block.
</code></pre></div></div>

<h4 id="future">Future:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;bool&gt; = &lt;Future&gt;.done()              # Checks if thread has finished executing.
&lt;obj&gt;  = &lt;Future&gt;.result()            # Waits for thread to finish and returns result.
</code></pre></div></div>

<h3 id="queue">Queue</h3>

<p><strong>A thread-safe FIFO queue. For LIFO queue use LifoQueue.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from queue import Queue
&lt;Queue&gt; = Queue(maxsize=0)


&lt;Queue&gt;.put(&lt;el&gt;)                     # Blocks until queue stops being full.
&lt;Queue&gt;.put_nowait(&lt;el&gt;)              # Raises queue.Full exception if full.
&lt;el&gt; = &lt;Queue&gt;.get()                  # Blocks until queue stops being empty.
&lt;el&gt; = &lt;Queue&gt;.get_nowait()           # Raises queue.Empty exception if empty.
</code></pre></div></div>

<h2 id="operator"><a href="#operator">#</a>Operator</h2>

<p><strong>Module of functions that provide the functionality of operators.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from operator import add, sub, mul, truediv, floordiv, mod, pow, neg, abs
from operator import eq, ne, lt, le, gt, ge
from operator import and_, or_, xor, not_
from operator import itemgetter, attrgetter, methodcaller


import operator as op
elementwise_sum  = map(op.add, list_a, list_b)
sorted_by_second = sorted(&lt;collection&gt;, key=op.itemgetter(1))
sorted_by_both   = sorted(&lt;collection&gt;, key=op.itemgetter(1, 0))
product_of_elems = functools.reduce(op.mul, &lt;collection&gt;)
LogicOp          = enum.Enum('LogicOp', {'AND': op.and_, 'OR' : op.or_})
last_el          = op.methodcaller('pop')(&lt;list&gt;)
</code></pre></div></div>

<h2 id="introspection"><a href="#introspection">#</a>Introspection</h2>

<p><strong>Inspecting code at runtime.</strong></p>

<h3 id="variables">Variables</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt; = dir()                             # Names of local variables (incl. functions).
&lt;dict&gt; = vars()                            # Dict of local variables. Also locals().
&lt;dict&gt; = globals()                         # Dict of global variables.
</code></pre></div></div>

<h3 id="attributes-1">Attributes</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;list&gt; = dir(&lt;object&gt;)                     # Names of object's attributes (incl. methods).
&lt;dict&gt; = vars(&lt;object&gt;)                    # Dict of object's fields. Also &lt;obj&gt;.__dict__.
&lt;bool&gt; = hasattr(&lt;object&gt;, '&lt;attr_name&gt;')  # Checks if getattr() raises an error.
value  = getattr(&lt;object&gt;, '&lt;attr_name&gt;')  # Raises AttributeError if attribute is missing.
setattr(&lt;object&gt;, '&lt;attr_name&gt;', value)    # Only works on objects with __dict__ attribute.
delattr(&lt;object&gt;, '&lt;attr_name&gt;')           # Equivalent to `del &lt;object&gt;.&lt;attr_name&gt;`.
</code></pre></div></div>

<h3 id="parameters-1">Parameters</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from inspect import signature
&lt;sig&gt;        = signature(&lt;function&gt;)
no_of_params = len(&lt;sig&gt;.parameters)
param_names  = list(&lt;sig&gt;.parameters.keys())
param_kinds  = [a.kind for a in &lt;sig&gt;.parameters.values()]
</code></pre></div></div>

<h2 id="metaprograming"><a href="#metaprograming">#</a>Metaprograming</h2>

<p><strong>Code that generates code.</strong></p>

<h3 id="type-1">Type</h3>

<p><strong>Type is the root class. If only passed an object it returns its type (class). Otherwise it creates a new class.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;class&gt; = type('&lt;class_name&gt;', &lt;parents_tuple&gt;, &lt;attributes_dict&gt;)

&gt;&gt;&gt; Z = type('Z', (), {'a': 'abcde', 'b': 12345})
&gt;&gt;&gt; z = Z()
</code></pre></div></div>

<h3 id="meta-class">Meta Class</h3>

<p><strong>A class that creates classes.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def my_meta_class(name, parents, attrs):
    attrs['a'] = 'abcde'
    return type(name, parents, attrs)
</code></pre></div></div>

<h4 id="or-2">Or:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class MyMetaClass(type):
    def __new__(cls, name, parents, attrs):
        attrs['a'] = 'abcde'
        return type.__new__(cls, name, parents, attrs)
</code></pre></div></div>

<ul>
  <li><strong>New() is a class method that gets called before init(). If it returns an instance of its class, then that instance gets passed to init() as a ‘self’ argument.</strong></li>
  <li><strong>It receives the same arguments as init(), except for the first one that specifies the desired type of the returned instance (MyMetaClass in our case).</strong></li>
  <li><strong>Like in our case, new() can also be called directly, usually from a new() method of a child class (</strong><code class="language-plaintext highlighter-rouge">def __new__(cls): return super().__new__(cls)</code><strong>).</strong></li>
  <li><strong>The only difference between the examples above is that my_meta_class() returns a class of type type, while MyMetaClass() returns a class of type MyMetaClass.</strong></li>
</ul>

<h3 id="metaclass-attribute">Metaclass Attribute</h3>

<p><strong>Right before a class is created it checks if it has the ‘metaclass’ attribute defined. If not, it recursively checks if any of his parents has it defined and eventually comes to type().</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>class MyClass(metaclass=MyMetaClass):
    b = 12345


&gt;&gt;&gt; MyClass.a, MyClass.b
('abcde', 12345)
</code></pre></div></div>

<h3 id="type-diagram">Type Diagram</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>type(MyClass)     == MyMetaClass     # MyClass is an instance of MyMetaClass.
type(MyMetaClass) == type            # MyMetaClass is an instance of type.


┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┓
┃   Classes   │ Metaclasses ┃
┠─────────────┼─────────────┨
┃   MyClass ──→ MyMetaClass ┃
┃             │     ↓       ┃
┃    object ─────→ type ←╮  ┃
┃             │     ↑ ╰──╯  ┃
┃     str ──────────╯       ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┛
</code></pre></div></div>

<h3 id="inheritance-diagram">Inheritance Diagram</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>MyClass.__base__     == object       # MyClass is a subclass of object.
MyMetaClass.__base__ == type         # MyMetaClass is a subclass of type.


┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┓
┃   Classes   │ Metaclasses ┃
┠─────────────┼─────────────┨
┃   MyClass   │ MyMetaClass ┃
┃      ↓      │     ↓       ┃
┃    object ←───── type     ┃
┃      ↑      │             ┃
┃     str     │             ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┛
</code></pre></div></div>

<h2 id="eval"><a href="#eval">#</a>Eval</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from ast import literal_eval
&gt;&gt;&gt; literal_eval('1 + 2')
3
&gt;&gt;&gt; literal_eval('[1, 2, 3]')
[1, 2, 3]
&gt;&gt;&gt; literal_eval('abs(1)')
ValueError: malformed node or string
</code></pre></div></div>

<h2 id="coroutines"><a href="#coroutines">#</a>Coroutines</h2>

<ul>
  <li><strong>Coroutines have a lot in common with threads, but unlike threads, they only give up control when they call another coroutine and they don’t use as much memory.</strong></li>
  <li><strong>Coroutine definition starts with <code class="language-plaintext highlighter-rouge">'async'</code> and its call with <code class="language-plaintext highlighter-rouge">'await'</code>.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'asyncio.run(&lt;coroutine&gt;)'</code> is the main entry point for asynchronous programs.</strong></li>
  <li><strong>Functions wait(), gather() and as_completed() can be used when multiple coroutines need to be started at the same time.</strong></li>
  <li><strong>Asyncio module also provides its own <a href="#queue">Queue</a>, <a href="#semaphoreeventbarrier">Event</a>, <a href="#lock">Lock</a> and <a href="#semaphore-event-barrier">Semaphore</a> classes.</strong></li>
</ul>

<h4 id="runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers">Runs a terminal game where you control an asterisk that must avoid numbers:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import asyncio, collections, curses, enum, random

P = collections.namedtuple('P', 'x y')         # Position
D = enum.Enum('D', 'n e s w')                  # Direction

def main(screen):
    curses.curs_set(0)                         # Makes cursor invisible.
    screen.nodelay(True)                       # Makes getch() non-blocking.
    asyncio.run(main_coroutine(screen))        # Starts running asyncio code.

async def main_coroutine(screen):
    state = {'*': P(0, 0), **{id_: P(30, 10) for id_ in range(10)}}
    moves = asyncio.Queue()
    coros = (*(random_controller(id_, moves) for id_ in range(10)),
             human_controller(screen, moves),
             model(moves, state, *screen.getmaxyx()),
             view(state, screen))
    await asyncio.wait(coros, return_when=asyncio.FIRST_COMPLETED)

async def random_controller(id_, moves):
    while True:
        moves.put_nowait((id_, random.choice(list(D))))
        await asyncio.sleep(random.random() / 2)

async def human_controller(screen, moves):
    while True:
        ch = screen.getch()
        key_mappings = {259: D.n, 261: D.e, 258: D.s, 260: D.w}
        if ch in key_mappings:
            moves.put_nowait(('*', key_mappings[ch]))
        await asyncio.sleep(0.01)  

async def model(moves, state, height, width):
    while state['*'] not in {p for id_, p in state.items() if id_ != '*'}:
        id_, d = await moves.get()
        p      = state[id_]
        deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}
        new_p  = P(p.x + deltas[d].x, p.y + deltas[d].y)
        if 0 &lt;= new_p.x &lt; width-1 and 0 &lt;= new_p.y &lt; height:
            state[id_] = new_p

async def view(state, screen):
    while True:
        screen.clear()
        for id_, p in state.items():
            screen.addstr(p.y, p.x, str(id_))
        await asyncio.sleep(0.01)  

curses.wrapper(main)
</code></pre></div></div>

<h1 id="libraries">Libraries</h1>

<h2 id="progress-bar"><a href="#progressbar">#</a>Progress Bar</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install tqdm
&gt;&gt;&gt; from tqdm import tqdm
&gt;&gt;&gt; from time import sleep
&gt;&gt;&gt; for el in tqdm([1, 2, 3], desc='Processing'):
...     sleep(1)
Processing: 100%|████████████████████| 3/3 [00:03&lt;00:00,  1.00s/it]
</code></pre></div></div>

<h2 id="plot"><a href="#plot">#</a>Plot</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install matplotlib
from matplotlib import pyplot
pyplot.plot(&lt;y_data&gt; [, label=&lt;str&gt;])
pyplot.plot(&lt;x_data&gt;, &lt;y_data&gt;)
pyplot.legend()                                # Adds a legend.
pyplot.savefig(&lt;path&gt;)                         # Saves the figure.
pyplot.show()                                  # Displays the figure.
pyplot.clf()                                   # Clears the figure.
</code></pre></div></div>

<h2 id="table"><a href="#table">#</a>Table</h2>

<h4 id="prints-a-csv-file-as-an-ascii-table">Prints a CSV file as an ASCII table:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install tabulate
import csv, tabulate
with open('test.csv', encoding='utf-8', newline='') as file:
    rows   = csv.reader(file)
    header = [a.title() for a in next(rows)]
    table  = tabulate.tabulate(rows, header)
    print(table)
</code></pre></div></div>

<h2 id="curses"><a href="#curses">#</a>Curses</h2>

<h4 id="clears-the-terminal-prints-a-message-and-waits-for-the-esc-key-press">Clears the terminal, prints a message and waits for the ESC key press:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from curses import wrapper, curs_set, ascii
from curses import KEY_UP, KEY_RIGHT, KEY_DOWN, KEY_LEFT

def main():
    wrapper(draw)

def draw(screen):
    curs_set(0)                                # Makes cursor invisible.
    screen.nodelay(True)                       # Makes getch() non-blocking.
    screen.clear()
    screen.addstr(0, 0, 'Press ESC to quit.')  # Coordinates are y, x.
    while screen.getch() != ascii.ESC:
        pass

def get_border(screen):
    from collections import namedtuple
    P = namedtuple('P', 'x y')
    height, width = screen.getmaxyx()
    return P(width-1, height-1)

if __name__ == '__main__':
    main()
</code></pre></div></div>

<h2 id="logging"><a href="#logging">#</a>Logging</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install loguru
from loguru import logger


logger.add('debug_{time}.log', colorize=True)  # Connects a log file.
logger.add('error_{time}.log', level='ERROR')  # Another file for errors or higher.
logger.&lt;level&gt;('A logging message.')
</code></pre></div></div>

<ul>
  <li><strong>Levels: <code class="language-plaintext highlighter-rouge">'debug'</code>, <code class="language-plaintext highlighter-rouge">'info'</code>, <code class="language-plaintext highlighter-rouge">'success'</code>, <code class="language-plaintext highlighter-rouge">'warning'</code>, <code class="language-plaintext highlighter-rouge">'error'</code>, <code class="language-plaintext highlighter-rouge">'critical'</code>.</strong></li>
</ul>

<h3 id="exceptions-2">Exceptions</h3>

<p><strong>Exception description, stack trace and values of variables are appended automatically.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>try:
    ...
except &lt;exception&gt;:
    logger.exception('An error happened.')
</code></pre></div></div>

<h3 id="rotation">Rotation</h3>

<p><strong>Argument that sets a condition when a new log file is created.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>rotation=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;datetime.time&gt;|&lt;str&gt;
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;int&gt;'</code> - Max file size in bytes.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;timedelta&gt;'</code> - Max age of a file.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;time&gt;'</code> - Time of day.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;str&gt;'</code> - Any of above as a string: <code class="language-plaintext highlighter-rouge">'100 MB'</code>, <code class="language-plaintext highlighter-rouge">'1 month'</code>, <code class="language-plaintext highlighter-rouge">'monday at 12:00'</code>, …</strong></li>
</ul>

<h3 id="retention">Retention</h3>

<p><strong>Sets a condition which old log files get deleted.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>retention=&lt;int&gt;|&lt;datetime.timedelta&gt;|&lt;str&gt;
</code></pre></div></div>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;int&gt;'</code> - Max number of files.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;timedelta&gt;'</code> - Max age of a file.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'&lt;str&gt;'</code> - Max age as a string: <code class="language-plaintext highlighter-rouge">'1 week, 3 days'</code>, <code class="language-plaintext highlighter-rouge">'2 months'</code>, …</strong></li>
</ul>

<h2 id="scraping"><a href="#scraping">#</a>Scraping</h2>

<h4 id="scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page">Scrapes Python’s URL, version number and logo from its Wikipedia page:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install requests beautifulsoup4
import requests, sys
from bs4 import BeautifulSoup
URL = 'https://en.wikipedia.org/wiki/Python_(programming_language)'
try:
    html  = requests.get(URL).text
    doc   = BeautifulSoup(html, 'html.parser')
    table = doc.find('table', class_='infobox vevent')
    rows  = table.find_all('tr')
    link  = rows[11].find('a')['href']
    ver   = rows[6].find('div').text.split()[0]
    url_i = rows[0].find('img')['src']
    image = requests.get(f'https:{url_i}').content
    with open('test.png', 'wb') as file:
        file.write(image)
    print(link, ver)
except requests.exceptions.ConnectionError:
    print("You've got problems with connection.", file=sys.stderr)
</code></pre></div></div>

<h2 id="web"><a href="#web">#</a>Web</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install bottle
from bottle import run, route, static_file, template, post, request, response
import json
</code></pre></div></div>

<h3 id="run">Run</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>run(host='localhost', port=8080)        # Runs locally.
run(host='0.0.0.0', port=80)            # Runs globally.
</code></pre></div></div>

<h3 id="static-request">Static Request</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@route('/img/&lt;image&gt;')
def send_image(image):
    return static_file(image, 'img_dir/', mimetype='image/png')
</code></pre></div></div>

<h3 id="dynamic-request">Dynamic Request</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@route('/&lt;sport&gt;')
def send_page(sport):
    return template('&lt;h1&gt;&lt;/h1&gt;', title=sport)
</code></pre></div></div>

<h3 id="rest-request">REST Request</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@post('/odds/&lt;sport&gt;')
def odds_handler(sport):
    team = request.forms.get('team')
    home_odds, away_odds = 2.44, 3.29
    response.headers['Content-Type'] = 'application/json'
    response.headers['Cache-Control'] = 'no-cache'
    return json.dumps([team, home_odds, away_odds])
</code></pre></div></div>

<h4 id="test">Test:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install requests
&gt;&gt;&gt; import requests
&gt;&gt;&gt; url = 'http://localhost:8080/odds/football'
&gt;&gt;&gt; data = {'team': 'arsenal f.c.'}
&gt;&gt;&gt; response = requests.post(url, data=data)
&gt;&gt;&gt; response.json()
['arsenal f.c.', 2.44, 3.29]
</code></pre></div></div>

<h2 id="profiling"><a href="#profiling">#</a>Profiling</h2>

<h3 id="stopwatch">Stopwatch</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from time import time
start_time = time()                     # Seconds since the Epoch.
...
duration = time() - start_time
</code></pre></div></div>

<h4 id="high-performance">High performance:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from time import perf_counter
start_time = perf_counter()             # Seconds since restart.
...
duration = perf_counter() - start_time
</code></pre></div></div>

<h3 id="timing-a-snippet">Timing a Snippet</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; from timeit import timeit
&gt;&gt;&gt; timeit('"-".join(str(i) for i in range(100))',
...        number=10000, globals=globals(), setup='pass')
0.34986
</code></pre></div></div>

<h3 id="profiling-by-line">Profiling by Line</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install line_profiler memory_profiler
@profile
def main():
    a = [*range(10000)]
    b = {*range(10000)}
main()


$ kernprof -lv test.py
Line #   Hits     Time  Per Hit   % Time  Line Contents
=======================================================
     1                                    @profile
     2                                    def main():
     3      1   1128.0   1128.0     27.4      a = [*range(10000)]
     4      1   2994.0   2994.0     72.6      b = {*range(10000)}


$ python3 -m memory_profiler test.py
Line #         Mem usage      Increment   Line Contents
=======================================================
     1        35.387 MiB     35.387 MiB   @profile
     2                                    def main():
     3        35.734 MiB      0.348 MiB       a = [*range(10000)]
     4        36.160 MiB      0.426 MiB       b = {*range(10000)}
</code></pre></div></div>

<h3 id="call-graph">Call Graph</h3>

<h4 id="generates-a-png-image-of-a-call-graph-with-highlighted-bottlenecks">Generates a PNG image of a call graph with highlighted bottlenecks:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pycallgraph
from pycallgraph import output, PyCallGraph
from datetime import datetime
time_str = datetime.now().strftime('%Y%m%d%H%M%S')
filename = f'profile-{time_str}.png'
drawer = output.GraphvizOutput(output_file=filename)
with PyCallGraph(drawer):
    &lt;code_to_be_profiled&gt;
</code></pre></div></div>

<h2 id="numpy"><a href="#numpy">#</a>NumPy</h2>

<p><strong>Array manipulation mini-language. It can run up to one hundred times faster than the equivalent Python code. An even faster alternative that runs on a GPU is called CuPy.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install numpy
import numpy as np


&lt;array&gt; = np.array(&lt;list&gt;)
&lt;array&gt; = np.arange(from_inclusive, to_exclusive, ±step_size)
&lt;array&gt; = np.ones(&lt;shape&gt;)
&lt;array&gt; = np.random.randint(from_inclusive, to_exclusive, &lt;shape&gt;)


&lt;array&gt;.shape = &lt;shape&gt;
&lt;view&gt;  = &lt;array&gt;.reshape(&lt;shape&gt;)
&lt;view&gt;  = np.broadcast_to(&lt;array&gt;, &lt;shape&gt;)


&lt;array&gt; = &lt;array&gt;.sum(axis)
indexes = &lt;array&gt;.argmin(axis)
</code></pre></div></div>

<ul>
  <li><strong>Shape is a tuple of dimension sizes.</strong></li>
  <li><strong>Axis is the index of a dimension that gets collapsed. The leftmost dimension has index 0.</strong></li>
</ul>

<h3 id="indexing">Indexing</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;el&gt;       = &lt;2d_array&gt;[0, 0]        # First element.
&lt;1d_view&gt;  = &lt;2d_array&gt;[0]           # First row.
&lt;1d_view&gt;  = &lt;2d_array&gt;[:, 0]        # First column. Also [..., 0].
&lt;3d_view&gt;  = &lt;2d_array&gt;[None, :, :]  # Expanded by dimension of size 1.


&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;1d_row_indexes&gt;, &lt;1d_column_indexes&gt;]
&lt;2d_array&gt; = &lt;2d_array&gt;[&lt;2d_row_indexes&gt;, &lt;2d_column_indexes&gt;]


&lt;2d_bools&gt; = &lt;2d_array&gt; &gt; 0
&lt;1d_array&gt; = &lt;2d_array&gt;[&lt;2d_bools&gt;]
</code></pre></div></div>

<ul>
  <li><strong>If row and column indexes differ in shape, they are combined with broadcasting.</strong></li>
</ul>

<h3 id="broadcasting">Broadcasting</h3>

<p><strong>Broadcasting is a set of rules by which NumPy functions operate on arrays of different sizes and/or dimensions.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>left  = [[0.1], [0.6], [0.8]]        # Shape: (3, 1)
right = [ 0.1 ,  0.6 ,  0.8 ]        # Shape: (3)
</code></pre></div></div>

<h4 id="1-if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones">1. If array shapes differ in length, left-pad the shorter shape with ones:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>left  = [[0.1], [0.6], [0.8]]        # Shape: (3, 1)
right = [[0.1 ,  0.6 ,  0.8]]        # Shape: (1, 3) &lt;- !
</code></pre></div></div>

<h4 id="2-if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements">2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>left  = [[0.1, 0.1, 0.1], [0.6, 0.6, 0.6], [0.8, 0.8, 0.8]]  # Shape: (3, 3) &lt;- !
right = [[0.1, 0.6, 0.8], [0.1, 0.6, 0.8], [0.1, 0.6, 0.8]]  # Shape: (3, 3) &lt;- !
</code></pre></div></div>

<h4 id="3-if-neither-non-matching-dimension-has-size-1-raise-an-error">3. If neither non-matching dimension has size 1, raise an error.</h4>

<h3 id="example-2">Example</h3>

<h4 id="for-each-point-returns-index-of-its-nearest-point-01-06-08--1-2-1">For each point returns index of its nearest point (<code class="language-plaintext highlighter-rouge">[0.1, 0.6, 0.8] =&gt; [1, 2, 1]</code>):</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; points = np.array([0.1, 0.6, 0.8])
 [ 0.1,  0.6,  0.8]
&gt;&gt;&gt; wrapped_points = points.reshape(3, 1)
[[ 0.1],
 [ 0.6],
 [ 0.8]]
&gt;&gt;&gt; distances = wrapped_points - points
[[ 0. , -0.5, -0.7],
 [ 0.5,  0. , -0.2],
 [ 0.7,  0.2,  0. ]]
&gt;&gt;&gt; distances = np.abs(distances)
[[ 0. ,  0.5,  0.7],
 [ 0.5,  0. ,  0.2],
 [ 0.7,  0.2,  0. ]]
&gt;&gt;&gt; i = np.arange(3)
[0, 1, 2]
&gt;&gt;&gt; distances[i, i] = np.inf
[[ inf,  0.5,  0.7],
 [ 0.5,  inf,  0.2],
 [ 0.7,  0.2,  inf]]
&gt;&gt;&gt; distances.argmin(1)
[1, 2, 1]
</code></pre></div></div>

<h2 id="image"><a href="#image">#</a>Image</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pillow
from PIL import Image


&lt;Image&gt; = Image.new('&lt;mode&gt;', (width, height))
&lt;Image&gt; = Image.open(&lt;path&gt;)
&lt;Image&gt; = &lt;Image&gt;.convert('&lt;mode&gt;')
&lt;Image&gt;.save(&lt;path&gt;)
&lt;Image&gt;.show()


&lt;int/tuple&gt; = &lt;Image&gt;.getpixel((x, y))          # Returns a pixel.
&lt;Image&gt;.putpixel((x, y), &lt;int/tuple&gt;)           # Writes a pixel to the image.
&lt;ImagingCore&gt; = &lt;Image&gt;.getdata()               # Returns a sequence of pixels.
&lt;Image&gt;.putdata(&lt;list/ImagingCore&gt;)             # Writes a sequence of pixels.
&lt;Image&gt;.paste(&lt;Image&gt;, (x, y))                  # Writes an image to the image.


&lt;2d_array&gt; = np.array(&lt;Image_L&gt;)                # Creates NumPy array from greyscale image.
&lt;3d_array&gt; = np.array(&lt;Image_RGB&gt;)              # Creates NumPy array from color image.
&lt;Image&gt;    = Image.fromarray(&lt;array&gt;)           # Creates image from NumPy array of floats.
</code></pre></div></div>

<h3 id="modes-1">Modes</h3>

<ul>
  <li><strong><code class="language-plaintext highlighter-rouge">'1'</code> - 1-bit pixels, black and white, stored with one pixel per byte.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'L'</code> - 8-bit pixels, greyscale.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'RGB'</code> - 3x8-bit pixels, true color.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'RGBA'</code> - 4x8-bit pixels, true color with transparency mask.</strong></li>
  <li><strong><code class="language-plaintext highlighter-rouge">'HSV'</code> - 3x8-bit pixels, Hue, Saturation, Value color space.</strong></li>
</ul>

<h3 id="examples">Examples</h3>

<h4 id="creates-a-png-image-of-a-rainbow-gradient">Creates a PNG image of a rainbow gradient:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>WIDTH, HEIGHT = 100, 100
size = WIDTH * HEIGHT
hues = [255 * i/size for i in range(size)]
img = Image.new('HSV', (WIDTH, HEIGHT))
img.putdata([(int(h), 255, 255) for h in hues])
img.convert('RGB').save('test.png')
</code></pre></div></div>

<h4 id="adds-noise-to-a-png-image">Adds noise to a PNG image:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from random import randint
add_noise = lambda value: max(0, min(255, value + randint(-20, 20)))
img = Image.open('test.png').convert('HSV')
img.putdata([(add_noise(h), s, v) for h, s, v in img.getdata()])
img.convert('RGB').save('test.png')
</code></pre></div></div>

<h3 id="drawing">Drawing</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from PIL import ImageDraw


&lt;ImageDraw&gt; = ImageDraw.Draw(&lt;Image&gt;)
&lt;ImageDraw&gt;.point((x, y), fill=None)
&lt;ImageDraw&gt;.line((x1, y1, x2, y2 [, ...]), fill=None, width=0, joint=None) 
&lt;ImageDraw&gt;.arc((x1, y1, x2, y2), from_deg, to_deg, fill=None, width=0)
&lt;ImageDraw&gt;.rectangle((x1, y1, x2, y2), fill=None, outline=None, width=0)
&lt;ImageDraw&gt;.polygon((x1, y1, x2, y2 [, ...]), fill=None, outline=None)
&lt;ImageDraw&gt;.ellipse((x1, y1, x2, y2), fill=None, outline=None, width=0)
</code></pre></div></div>

<ul>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'fill=&lt;color&gt;'</code> to set the primary color.</strong></li>
  <li><strong>Use <code class="language-plaintext highlighter-rouge">'outline=&lt;color&gt;'</code> to set the secondary color.</strong></li>
  <li><strong>Color can be specified as an int, tuple, <code class="language-plaintext highlighter-rouge">'#rrggbb[aa]'</code> string or a color name.</strong></li>
</ul>

<h2 id="animation"><a href="#animation">#</a>Animation</h2>

<h4 id="creates-a-gif-of-a-bouncing-ball">Creates a GIF of a bouncing ball:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pillow imageio
from PIL import Image, ImageDraw
import imageio
WIDTH, R = 126, 10
frames = []
for velocity in range(15):
    y = sum(range(velocity+1))
    frame = Image.new('L', (WIDTH, WIDTH))
    draw  = ImageDraw.Draw(frame)
    draw.ellipse((WIDTH/2-R, y, WIDTH/2+R, y+R*2), fill='white')
    frames.append(frame)
frames += reversed(frames[1:-1])
imageio.mimsave('test.gif', frames, duration=0.03)
</code></pre></div></div>

<h2 id="audio"><a href="#audio">#</a>Audio</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import wave


&lt;Wave_read&gt;  = wave.open('&lt;path&gt;', 'rb')        # Opens the WAV file.
framerate    = &lt;Wave_read&gt;.getframerate()       # Number of frames per second.
nchannels    = &lt;Wave_read&gt;.getnchannels()       # Number of samples per frame.
sampwidth    = &lt;Wave_read&gt;.getsampwidth()       # Sample size in bytes.
nframes      = &lt;Wave_read&gt;.getnframes()         # Number of frames.
&lt;params&gt;     = &lt;Wave_read&gt;.getparams()          # Immutable collection of above.
&lt;bytes&gt;      = &lt;Wave_read&gt;.readframes(nframes)  # Returns next 'nframes' frames.


&lt;Wave_write&gt; = wave.open('&lt;path&gt;', 'wb')        # Truncates existing file.
&lt;Wave_write&gt;.setframerate(&lt;int&gt;)                # 44100 for CD, 48000 for video.
&lt;Wave_write&gt;.setnchannels(&lt;int&gt;)                # 1 for mono, 2 for stereo.
&lt;Wave_write&gt;.setsampwidth(&lt;int&gt;)                # 2 for CD quality sound.
&lt;Wave_write&gt;.setparams(&lt;params&gt;)                # Sets all parameters.
&lt;Wave_write&gt;.writeframes(&lt;bytes&gt;)               # Appends frames to the file.
</code></pre></div></div>

<ul>
  <li><strong>Bytes object contains a sequence of frames, each consisting of one or more samples.</strong></li>
  <li><strong>In a stereo signal, the first sample of a frame belongs to the left channel.</strong></li>
  <li><strong>Each sample consists of one or more bytes that, when converted to an integer, indicate the displacement of a speaker membrane at a given moment.</strong></li>
  <li><strong>If sample width is one, then the integer should be encoded unsigned.</strong></li>
  <li><strong>For all other sizes, the integer should be encoded signed with little-endian byte order.</strong></li>
</ul>

<h3 id="sample-values">Sample Values</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>┏━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━┯━━━━━━━━━━━━━┓
┃ sampwidth │     min     │ zero │     max     ┃
┠───────────┼─────────────┼──────┼─────────────┨
┃     1     │           0 │  128 │         255 ┃
┃     2     │      -32768 │    0 │       32767 ┃
┃     3     │    -8388608 │    0 │     8388607 ┃
┃     4     │ -2147483648 │    0 │  2147483647 ┃
┗━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━┷━━━━━━━━━━━━━┛
</code></pre></div></div>

<h3 id="read-float-samples-from-wav-file">Read Float Samples from WAV File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def read_wav_file(filename):
    def get_int(bytes_obj):
        an_int = int.from_bytes(bytes_obj, 'little', signed=sampwidth!=1)
        return an_int - 128 * (sampwidth == 1)
    with wave.open(filename, 'rb') as file:
        sampwidth = file.getsampwidth()
        frames = file.readframes(-1)
    bytes_samples = (frames[i: i + sampwidth] for i in range(0, len(frames), sampwidth))
    return [get_int(b) / pow(2, sampwidth * 8 - 1) for b in bytes_samples]
</code></pre></div></div>

<h3 id="write-float-samples-to-wav-file">Write Float Samples to WAV File</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>def write_to_wav_file(filename, float_samples, nchannels=1, sampwidth=2, framerate=44100):
    def get_bytes(a_float):
        a_float = max(-1, min(1 - 2e-16, a_float))
        a_float += sampwidth == 1
        a_float *= pow(2, sampwidth * 8 - 1)
        return int(a_float).to_bytes(sampwidth, 'little', signed=sampwidth!=1) 
    with wave.open(filename, 'wb') as file:
        file.setnchannels(nchannels)
        file.setsampwidth(sampwidth)
        file.setframerate(framerate)
        file.writeframes(b''.join(get_bytes(f) for f in float_samples))
</code></pre></div></div>

<h3 id="examples-1">Examples</h3>

<h4 id="saves-a-sine-wave-to-a-mono-wav-file">Saves a sine wave to a mono WAV file:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from math import pi, sin
samples_f = (sin(i * 2 * pi * 440 / 44100) for i in range(100000))
write_to_wav_file('test.wav', samples_f)
</code></pre></div></div>

<h4 id="adds-noise-to-a-mono-wav-file">Adds noise to a mono WAV file:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>from random import random
add_noise = lambda value: value + (random() - 0.5) * 0.03
samples_f = (add_noise(f) for f in read_wav_file('test.wav'))
write_to_wav_file('test.wav', samples_f)
</code></pre></div></div>

<h4 id="plays-a-wav-file">Plays a WAV file:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install simpleaudio
from simpleaudio import play_buffer
with wave.open('test.wav', 'rb') as file:
    p = file.getparams()
    frames = file.readframes(-1)
    play_buffer(frames, p.nchannels, p.sampwidth, p.framerate)
</code></pre></div></div>

<h3 id="text-to-speech">Text to Speech</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pyttsx3
import pyttsx3
engine = pyttsx3.init()
engine.say('Sally sells seashells by the seashore.')
engine.runAndWait()
</code></pre></div></div>

<h2 id="synthesizer"><a href="#synthesizer">#</a>Synthesizer</h2>

<h4 id="plays-popcorn-by-gershon-kingsley">Plays Popcorn by Gershon Kingsley:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install simpleaudio
import simpleaudio, math, struct
from itertools import chain, repeat
F  = 44100
P1 = '71♪,69,,71♪,66,,62♪,66,,59♪,,,'
P2 = '71♪,73,,74♪,73,,74,,71,,73♪,71,,73,,69,,71♪,69,,71,,67,,71♪,,,'
get_pause   = lambda seconds: repeat(0, int(seconds * F))
sin_f       = lambda i, hz: math.sin(i * 2 * math.pi * hz / F)
get_wave    = lambda hz, seconds: (sin_f(i, hz) for i in range(int(seconds * F)))
get_hz      = lambda key: 8.176 * 2 ** (int(key) / 12)
parse_note  = lambda note: (get_hz(note[:2]), 0.25 if '♪' in note else 0.125)
get_samples = lambda note: get_wave(*parse_note(note)) if note else get_pause(0.125)
samples_f   = chain.from_iterable(get_samples(n) for n in f'{P1}{P1}{P2}'.split(','))
samples_b   = b''.join(struct.pack('&lt;h', int(f * 30000)) for f in samples_f)
simpleaudio.play_buffer(samples_b, 1, 2, F)
</code></pre></div></div>

<h2 id="pygame"><a href="#pygame">#</a>Pygame</h2>

<h3 id="basic-example-1">Basic Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pygame
import pygame as pg
pg.init()
screen = pg.display.set_mode((500, 500))
rect = pg.Rect(240, 240, 20, 20)
while all(event.type != pg.QUIT for event in pg.event.get()):
    deltas = {pg.K_UP: (0, -3), pg.K_RIGHT: (3, 0), pg.K_DOWN: (0, 3), pg.K_LEFT: (-3, 0)}
    for key_code, is_pressed in enumerate(pg.key.get_pressed()):
        rect = rect.move(deltas[key_code]) if key_code in deltas and is_pressed else rect
    screen.fill((0, 0, 0))
    pg.draw.rect(screen, (255, 255, 255), rect)
    pg.display.flip()
</code></pre></div></div>

<h3 id="rectangle">Rectangle</h3>

<p><strong>Object for storing rectangular coordinates.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Rect&gt; = pg.Rect(x, y, width, height)           # X and y are coordinates of topleft corner.
&lt;int&gt;  = &lt;Rect&gt;.x/y/centerx/centery/…           # Top, right, bottom, left.
&lt;tup.&gt; = &lt;Rect&gt;.topleft/center/…                # Topright, bottomright, bottomleft.
&lt;Rect&gt; = &lt;Rect&gt;.move((x, y))                    # Use move_ip() to move in place.


&lt;bool&gt; = &lt;Rect&gt;.collidepoint((x, y))            # Checks if rectangle contains a point.
&lt;bool&gt; = &lt;Rect&gt;.colliderect(&lt;Rect&gt;)             # Checks if two rectangles overlap.
&lt;int&gt;  = &lt;Rect&gt;.collidelist(&lt;list_of_Rect&gt;)     # Returns index of first colliding Rect or -1.
&lt;list&gt; = &lt;Rect&gt;.collidelistall(&lt;list_of_Rect&gt;)  # Returns indexes of all colliding Rects.
</code></pre></div></div>

<h3 id="surface">Surface</h3>

<p><strong>Object for representing images.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Surf&gt; = pg.display.set_mode((width, height))   # Returns display surface.
&lt;Surf&gt; = pg.Surface((width, height), …)         # New RGB surface. Add `pg.SRCALPHA` for RGBA.
&lt;Surf&gt; = pg.image.load('&lt;path&gt;')                # Loads the image. Format depends on source.
&lt;Surf&gt; = &lt;Surf&gt;.subsurface(&lt;Rect&gt;)              # Returns a subsurface.


&lt;Surf&gt;.fill(color)                              # Tuple, Color('#rrggbb[aa]') or Color(&lt;name&gt;).
&lt;Surf&gt;.set_at((x, y), color)                    # Updates pixel.
&lt;Surf&gt;.blit(&lt;Surf&gt;, (x, y))                     # Draws passed surface to the surface.


&lt;Surf&gt; = pg.transform.scale(&lt;Surf&gt;, (width, height))
&lt;Surf&gt; = pg.transform.rotate(&lt;Surf&gt;, degrees)
&lt;Surf&gt; = pg.transform.flip(&lt;Surf&gt;, x_bool, y_bool)


pg.draw.line(&lt;Surf&gt;, color, (x1, y1), (x2, y2), width)
pg.draw.arc(&lt;Surf&gt;, color, &lt;Rect&gt;, from_radians, to_radians)
pg.draw.rect(&lt;Surf&gt;, color, &lt;Rect&gt;)
pg.draw.polygon(&lt;Surf&gt;, color, points)
pg.draw.ellipse(&lt;Surf&gt;, color, &lt;Rect&gt;)
</code></pre></div></div>

<h3 id="font">Font</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Font&gt; = pg.font.SysFont('&lt;name&gt;', size)        # Loads the system font or default if missing.
&lt;Font&gt; = pg.font.Font('&lt;path&gt;', size)           # Loads the TTF file. Pass None for default.
&lt;Surf&gt; = &lt;Font&gt;.render(text, antialias, color)  # Background color can be specified at the end.
</code></pre></div></div>

<h3 id="sound">Sound</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Sound&gt; = pg.mixer.Sound('&lt;path&gt;')              # Loads the WAV file.
&lt;Sound&gt;.play()                                  # Starts playing the sound.
</code></pre></div></div>

<h3 id="basic-mario-brothers-example">Basic Mario Brothers Example</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import collections, dataclasses, enum, io, itertools as it, pygame as pg, urllib.request
from random import randint

P = collections.namedtuple('P', 'x y')          # Position
D = enum.Enum('D', 'n e s w')                   # Direction
SIZE, MAX_SPEED = 50, P(5, 10)                  # Screen size, Speed limit

def main():
    def get_screen():
        pg.init()
        return pg.display.set_mode(2 * [SIZE*16])
    def get_images():
        url = 'https://gto76.github.io/python-cheatsheet/web/mario_bros.png'
        img = pg.image.load(io.BytesIO(urllib.request.urlopen(url).read()))
        return [img.subsurface(get_rect(x, 0)) for x in range(img.get_width() // 16)]
    def get_mario():
        Mario = dataclasses.make_dataclass('Mario', 'rect spd facing_left frame_cycle'.split())
        return Mario(get_rect(1, 1), P(0, 0), False, it.cycle(range(3)))
    def get_tiles():
        positions = [p for p in it.product(range(SIZE), repeat=2) if {*p} &amp; {0, SIZE-1}] + \
            [(randint(1, SIZE-2), randint(2, SIZE-2)) for _ in range(SIZE**2 // 10)]
        return [get_rect(*p) for p in positions]
    def get_rect(x, y):
        return pg.Rect(x*16, y*16, 16, 16)
    run(get_screen(), get_images(), get_mario(), get_tiles())

def run(screen, images, mario, tiles):
    clock = pg.time.Clock()
    while all(event.type != pg.QUIT for event in pg.event.get()):
        keys = {pg.K_UP: D.n, pg.K_RIGHT: D.e, pg.K_DOWN: D.s, pg.K_LEFT: D.w}
        pressed = {keys.get(i) for i, on in enumerate(pg.key.get_pressed()) if on}
        update_speed(mario, tiles, pressed)
        update_position(mario, tiles)
        draw(screen, images, mario, tiles, pressed)
        clock.tick(28)

def update_speed(mario, tiles, pressed):
    x, y = mario.spd
    x += 2 * ((D.e in pressed) - (D.w in pressed))
    x -= x // abs(x) if x else 0
    y += 1 if D.s not in get_boundaries(mario.rect, tiles) else (D.n in pressed) * -10
    mario.spd = P(*[max(-limit, min(limit, s)) for limit, s in zip(MAX_SPEED, P(x, y))])

def update_position(mario, tiles):
    p = mario.rect.topleft
    larger_speed = max(abs(s) for s in mario.spd)
    for _ in range(larger_speed):
        mario.spd = stop_on_collision(mario.spd, get_boundaries(mario.rect, tiles))
        p = P(*[a + s/larger_speed for a, s in zip(p, mario.spd)])
        mario.rect.topleft = p

def get_boundaries(rect, tiles):
    deltas = {D.n: P(0, -1), D.e: P(1, 0), D.s: P(0, 1), D.w: P(-1, 0)}
    return {d for d, delta in deltas.items() if rect.move(delta).collidelist(tiles) != -1}

def stop_on_collision(spd, bounds):
    return P(x=0 if (D.w in bounds and spd.x &lt; 0) or (D.e in bounds and spd.x &gt; 0) else spd.x,
             y=0 if (D.n in bounds and spd.y &lt; 0) or (D.s in bounds and spd.y &gt; 0) else spd.y)

def draw(screen, images, mario, tiles, pressed):
    def get_frame_index():
        if D.s not in get_boundaries(mario.rect, tiles):
            return 4
        return next(mario.frame_cycle) if {D.w, D.e} &amp; pressed else 6
    screen.fill((85, 168, 255))
    mario.facing_left = (D.w in pressed) if {D.w, D.e} &amp; pressed else mario.facing_left
    screen.blit(images[get_frame_index() + mario.facing_left * 9], mario.rect)
    for rect in tiles:
        screen.blit(images[18 if {*rect.topleft} &amp; {0, (SIZE-1)*16} else 19], rect)
    pg.display.flip()

if __name__ == '__main__':
    main()
</code></pre></div></div>

<h2 id="pandas"><a href="#pandas">#</a>Pandas</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install pandas
import pandas as pd
from pandas import Series, DataFrame
</code></pre></div></div>

<h3 id="series">Series</h3>

<p><strong>Ordered dictionary with a name.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; Series([1, 2], index=['x', 'y'], name='a')
x    1
y    2
Name: a, dtype: int64


&lt;Sr&gt; = Series(&lt;list&gt;)                         # Assigns RangeIndex starting at 0.
&lt;Sr&gt; = Series(&lt;dict&gt;)                         # Takes dictionary's keys for index.
&lt;Sr&gt; = Series(&lt;dict/Series&gt;, index=&lt;list&gt;)    # Only keeps items with keys specified in index.


&lt;el&gt; = &lt;Sr&gt;.loc[key]                          # Or: &lt;Sr&gt;.iloc[index]
&lt;Sr&gt; = &lt;Sr&gt;.loc[keys]                         # Or: &lt;Sr&gt;.iloc[indexes]
&lt;Sr&gt; = &lt;Sr&gt;.loc[from_key : to_key_inclusive]  # Or: &lt;Sr&gt;.iloc[from_i : to_i_exclusive]


&lt;el&gt; = &lt;Sr&gt;[key/index]                        # Or: &lt;Sr&gt;.key
&lt;Sr&gt; = &lt;Sr&gt;[keys/indexes]                     # Or: &lt;Sr&gt;[&lt;key_range/range&gt;]
&lt;Sr&gt; = &lt;Sr&gt;[bools]                            # Or: &lt;Sr&gt;.i/loc[bools]


&lt;Sr&gt; = &lt;Sr&gt; &gt;&lt;== &lt;el/Sr&gt;                      # Returns a Series of bools.
&lt;Sr&gt; = &lt;Sr&gt; +-*/ &lt;el/Sr&gt;                      # Items with non-matching keys get value NaN.


&lt;Sr&gt; = &lt;Sr&gt;.append(&lt;Sr&gt;)                      # Or: pd.concat(&lt;coll_of_Sr&gt;)
&lt;Sr&gt; = &lt;Sr&gt;.combine_first(&lt;Sr&gt;)               # Adds items that are not yet present.
&lt;Sr&gt;.update(&lt;Sr&gt;)                             # Updates items that are already present.
</code></pre></div></div>

<h4 id="aggregate-transform-map">Aggregate, Transform, Map:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;el&gt; = &lt;Sr&gt;.sum/max/mean/idxmax/all()         # Or: &lt;Sr&gt;.aggregate(&lt;agg_func&gt;)
&lt;Sr&gt; = &lt;Sr&gt;.rank/diff/cumsum/ffill/interpl()  # Or: &lt;Sr&gt;.agg/transform(&lt;trans_func&gt;)
&lt;Sr&gt; = &lt;Sr&gt;.fillna(&lt;el&gt;)                      # Or: &lt;Sr&gt;.apply/agg/transform/map(&lt;map_func&gt;)
</code></pre></div></div>

<ul>
  <li>
    <p><strong>The way <code class="language-plaintext highlighter-rouge">'aggregate()'</code> and <code class="language-plaintext highlighter-rouge">'transform()'</code> find out whether the passed function accepts an element or the whole Series is by passing it a single value at first and if it raises an error, then they pass it the whole Series.</strong></p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>sr = Series([1, 2], index=[‘x’, ‘y’])
x    1
y    2</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <p>┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓
┃             │    ‘sum’    │   [‘sum’]   │ {‘s’: ‘sum’}  ┃
┠─────────────┼─────────────┼─────────────┼───────────────┨
┃ sr.apply(…) │      3      │    sum  3   │     s  3      ┃
┃ sr.agg(…)   │             │             │               ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛</p>

    <p>┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓
┃             │    ‘rank’   │   [‘rank’]  │ {‘r’: ‘rank’} ┃
┠─────────────┼─────────────┼─────────────┼───────────────┨
┃ sr.apply(…) │             │      rank   │               ┃
┃ sr.agg(…)   │     x  1    │   x     1   │    r  x  1    ┃
┃ sr.trans(…) │     y  2    │   y     2   │       y  2    ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛</p>
  </li>
  <li>
    <p><strong>Last result has a hierarchical index. Use <code class="language-plaintext highlighter-rouge">'&lt;Sr&gt;[key_1, key_2]'</code> to get its values.</strong></p>
  </li>
</ul>

<h3 id="dataframe">DataFrame</h3>

<p><strong>Table with labeled rows and columns.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y'])
   x  y
a  1  2
b  3  4


&lt;DF&gt;    = DataFrame(&lt;list_of_rows&gt;)           # Rows can be either lists, dicts or series.
&lt;DF&gt;    = DataFrame(&lt;dict_of_columns&gt;)        # Columns can be either lists, dicts or series.


&lt;el&gt;    = &lt;DF&gt;.loc[row_key, column_key]       # Or: &lt;DF&gt;.iloc[row_index, column_index]
&lt;Sr/DF&gt; = &lt;DF&gt;.loc[row_key/s]                 # Or: &lt;DF&gt;.iloc[row_index/es]
&lt;Sr/DF&gt; = &lt;DF&gt;.loc[:, column_key/s]           # Or: &lt;DF&gt;.iloc[:, column_index/es]
&lt;DF&gt;    = &lt;DF&gt;.loc[row_bools, column_bools]   # Or: &lt;DF&gt;.iloc[row_bools, column_bools]


&lt;Sr/DF&gt; = &lt;DF&gt;[column_key/s]                  # Or: &lt;DF&gt;.column_key
&lt;DF&gt;    = &lt;DF&gt;[row_bools]                     # Keeps rows as specified by bools.
&lt;DF&gt;    = &lt;DF&gt;[&lt;DF_of_bools&gt;]                 # Assigns NaN to False values.


&lt;DF&gt;    = &lt;DF&gt; &gt;&lt;== &lt;el/Sr/DF&gt;                # Returns DataFrame of bools.
&lt;DF&gt;    = &lt;DF&gt; +-*/ &lt;el/Sr/DF&gt;                # Items with non-matching keys get value NaN.


&lt;DF&gt;    = &lt;DF&gt;.set_index(column_key)          # Replaces row keys with values from a column.
&lt;DF&gt;    = &lt;DF&gt;.reset_index()                  # Moves row keys to column named index.
&lt;DF&gt;    = &lt;DF&gt;.filter('&lt;regex&gt;', axis=1)      # Only keeps columns whose key matches the regex.
&lt;DF&gt;    = &lt;DF&gt;.melt(id_vars=column_key/s)     # Converts DF from wide to long format.
</code></pre></div></div>

<h4 id="merge-join-concat">Merge, Join, Concat:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; l = DataFrame([[1, 2], [3, 4]], index=['a', 'b'], columns=['x', 'y'])
   x  y 
a  1  2 
b  3  4 
&gt;&gt;&gt; r = DataFrame([[4, 5], [6, 7]], index=['b', 'c'], columns=['y', 'z'])
   y  z
b  4  5
c  6  7


┏━━━━━━━━━━━━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━┯━━━━━━━━━━━━━━━━━━━━━━━━━━┓
┃                        │    'outer'    │   'inner'  │   'left'   │       Description        ┃
┠────────────────────────┼───────────────┼────────────┼────────────┼──────────────────────────┨
┃ l.merge(r, on='y',     │    x   y   z  │ x   y   z  │ x   y   z  │ Joins/merges on column.  ┃
┃            how=…)      │ 0  1   2   .  │ 3   4   5  │ 1   2   .  │ Also accepts left_on and ┃
┃                        │ 1  3   4   5  │            │ 3   4   5  │ right_on parameters.     ┃
┃                        │ 2  .   6   7  │            │            │ Uses 'inner' by default. ┃
┠────────────────────────┼───────────────┼────────────┼────────────┼──────────────────────────┨
┃ l.join(r, lsuffix='l', │    x yl yr  z │            │ x yl yr  z │ Joins/merges on row keys.┃
┃           rsuffix='r', │ a  1  2  .  . │ x yl yr  z │ 1  2  .  . │ Uses 'left' by default.  ┃
┃           how=…)       │ b  3  4  4  5 │ 3  4  4  5 │ 3  4  4  5 │ If r is a series, it is  ┃
┃                        │ c  .  .  6  7 │            │            │ first converted to DF.   ┃
┠────────────────────────┼───────────────┼────────────┼────────────┼──────────────────────────┨
┃ pd.concat([l, r],      │    x   y   z  │     y      │            │ Adds rows at the bottom. ┃
┃           axis=0,      │ a  1   2   .  │     2      │            │ Uses 'outer' by default. ┃
┃           join=…)      │ b  3   4   .  │     4      │            │ By default works the     ┃
┃                        │ b  .   4   5  │     4      │            │ same as `l.append(r)`.   ┃
┃                        │ c  .   6   7  │     6      │            │                          ┃
┠────────────────────────┼───────────────┼────────────┼────────────┼──────────────────────────┨
┃ pd.concat([l, r],      │    x  y  y  z │            │            │ Adds columns at the      ┃
┃           axis=1,      │ a  1  2  .  . │ x  y  y  z │            │ right end.               ┃
┃           join=…)      │ b  3  4  4  5 │ 3  4  4  5 │            │ Uses 'outer' by default. ┃
┃                        │ c  .  .  6  7 │            │            │                          ┃
┠────────────────────────┼───────────────┼────────────┼────────────┼──────────────────────────┨
┃ l.combine_first(r)     │    x   y   z  │            │            │ Adds missing rows and    ┃
┃                        │ a  1   2   .  │            │            │ columns.                 ┃
┃                        │ b  3   4   5  │            │            │                          ┃
┃                        │ c  .   6   7  │            │            │                          ┃
┗━━━━━━━━━━━━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━┷━━━━━━━━━━━━━━━━━━━━━━━━━━┛
</code></pre></div></div>

<h4 id="aggregate-transform-map-1">Aggregate, Transform, Map:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;Sr&gt; = &lt;DF&gt;.sum/max/mean/idxmax/all()         # Or: &lt;DF&gt;.apply/agg/transform(&lt;agg_func&gt;)
&lt;DF&gt; = &lt;DF&gt;.rank/diff/cumsum/ffill/interpl()  # Or: &lt;DF&gt;.apply/agg/transform(&lt;trans_func&gt;)
&lt;DF&gt; = &lt;DF&gt;.fillna(&lt;el&gt;)                      # Or: &lt;DF&gt;.applymap(&lt;map_func&gt;)
</code></pre></div></div>

<ul>
  <li>
    <p><strong>All operations operate on columns by default. Use <code class="language-plaintext highlighter-rouge">'axis=1'</code> parameter to process the rows instead.</strong></p>

    <blockquote>
      <blockquote>
        <blockquote>
          <p>df = DataFrame([[1, 2], [3, 4]], index=[‘a’, ‘b’], columns=[‘x’, ‘y’])
   x  y
a  1  2
b  3  4</p>
        </blockquote>
      </blockquote>
    </blockquote>

    <p>┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓
┃             │    ‘sum’    │   [‘sum’]   │ {‘x’: ‘sum’}  ┃
┠─────────────┼─────────────┼─────────────┼───────────────┨
┃ df.apply(…) │             │       x  y  │               ┃
┃ df.agg(…)   │     x  4    │  sum  4  6  │     x  4      ┃
┃             │     y  6    │             │               ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛</p>

    <p>┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓
┃             │    ‘rank’   │   [‘rank’]  │ {‘x’: ‘rank’} ┃
┠─────────────┼─────────────┼─────────────┼───────────────┨
┃ df.apply(…) │      x  y   │      x    y │        x      ┃
┃ df.agg(…)   │   a  1  1   │   rank rank │     a  1      ┃
┃ df.trans(…) │   b  2  2   │ a    1    1 │     b  2      ┃
┃             │             │ b    2    2 │               ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛</p>
  </li>
  <li>
    <p><strong>Use <code class="language-plaintext highlighter-rouge">'&lt;DF&gt;[col_key_1, col_key_2][row_key]'</code> to get the fifth result’s values.</strong></p>
  </li>
</ul>

<h4 id="encode-decode">Encode, Decode:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;DF&gt; = pd.read_json/html('&lt;str/path/url&gt;')
&lt;DF&gt; = pd.read_csv/pickle/excel('&lt;path/url&gt;')
&lt;DF&gt; = pd.read_sql('&lt;table_name/query&gt;', &lt;connection&gt;)
&lt;DF&gt; = pd.read_clipboard()


&lt;dict&gt; = &lt;DF&gt;.to_dict(['d/l/s/sp/r/i'])
&lt;str&gt;  = &lt;DF&gt;.to_json/html/csv/markdown/latex([&lt;path&gt;])
&lt;DF&gt;.to_pickle/excel(&lt;path&gt;)
&lt;DF&gt;.to_sql('&lt;table_name&gt;', &lt;connection&gt;)
</code></pre></div></div>

<h3 id="groupby">GroupBy</h3>

<p><strong>Object that groups together rows of a dataframe based on the value of the passed column.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&gt;&gt;&gt; df = DataFrame([[1, 2, 3], [4, 5, 6], [7, 8, 6]], index=list('abc'), columns=list('xyz'))
&gt;&gt;&gt; df.groupby('z').get_group(3)
   x  y
a  1  2
&gt;&gt;&gt; df.groupby('z').get_group(6)
   x  y
b  4  5
c  7  8


&lt;GB&gt; = &lt;DF&gt;.groupby(column_key/s)             # DF is split into groups based on passed column.
&lt;DF&gt; = &lt;GB&gt;.get_group(group_key/s)            # Selects a group by value of grouping column.
</code></pre></div></div>

<h4 id="aggregate-transform-map-2">Aggregate, Transform, Map:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;DF&gt; = &lt;GB&gt;.sum/max/mean/idxmax/all()         # Or: &lt;GB&gt;.apply/agg(&lt;agg_func&gt;)
&lt;DF&gt; = &lt;GB&gt;.rank/diff/cumsum/ffill()          # Or: &lt;GB&gt;.aggregate(&lt;trans_func&gt;)  
&lt;DF&gt; = &lt;GB&gt;.fillna(&lt;el&gt;)                      # Or: &lt;GB&gt;.transform(&lt;map_func&gt;)


&gt;&gt;&gt; gb = df.groupby('z')
      x  y  z
3: a  1  2  3
6: b  4  5  6
   c  7  8  6


┏━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━┯━━━━━━━━━━━━━━━┓
┃             │    'sum'    │    'rank'   │   ['rank']  │ {'x': 'rank'} ┃
┠─────────────┼─────────────┼─────────────┼─────────────┼───────────────┨
┃ gb.agg(…)   │      x   y  │      x  y   │      x    y │        x      ┃
┃             │  z          │   a  1  1   │   rank rank │     a  1      ┃
┃             │  3   1   2  │   b  1  1   │ a    1    1 │     b  1      ┃
┃             │  6  11  13  │   c  2  2   │ b    1    1 │     c  2      ┃
┃             │             │             │ c    2    2 │               ┃
┠─────────────┼─────────────┼─────────────┼─────────────┼───────────────┨
┃ gb.trans(…) │      x   y  │      x  y   │             │               ┃
┃             │  a   1   2  │   a  1  1   │             │               ┃
┃             │  b  11  13  │   b  1  1   │             │               ┃
┃             │  c  11  13  │   c  1  1   │             │               ┃
┗━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━┷━━━━━━━━━━━━━━━┛
</code></pre></div></div>

<h3 id="rolling">Rolling</h3>

<p><strong>Object for rolling window calculations.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>&lt;R_Sr/R_DF/R_GB&gt; = &lt;Sr/DF/GB&gt;.rolling(window_size)  # Also: `min_periods=None, center=False`.
&lt;R_Sr/R_DF&gt;      = &lt;R_DF/R_GB&gt;[column_key/s]        # Or: &lt;R&gt;.column_key
&lt;Sr/DF/DF&gt;       = &lt;R_Sr/R_DF/R_GB&gt;.sum/max/mean()  # Or: &lt;R&gt;.apply/agg(&lt;agg_func/str&gt;)
</code></pre></div></div>

<h2 id="plotly"><a href="#plotly">#</a>Plotly</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install plotly kaleido
from plotly.express import line
&lt;Figure&gt; = line(&lt;DF&gt;, x=&lt;col_name&gt;, y=&lt;col_name&gt;)        # Or: line(x=&lt;list&gt;, y=&lt;list&gt;)
&lt;Figure&gt;.update_layout(margin=dict(t=0, r=0, b=0, l=0))  # Or: paper_bgcolor='rgba(0, 0, 0, 0)'
&lt;Figure&gt;.write_html/json/image('&lt;path&gt;')                 # Also: &lt;Figure&gt;.show()
</code></pre></div></div>

<h4 id="covid-deaths-by-continent">Covid deaths by continent:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>covid = pd.read_csv('https://covid.ourworldindata.org/data/owid-covid-data.csv', 
                    usecols=['iso_code', 'date', 'total_deaths', 'population'])
continents = pd.read_csv('https://datahub.io/JohnSnowLabs/country-and-continent-codes-' + \
                         'list/r/country-and-continent-codes-list-csv.csv',
                         usecols=['Three_Letter_Country_Code', 'Continent_Name'])
df = pd.merge(covid, continents, left_on='iso_code', right_on='Three_Letter_Country_Code')
df = df.groupby(['Continent_Name', 'date']).sum().reset_index()
df['Total Deaths per Million'] = df.total_deaths * 1e6 / df.population
df = df[('2020-03-14' &lt; df.date) &amp; (df.date &lt; '2020-11-25')]
df = df.rename({'date': 'Date', 'Continent_Name': 'Continent'}, axis='columns')
line(df, x='Date', y='Total Deaths per Million', color='Continent').show()
</code></pre></div></div>

<h4 id="confirmed-covid-cases-dow-jones-gold-and-bitcoin-price">Confirmed covid cases, Dow Jones, gold, and Bitcoin price:</h4>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>import pandas as pd
import plotly.graph_objects as go
import datetime

def main():
    display_data(wrangle_data(*scrape_data()))

def scrape_data():
    def scrape_yahoo(id_):
        BASE_URL = 'https://query1.finance.yahoo.com/v7/finance/download/'
        now = int(datetime.datetime.now().timestamp())
        url = f'{BASE_URL}{id_}?period1=1579651200&amp;period2={now}&amp;interval=1d&amp;events=history'
        return pd.read_csv(url, usecols=['Date', 'Close']).set_index('Date').Close
    covid = pd.read_csv('https://covid.ourworldindata.org/data/owid-covid-data.csv',
                        usecols=['location', 'date', 'total_cases'])
    covid = covid[covid.location == 'World'].set_index('date').total_cases
    dow, gold, bitcoin = [scrape_yahoo(id_) for id_ in ('^DJI', 'GC=F', 'BTC-USD')]
    dow.name, gold.name, bitcoin.name = 'Dow Jones', 'Gold', 'Bitcoin'
    return covid, dow, gold, bitcoin

def wrangle_data(covid, dow, gold, bitcoin):
    df = pd.concat([dow, gold, bitcoin], axis=1)
    df = df.sort_index().interpolate()
    df = df.rolling(10, min_periods=1, center=True).mean()
    df = df.loc['2020-02-23':].iloc[:-2]
    df = (df / df.iloc[0]) * 100
    return pd.concat([covid, df], axis=1, join='inner')

def display_data(df):
    def get_trace(col_name):
        return go.Scatter(x=df.index, y=df[col_name], name=col_name, yaxis='y2')
    traces = [get_trace(col_name) for col_name in df.columns[1:]]
    traces.append(go.Scatter(x=df.index, y=df.total_cases, name='Total Cases', yaxis='y1'))
    figure = go.Figure()
    figure.add_traces(traces)
    figure.update_layout(
        yaxis1=dict(title='Total Cases', rangemode='tozero'),
        yaxis2=dict(title='%', rangemode='tozero', overlaying='y', side='right'),
        legend=dict(x=1.1)
    ).show()

if __name__ == '__main__':
    main()
</code></pre></div></div>

<h2 id="pysimplegui"><a href="#pysimplegui">#</a>PySimpleGUI</h2>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install PySimpleGUI
import PySimpleGUI as sg
layout = [[sg.Text("What's your name?")], [sg.Input()], [sg.Button('Ok')]]
window = sg.Window('Window Title', layout)
event, values = window.read()
print(f'Hello {values[0]}!' if event == 'Ok' else '')
</code></pre></div></div>

<h2 id="appendix"><a href="#appendix">#</a>Appendix</h2>

<h3 id="cython">Cython</h3>

<p><strong>Library that compiles Python code into C.</strong></p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code># $ pip3 install cython
import pyximport; pyximport.install()
import &lt;cython_script&gt;
&lt;cython_script&gt;.main()
</code></pre></div></div>

<h4 id="definitions">Definitions:</h4>

<ul>
  <li><strong>All <code class="language-plaintext highlighter-rouge">'cdef'</code> definitions are optional, but they contribute to the speed-up.</strong></li>
  <li>
    <p><strong>Script needs to be saved with a <code class="language-plaintext highlighter-rouge">'pyx'</code> extension.</strong></p>

    <p>cdef <type> <var_name> = <el>
cdef <type>[n_elements] <var_name> = [<el_1>, <el_2>, ...]
cdef &lt;type/void&gt; <func_name>(<type> <arg_name_1>, ...):</arg_name_1></type></func_name></el_2></el_1></var_name></type></el></var_name></type></p>

    <p>cdef class <class_name>:
    cdef public <type> <attr_name>
    def __init__(self, <type> <arg_name>):
        self.<attr_name> = <arg_name></arg_name></attr_name></arg_name></type></attr_name></type></class_name></p>

    <p>cdef enum <enum_name>: <member_name_1>, <member_name_2>, ...</member_name_2></member_name_1></enum_name></p>
  </li>
</ul>

<h3 id="pyinstaller">PyInstaller</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ pip3 install pyinstaller
$ pyinstaller script.py                        # Compiles into './dist/script' directory.
$ pyinstaller script.py --onefile              # Compiles into './dist/script' console app.
$ pyinstaller script.py --windowed             # Compiles into './dist/script' windowed app.
$ pyinstaller script.py --add-data '&lt;path&gt;:.'  # Adds file to the root of the executable.
</code></pre></div></div>

<ul>
  <li><strong>File paths need to be updated to <code class="language-plaintext highlighter-rouge">'os.path.join(sys._MEIPASS, &lt;path&gt;)'</code>.</strong></li>
</ul>

<h3 id="basic-script-template">Basic Script Template</h3>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>#!/usr/bin/env python3
#
# Usage: .py
#

from sys import argv, exit
from collections import namedtuple
from dataclasses import make_dataclass
from enum import Enum
import re


def main():
    pass


###
##  UTIL
#

def read_file(filename):
    with open(filename, encoding='utf-8') as file:
        return file.readlines()
</code></pre></div></div>

        <div class="page-footer">
          <div class="page-tag">
            <span>TAGS:</span>
            
            <a href="/tags#自强不息" class="tag">| 自强不息</a>
            
            <a href="/tags#Python" class="tag">| Python</a>
            
          </div><!-- End Tags -->

          <!--Start Share-->
          <div class="page-share">
            <span>SHARE:</span>
            <a href="https://twitter.com/intent/tweet?text=Python Cheatsheet&url=http://localhost:4000/python-cheat-sheet/" title="Share on Twitter" rel="nofollow" target="_blank"><i class="fa fa-twitter-square" aria-hidden="true"></i></a>
            <a href="https://facebook.com/sharer.php?u=http://localhost:4000/python-cheat-sheet/" title="Share on Facebook" rel="nofollow" target="_blank"><i class="fa fa-facebook-square" aria-hidden="true"></i></a>
            <a href="https://plus.google.com/share?url=http://localhost:4000/python-cheat-sheet/" title="Share on Google+" rel="nofollow" target="_blank"><i class="fa fa-google-plus-square" aria-hidden="true"></i></a>
            <a href="https://service.weibo.com/share/share.php?url=https://iwangsanfeng.gitee.io/python-cheat-sheet/&title=Python Cheatsheet&pic=http://localhost:4000/assets/img/posts/python-cheat-sheet.webp" title="Share on Weibo" rel="nofollow" target="_blank"><i class="fa fa-weibo" aria-hidden="true"></i></a>
          </div>
          <!-- End Share -->
          <br>
		  <section>
    <!--<div style="background:#000;border-bottom: 1px solid #d9d9d9;"></div> -->
    <!--打赏模块开始-->

<!--    <div class="content-play">-->
<!--      <p><a href="javascript:void(0)" onclick="dashangToggle()" class="dashang" title="打赏，支持一下">打赏</a></p>-->
<!--      <div class="hide_box-play"></div>-->
<!--      <div class="shang_box-play">-->
<!--        <a class="shang_close-play" href="javascript:void(0)" onclick="dashangToggle()" title="不打赏了"><img src="/assets/img/close.jpg" alt="取消" /></a>-->
<!--        <div class="shang_tit-play">-->
<!--          <p>对你有帮助，那就打赏一下吧</p>-->
<!--        </div>-->

<!--        <div class="shang_payimg">-->
<!--            <img src="/assets/img/wechatimg.jpg" alt="扫码支持" title="扫一扫"/>-->
<!--        </div>-->

<!--         <div class="pay_item" data-id="weipay">-->
<!--            <span class="pay_logo"><img src="/assets/img/wechat.jpg" alt="微信" /></span>-->
<!--          </div>-->

<!--        <div class="shang_payimg">-->
<!--            <img src="/assets/img/alipayimg.jpg" alt="扫码支持" title="扫一扫" />-->
<!--        </div>-->

<!--         <div class="pay_item checked" data-id="alipay">-->
<!--            <span class="pay_logo"><img src="/assets/img/alipay.jpg" alt="支付宝" /></span>-->
<!--          </div>-->

<!--        <div class="pay_explain">扫码打赏,金额随意</div>-->

<!--      </div>-->
<!--    </div>-->
<!--    <script type="text/javascript">-->
<!--    function dashangToggle(){-->
<!--      $(".hide_box-play").fadeToggle();-->
<!--      $(".shang_box-play").fadeToggle();-->
<!--    }-->
<!--    </script>-->

<!--    <div style="text-align:center;margin:50px 0; font:normal 14px/24px 'MicroSoft YaHei';"></div>-->

<!--    <style type="text/css">-->
<!--      .content-play{width:100%;margin-top: 20px;margin-bottom: 10px;height:40px;text-align:center;}-->
<!--      .hide_box-play{z-index:999;filter:alpha(opacity=50);background:#666;opacity: 0.5;-moz-opacity: 0.5;left:0;top:0;height:99%;width:100%;position:fixed;display:none;}-->
<!--      .shang_box-play{width:100%;height:540px;padding:10px;background-color:#fff;border-radius:10px;position:fixed;z-index:1000;left:0%;top:50%;margin-left:0px;margin-top:-280px;border:1px dotted #dedede;display:none;}-->
<!--      .shang_box-play img{border:none;border-width:0;}-->
<!--      .dashang{width:100px;margin:5px auto;height:25px;line-height:25px;padding:10px;background-color:#E74851;color:#fff;text-align:center;text-decoration:none;border-radius:10px;font-weight:bold;font-size:16px;transition: all 0.3s;}-->
<!--      .dashang:hover{opacity:0.8;padding:15px;font-size:18px;}-->
<!--      .shang_close-play{float:right;display:inline-block;-->
<!--        margin-right: 10px;margin-top: 20px;-->
<!--      }-->
<!--      .shang_logo{display:block;text-align:center;margin:20px auto;}-->
<!--      .shang_tit-play{width: 100%;height: 75px;text-align: center;line-height: 66px;color: #a3a3a3;font-size: 16px;background: url('/images/payimg/cy-reward-title-bg.jpg');font-family: 'Microsoft YaHei';margin-top: 7px;margin-right:2px;}-->
<!--      .shang_tit-play p{color:#a3a3a3;text-align:center;font-size:16px;}-->
<!--      .shang_payimg{padding:10px;/*border:6px solid #EA5F00;**/margin:0 auto;border-radius:3px;height:140px;display:inline-block;}-->
<!--      .shang_payimg img{display:inline-block;margin-right:10px;float:left;text-align:center;width:140px;height:140px; }-->
<!--      .pay_explain{text-align:center;margin:10px auto;font-size:12px;color:#545454;}-->
<!--      .shang_payselect{text-align:center;margin:0 auto;margin-top:40px;cursor:pointer;height:60px;width:500px;margin-left:110px;}-->
<!--      .shang_payselect .pay_item{display:inline-block;margin-right:140px;float:left;}-->
<!--      .shang_info-play{clear:both;}-->
<!--      .shang_info-play p,.shang_info-play a{color:#C3C3C3;text-align:center;font-size:12px;text-decoration:none;line-height:2em;}-->
<!--    </style>-->

    <!--打赏模块结束-->

    <div class="pager">
        
        <div class="previous">
            <a href="/isanfeng_beginning/" data-toggle="tooltip" data-placement="top" title="三丰来了"><i class="fa fa-arrow-left"></i> Previous: <span>三丰来了</span>
            </a>
        </div>
        
        
        <div class="next">
            <a href="/hello-world/" data-toggle="tooltip" data-placement="top" title="WO的前生今世">Next: <span>WO的前生今世</span> <i class="fa fa-arrow-right"></i>
            </a>
        </div>
        
    </div>
</section>

        </div>

        <!--start 评论系统型号1: https://valine.js.org/-->
        <div id="vcomments"></div>
          <script>
              new Valine({
                  el: '#vcomments',
                  appId: '6ISOmGAiqwM5tusFRGy3rzac-gzGzoHsz',
                  appKey: 'UQqz25rRuJ2V3ALSQknLsFC6',
                  placeholder: '思想需要碰撞才能产生火花。',
                  avatar: 'robohash',
                  pageSize: '9',
                  emojiCDN: '//i0.hdslb.com/bfs/emote/',
                  emojiMaps: {
                      "tv_doge": "6ea59c827c414b4a2955fe79e0f6fd3dcd515e24.png",
                      "tv_亲亲": "a8111ad55953ef5e3be3327ef94eb4a39d535d06.png",
                      "tv_偷笑": "bb690d4107620f1c15cff29509db529a73aee261.png",
                      "tv_再见": "180129b8ea851044ce71caf55cc8ce44bd4a4fc8.png",
                      "tv_冷漠": "b9cbc755c2b3ee43be07ca13de84e5b699a3f101.png",
                      "tv_发怒": "34ba3cd204d5b05fec70ce08fa9fa0dd612409ff.png",
                      "tv_发财": "34db290afd2963723c6eb3c4560667db7253a21a.png",
                      "tv_可爱": "9e55fd9b500ac4b96613539f1ce2f9499e314ed9.png",
                      "tv_吐血": "09dd16a7aa59b77baa1155d47484409624470c77.png",
                      "tv_呆": "fe1179ebaa191569b0d31cecafe7a2cd1c951c9d.png",
                      "tv_呕吐": "9f996894a39e282ccf5e66856af49483f81870f3.png",
                      "tv_困": "241ee304e44c0af029adceb294399391e4737ef2.png",
                      "tv_坏笑": "1f0b87f731a671079842116e0991c91c2c88645a.png",
                      "tv_大佬": "093c1e2c490161aca397afc45573c877cdead616.png",
                      "tv_大哭": "23269aeb35f99daee28dda129676f6e9ea87934f.png",
                      "tv_委屈": "d04dba7b5465779e9755d2ab6f0a897b9b33bb77.png",
                      "tv_害羞": "a37683fb5642fa3ddfc7f4e5525fd13e42a2bdb1.png",
                      "tv_尴尬": "7cfa62dafc59798a3d3fb262d421eeeff166cfa4.png",
                      "tv_微笑": "70dc5c7b56f93eb61bddba11e28fb1d18fddcd4c.png",
                      "tv_思考": "90cf159733e558137ed20aa04d09964436f618a1.png",
                      "tv_惊吓": "0d15c7e2ee58e935adc6a7193ee042388adc22af.png"}
              })
          </script>
        <!--end 评论系统型号1-->
        <!--评论系统型号2，可以通过config中的配置开关控制-->
        

        <!--每个page底部的作者展示信息-->

<section class="author-box">
  <img src="/assets/img/isanfeng.jpg" alt="三丰" class="author-img">
  <div class="author-desc">
    <h2>流浪⬝𝓲三丰<i class="fa fa-bicycle" aria-hidden="true"></i>异想世界</h2>
    <h3>侠之大者，四海为家；一人一驹，浪迹天涯</h3>
    
<ul class="social_footer">
        
        <li class="email"><a href="mailto:wangsf927@163.com"><i class="mdx-sn-icon mdx_sn_email" title="邮箱"></i></a></li>
      

      
        <li class="website"><a href="https://space.bilibili.com/64878769" target="_blank"><i class="mdx-sn-icon mdx_sn_bilibili" title="哔哩哔哩"></i></a></li>
      

      
        <li class="twitter"><a href="https://twitter.com/wangsf111" target="_blank"><i class="mdx-sn-icon mdx_sn_twitter" title="Twitter"></i></a></li>
      

      
        <li class="facebook"><a href="https://www.facebook.com/iwangsanfeng" target="_blank"><i class="mdx-sn-icon mdx_sn_facebook" title="Facebook"></i></a></li>
      

      
        <li class="website"><a href="https://isanfeng.github.io" title="route-1"><i class="mdx-sn-icon mdx_sn_personalpage" title="站点一"></i></a></li>
      

      
        <li class="website"><a href="https://iwangsanfeng.gitee.io" title="route-2"><i class="mdx-sn-icon mdx_sn_personalpage" title="站点二"></i></a></li>
      

      
        <li class="website"><a href="https://isanfeng.vercel.app" title="route-3"><i class="mdx-sn-icon mdx_sn_personalpage" title="站点三"></i></a></li>
      

<!--      -->
<!--        <li class="website"><a href="https://hub.docker.com/u/wangsf927" target="_blank"><i class="fa fa-cloud" aria-hidden="true"></i></a></li>-->
<!--      -->
</ul>

  </div>
</section>

        <div class="recent-box">
  <h2 class="recent-title">Recent Post</h2>
  <div class="recent-list">
    
      
        <a href="/China-VictoryRoad-NanjianRock-Quzhou-Bikepacking/" class="recent-item" style="background: url(/assets/img/posts/VictoryRoad-00.webp) center no-repeat; background-size: cover;">
        <span>华东天路.南尖岩.江南丙察察.2021>>>Bikepacking分时分段环游地球</span>
        </a>
      
    
      
        <a href="/Bikepacking-Video-2020/" class="recent-item" style="background: url(/assets/img/posts/Bikepacking-000.webp) center no-repeat; background-size: cover;">
        <span>Bikepacking Video 2020>>>Bikepacking</span>
        </a>
      
    
      
        <a href="/get-old-alone/" class="recent-item" style="background: url(/assets/img/posts/get_old_alone.webp) center no-repeat; background-size: cover;">
        <span>孤独终老>>>厚德载物</span>
        </a>
      
    
      
        <a href="/English-Study/" class="recent-item" style="background: url(/assets/img/posts/retro-cycling.webp) center no-repeat; background-size: cover;">
        <span>English>>>自强不息English</span>
        </a>
      
    
  </div>
</div> <!-- End Recent-Box -->

        <div class="newsletter" id="mc_embed_signup" style="display:none">
  <h2 class="newsletter-title">Newsletter</h2>
  <div class="form-container">
    <p>Subscribe here to get our latest updates</p>
    <form action="//" method="post" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" class="validate" target="_blank" novalidate>
      <label class="screen-reader-text" for="mce-EMAIL">Email Address</label>
      <div class="newsletter-box" id="mc_embed_signup_scroll">
        <input type="email" name="EMAIL" placeholder="Email address" class="email-input" id="mce-EMAIL" required>
        <input type="submit" value="Subscribe" name="subscribe" class="subscribe-btn" id="mc-embedded-subscribe">
      </div>
    </form>
  </div>
</div> <!-- End Newsletter -->


      </div>

    </div> <!-- End Wrapper -->
    <div class="search-box">
  <div class="wrapper">
    <div class="search-grid">
      <form class="search-form">
        <div id="search-container">
          <input type="text" id="search-input" class="search" placeholder="随便看看">
        </div>
      </form>
      <ul id="results-container" class="results-search"  style="height:400px;overflow-y:scroll;overflow-y:auto;"></ul>
      <div class="icon-close-container">
        <span class="search-icon-close"><i class="fa fa-times" aria-hidden="true"></i></span>
      </div>
    </div>
  </div>
</div>

    <footer class="main-footer">
	<div class="footer-social">
		<div class="footer-container clearfix">
			<div class="social-list">
				<a class="social gitee" href="https://iwangsanfeng.gitee.io"><i class="fa fa-chrome"></i>.国内镜像站A<i class="fa fa-play-circle"></i></a>
				<a class="social vercel" href="https://isanfeng.vercel.app"><i class="fa fa-chrome"></i>.国内镜像站B<i class="fa fa-play-circle"></i></a>
				<a class="social github" href="https://isanfeng.github.io"><i class="fa fa-chrome"></i>.全球通用站C<i class="fa fa-play-circle"></i></a>
				<br>
				<span style="font-size:5px;color:#B3B3B3;float:bottom">(三者互为备份镜像，A国内访问速度最佳，更新速度略落后BC，BC保持最新的版本)</span>
			</div>
		</div>
	</div>

	<div class="copyright" style="font-size:12px;color:#B3B3B3;padding-bottom:30px;float:bottom">
		<p>
			<i class="fa fa-copyright" aria-hidden="true"></i>	2020	|	<i class="fa fa-user-circle-o" aria-hidden="true"></i>	流浪⬝𝓲三丰<i class="fa fa-bicycle" aria-hidden="true"></i>异想世界
		</p>
		<p>
			<span id="timeDate">载入天数...</span><span id="times">载入时分秒...</span>
			<script>
				var now = new Date();
				function createtime() {
					var grt= new Date("11/11/2020 00:00:00");//在此处修改你的建站时间
					now.setTime(now.getTime()+250);
					days = (now - grt ) / 1000 / 60 / 60 / 24; dnum = Math.floor(days);
					hours = (now - grt ) / 1000 / 60 / 60 - (24 * dnum); hnum = Math.floor(hours);
					if(String(hnum).length ==1 ){hnum = "0" + hnum;} minutes = (now - grt ) / 1000 /60 - (24 * 60 * dnum) - (60 * hnum);
					mnum = Math.floor(minutes); if(String(mnum).length ==1 ){mnum = "0" + mnum;}
					seconds = (now - grt ) / 1000 - (24 * 60 * 60 * dnum) - (60 * 60 * hnum) - (60 * mnum);
					snum = Math.round(seconds); if(String(snum).length ==1 ){snum = "0" + snum;}
					document.getElementById("timeDate").innerHTML = "<i class=\"fa fa-bicycle\" aria-hidden=\"true\"></i>   "+dnum+" 天";
					document.getElementById("times").innerHTML = hnum + " 小时 " + mnum + " 分 " + snum + " 秒   <i class=\"fa fa-bicycle fa-flip-horizontal\" aria-hidden=\"true\"></i>";
				}
			setInterval("createtime()",250);
			</script>
		</p>
		<p>
			<span id="busuanzi_container_site_pv">本站总访客数：<span id="busuanzi_value_site_uv"></span>人</span>
			<span class="division">|</span>
			<span id="busuanzi_container_page_pv">本站总访问量：<span id="busuanzi_value_site_pv"></span>次</span>
		</p>
	</div>

	<div class="copyright" style="font-size:12px;color:#b3b3b3;padding-bottom:30px;float:bottom">
		<p>【冯唐语录 - 不是作家的作家】</p>
		<script type="text/JavaScript" src="/yulu.js"></script>
	</div>

	<!--开往 友链接力：https://github.com/volfclub/travellings-->
	<div class="copyright" style="font-size:12px;color:#b3b3b3;padding-bottom:30px;float:bottom">
		<a href="https://travellings.now.sh/" target="blank" title="开往-友链接力"><img src="https://travellings.now.sh/assets/logo.gif" alt="开往-友链接力" width="70"></a>
	</div>

		<!--music player start-->
	<div>
		<!--https://github.com/metowolf/MetingJS, https://aplayer.js.org/#/zh-Hans-->
		<!-- require APlayer -->
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css">
		<script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script>
		<!-- require MetingJS -->
		<script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script>
		<meting-js
				id="5350939993"
				lrc-type="0"
				server="netease"
				order="list"
				type="playlist"
				fixed="true"
				list-folded="true"
				autoplay="true"
				order="random"
				loop="all"
				mutex="true">
		</meting-js>
		<!--music player end-->
	</div>

</footer>
<!-- End Footer -->

  </article>
</div>

  <!-- <ul>
  <li>Python Cheatsheet</li>
  <li><a href="#comprehensive-python-cheatsheet">Comprehensive Python Cheatsheet</a>
    <ul>
      <li><a href="#contents">#Contents</a></li>
      <li><a href="#main">#Main</a></li>
      <li><a href="#list">#List</a>
        <ul>
          <li><a href="#counter">Counter</a></li>
        </ul>
      </li>
      <li><a href="#set">#Set</a>
        <ul>
          <li><a href="#frozen-set">Frozen Set</a></li>
          <li><a href="#named-tuple">Named Tuple</a></li>
        </ul>
      </li>
      <li><a href="#range">#Range</a></li>
      <li><a href="#enumerate">#Enumerate</a></li>
      <li><a href="#iterator">#Iterator</a>
        <ul>
          <li><a href="#itertools">Itertools</a></li>
        </ul>
      </li>
      <li><a href="#generator">#Generator</a></li>
      <li><a href="#type">#Type</a>
     -  <a href="#some-types-do-not-have-built-in-names-so-they-must-be-imported">Some types do not have built-in names, so they must be imported:</a>
        <ul>
          <li><a href="#abstract-base-classes">Abstract Base Classes</a></li>
        </ul>
      </li>
      <li><a href="#string">#String</a>
        <ul>
          <li><a href="#property-methods">Property Methods</a></li>
        </ul>
      </li>
      <li><a href="#regex">#Regex</a>
        <ul>
          <li><a href="#match-object">Match Object</a></li>
          <li><a href="#special-sequences">Special Sequences</a></li>
        </ul>
      </li>
      <li><a href="#format">#Format</a>
        <ul>
          <li><a href="#attributes">Attributes</a></li>
          <li><a href="#general-options">General Options</a></li>
          <li><a href="#strings">Strings</a></li>
          <li><a href="#numbers">Numbers</a></li>
          <li><a href="#floats">Floats</a>
            <ul>
              <li><a href="#comparison-of-presentation-types">Comparison of presentation types:</a></li>
            </ul>
          </li>
          <li><a href="#ints">Ints</a></li>
        </ul>
      </li>
      <li><a href="#numbers-1">#Numbers</a>
        <ul>
          <li><a href="#types">Types</a></li>
          <li><a href="#basic-functions">Basic Functions</a></li>
          <li><a href="#math">Math</a></li>
          <li><a href="#statistics">Statistics</a></li>
          <li><a href="#random">Random</a></li>
          <li><a href="#bin-hex">Bin, Hex</a></li>
          <li><a href="#bitwise-operators">Bitwise Operators</a></li>
        </ul>
      </li>
      <li><a href="#combinatorics">#Combinatorics</a></li>
      <li><a href="#datetime">#Datetime</a>
        <ul>
          <li><a href="#constructors">Constructors</a></li>
          <li><a href="#now">Now</a></li>
          <li><a href="#timezone">Timezone</a></li>
          <li><a href="#encode">Encode</a></li>
          <li><a href="#decode">Decode</a></li>
          <li><a href="#format-1">Format</a></li>
          <li><a href="#arithmetics">Arithmetics</a></li>
        </ul>
      </li>
      <li><a href="#arguments">#Arguments</a>
        <ul>
          <li><a href="#inside-function-call">Inside Function Call</a></li>
          <li><a href="#inside-function-definition">Inside Function Definition</a></li>
        </ul>
      </li>
      <li><a href="#splat-operator">#Splat Operator</a>
        <ul>
          <li><a href="#inside-function-call-1">Inside Function Call</a>
            <ul>
              <li><a href="#is-the-same-as">Is the same as:</a></li>
            </ul>
          </li>
          <li><a href="#inside-function-definition-1">Inside Function Definition</a>
            <ul>
              <li><a href="#legal-argument-combinations">Legal argument combinations:</a></li>
            </ul>
          </li>
          <li><a href="#other-uses">Other Uses</a></li>
        </ul>
      </li>
      <li><a href="#inline">#Inline</a>
        <ul>
          <li><a href="#lambda">Lambda</a></li>
          <li><a href="#comprehensions">Comprehensions</a>
            <ul>
              <li><a href="#is-the-same-as-1">Is the same as:</a></li>
            </ul>
          </li>
          <li><a href="#map-filter-reduce">Map, Filter, Reduce</a></li>
          <li><a href="#any-all">Any, All</a></li>
          <li><a href="#if---else">If - Else</a></li>
          <li><a href="#namedtuple-enum-dataclass">Namedtuple, Enum, Dataclass</a></li>
        </ul>
      </li>
      <li><a href="#closure">#Closure</a>
        <ul>
          <li><a href="#partial">Partial</a></li>
          <li><a href="#non-local">Non-Local</a></li>
        </ul>
      </li>
      <li><a href="#decorator">#Decorator</a>
        <ul>
          <li><a href="#debugger-example">Debugger Example</a></li>
          <li><a href="#lru-cache">LRU Cache</a></li>
          <li><a href="#parametrized-decorator">Parametrized Decorator</a></li>
        </ul>
      </li>
      <li><a href="#class">#Class</a>
     -  <a href="#str-use-cases">Str() use cases:</a>
     -  <a href="#repr-use-cases">Repr() use cases:</a>
        <ul>
          <li><a href="#constructor-overloading">Constructor Overloading</a></li>
          <li><a href="#inheritance">Inheritance</a></li>
          <li><a href="#multiple-inheritance">Multiple Inheritance</a></li>
          <li><a href="#property">Property</a></li>
          <li><a href="#dataclass">Dataclass</a>
            <ul>
              <li><a href="#inline-1">Inline:</a></li>
            </ul>
          </li>
          <li><a href="#slots">Slots</a></li>
          <li><a href="#copy">Copy</a></li>
        </ul>
      </li>
      <li><a href="#duck-types">#Duck Types</a>
        <ul>
          <li><a href="#comparable">Comparable</a></li>
          <li><a href="#hashable">Hashable</a></li>
          <li><a href="#sortable">Sortable</a></li>
          <li><a href="#iterator-1">Iterator</a>
            <ul>
              <li><a href="#python-has-many-different-iterator-objects">Python has many different iterator objects:</a></li>
            </ul>
          </li>
          <li><a href="#callable">Callable</a></li>
          <li><a href="#context-manager">Context Manager</a></li>
        </ul>
      </li>
      <li><a href="#iterable-duck-types">#Iterable Duck Types</a>
        <ul>
          <li><a href="#iterable">Iterable</a></li>
          <li><a href="#collection">Collection</a></li>
          <li><a href="#sequence">Sequence</a></li>
          <li><a href="#abc-sequence">ABC Sequence</a>
            <ul>
              <li><a href="#table-of-required-and-automatically-available-special-methods">Table of required and automatically available special methods:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#enum">#Enum</a>
        <ul>
          <li><a href="#inline-2">Inline</a>
            <ul>
              <li><a href="#user-defined-functions-cannot-be-values-so-they-must-be-wrapped">User-defined functions cannot be values, so they must be wrapped:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#exceptions">#Exceptions</a>
        <ul>
          <li><a href="#basic-example">Basic Example</a></li>
          <li><a href="#complex-example">Complex Example</a></li>
          <li><a href="#catching-exceptions">Catching Exceptions</a></li>
          <li><a href="#raising-exceptions">Raising Exceptions</a>
            <ul>
              <li><a href="#re-raising-caught-exception">Re-raising caught exception:</a></li>
            </ul>
          </li>
          <li><a href="#exception-object">Exception Object</a></li>
          <li><a href="#built-in-exceptions">Built-in Exceptions</a>
            <ul>
              <li><a href="#collections-and-their-exceptions">Collections and their exceptions:</a></li>
              <li><a href="#useful-built-in-exceptions">Useful built-in exceptions:</a></li>
            </ul>
          </li>
          <li><a href="#user-defined-exceptions">User-defined Exceptions</a></li>
        </ul>
      </li>
      <li><a href="#exit">#Exit</a></li>
      <li><a href="#print">#Print</a>
        <ul>
          <li><a href="#pretty-print">Pretty Print</a></li>
        </ul>
      </li>
      <li><a href="#input">#Input</a></li>
      <li><a href="#command-line-arguments">#Command Line Arguments</a>
        <ul>
          <li><a href="#argument-parser">Argument Parser</a></li>
        </ul>
      </li>
      <li><a href="#open">#Open</a>
        <ul>
          <li><a href="#modes">Modes</a></li>
          <li><a href="#exceptions-1">Exceptions</a></li>
          <li><a href="#file-object">File Object</a></li>
          <li><a href="#read-text-from-file">Read Text from File</a></li>
          <li><a href="#write-text-to-file">Write Text to File</a></li>
        </ul>
      </li>
      <li><a href="#path">#Path</a>
        <ul>
          <li><a href="#direntry">DirEntry</a></li>
          <li><a href="#path-object">Path Object</a></li>
        </ul>
      </li>
      <li><a href="#os-commands">#OS Commands</a>
        <ul>
          <li><a href="#files-and-directories">Files and Directories</a></li>
          <li><a href="#shell-commands">Shell Commands</a>
            <ul>
              <li><a href="#sends-1--1-to-the-basic-calculator-and-captures-its-output">Sends ‘1 + 1’ to the basic calculator and captures its output:</a></li>
              <li><a href="#sends-testin-to-the-basic-calculator-running-in-standard-mode-and-saves-its-output-to-testout">Sends test.in to the basic calculator running in standard mode and saves its output to test.out:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#json">#JSON</a>
        <ul>
          <li><a href="#read-object-from-json-file">Read Object from JSON File</a></li>
          <li><a href="#write-object-to-json-file">Write Object to JSON File</a></li>
        </ul>
      </li>
      <li><a href="#pickle">#Pickle</a>
        <ul>
          <li><a href="#read-object-from-file">Read Object from File</a></li>
          <li><a href="#write-object-to-file">Write Object to File</a></li>
        </ul>
      </li>
      <li><a href="#csv">#CSV</a>
        <ul>
          <li><a href="#read">Read</a></li>
          <li><a href="#write">Write</a></li>
          <li><a href="#parameters">Parameters</a></li>
          <li><a href="#dialects">Dialects</a></li>
          <li><a href="#read-rows-from-csv-file">Read Rows from CSV File</a></li>
          <li><a href="#write-rows-to-csv-file">Write Rows to CSV File</a></li>
        </ul>
      </li>
      <li><a href="#sqlite">#SQLite</a>
        <ul>
          <li><a href="#connect">Connect</a></li>
          <li><a href="#read-1">Read</a></li>
          <li><a href="#write-1">Write</a>
            <ul>
              <li><a href="#or">Or:</a></li>
            </ul>
          </li>
          <li><a href="#placeholders">Placeholders</a></li>
          <li><a href="#example">Example</a></li>
          <li><a href="#mysql">MySQL</a></li>
        </ul>
      </li>
      <li><a href="#bytes">#Bytes</a>
        <ul>
          <li><a href="#encode-1">Encode</a></li>
          <li><a href="#decode-1">Decode</a></li>
          <li><a href="#read-bytes-from-file">Read Bytes from File</a></li>
          <li><a href="#write-bytes-to-file">Write Bytes to File</a></li>
        </ul>
      </li>
      <li><a href="#struct">#Struct</a>
        <ul>
          <li><a href="#example-1">Example</a></li>
          <li><a href="#format-2">Format</a>
            <ul>
              <li><a href="#for-standard-type-sizes-start-format-string-with">For standard type sizes start format string with:</a></li>
              <li><a href="#integer-types-use-a-capital-letter-for-unsigned-type-minimum-and-standard-sizes-are-in-brackets">Integer types. Use a capital letter for unsigned type. Minimum and standard sizes are in brackets:</a></li>
              <li><a href="#floating-point-types">Floating point types:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#array">#Array</a></li>
      <li><a href="#memory-view">#Memory View</a>
        <ul>
          <li><a href="#decode-2">Decode</a></li>
        </ul>
      </li>
      <li><a href="#deque">#Deque</a></li>
      <li><a href="#threading">#Threading</a>
        <ul>
          <li><a href="#thread">Thread</a></li>
          <li><a href="#lock">Lock</a>
            <ul>
              <li><a href="#or-1">Or:</a></li>
            </ul>
          </li>
          <li><a href="#semaphore-event-barrier">Semaphore, Event, Barrier</a></li>
          <li><a href="#thread-pool-executor">Thread Pool Executor</a>
            <ul>
              <li><a href="#future">Future:</a></li>
            </ul>
          </li>
          <li><a href="#queue">Queue</a></li>
        </ul>
      </li>
      <li><a href="#operator">#Operator</a></li>
      <li><a href="#introspection">#Introspection</a>
        <ul>
          <li><a href="#variables">Variables</a></li>
          <li><a href="#attributes-1">Attributes</a></li>
          <li><a href="#parameters-1">Parameters</a></li>
        </ul>
      </li>
      <li><a href="#metaprograming">#Metaprograming</a>
        <ul>
          <li><a href="#type-1">Type</a></li>
          <li><a href="#meta-class">Meta Class</a>
            <ul>
              <li><a href="#or-2">Or:</a></li>
            </ul>
          </li>
          <li><a href="#metaclass-attribute">Metaclass Attribute</a></li>
          <li><a href="#type-diagram">Type Diagram</a></li>
          <li><a href="#inheritance-diagram">Inheritance Diagram</a></li>
        </ul>
      </li>
      <li><a href="#eval">#Eval</a></li>
      <li><a href="#coroutines">#Coroutines</a>
     -  <a href="#runs-a-terminal-game-where-you-control-an-asterisk-that-must-avoid-numbers">Runs a terminal game where you control an asterisk that must avoid numbers:</a></li>
    </ul>
  </li>
  <li><a href="#libraries">Libraries</a>
    <ul>
      <li><a href="#progress-bar">#Progress Bar</a></li>
      <li><a href="#plot">#Plot</a></li>
      <li><a href="#table">#Table</a>
     -  <a href="#prints-a-csv-file-as-an-ascii-table">Prints a CSV file as an ASCII table:</a></li>
      <li><a href="#curses">#Curses</a>
     -  <a href="#clears-the-terminal-prints-a-message-and-waits-for-the-esc-key-press">Clears the terminal, prints a message and waits for the ESC key press:</a></li>
      <li><a href="#logging">#Logging</a>
        <ul>
          <li><a href="#exceptions-2">Exceptions</a></li>
          <li><a href="#rotation">Rotation</a></li>
          <li><a href="#retention">Retention</a></li>
        </ul>
      </li>
      <li><a href="#scraping">#Scraping</a>
     -  <a href="#scrapes-pythons-url-version-number-and-logo-from-its-wikipedia-page">Scrapes Python’s URL, version number and logo from its Wikipedia page:</a></li>
      <li><a href="#web">#Web</a>
        <ul>
          <li><a href="#run">Run</a></li>
          <li><a href="#static-request">Static Request</a></li>
          <li><a href="#dynamic-request">Dynamic Request</a></li>
          <li><a href="#rest-request">REST Request</a>
            <ul>
              <li><a href="#test">Test:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#profiling">#Profiling</a>
        <ul>
          <li><a href="#stopwatch">Stopwatch</a>
            <ul>
              <li><a href="#high-performance">High performance:</a></li>
            </ul>
          </li>
          <li><a href="#timing-a-snippet">Timing a Snippet</a></li>
          <li><a href="#profiling-by-line">Profiling by Line</a></li>
          <li><a href="#call-graph">Call Graph</a>
            <ul>
              <li><a href="#generates-a-png-image-of-a-call-graph-with-highlighted-bottlenecks">Generates a PNG image of a call graph with highlighted bottlenecks:</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#numpy">#NumPy</a>
        <ul>
          <li><a href="#indexing">Indexing</a></li>
          <li><a href="#broadcasting">Broadcasting</a>
            <ul>
              <li><a href="#1-if-array-shapes-differ-in-length-left-pad-the-shorter-shape-with-ones">1. If array shapes differ in length, left-pad the shorter shape with ones:</a></li>
              <li><a href="#2-if-any-dimensions-differ-in-size-expand-the-ones-that-have-size-1-by-duplicating-their-elements">2. If any dimensions differ in size, expand the ones that have size 1 by duplicating their elements:</a></li>
              <li><a href="#3-if-neither-non-matching-dimension-has-size-1-raise-an-error">3. If neither non-matching dimension has size 1, raise an error.</a></li>
            </ul>
          </li>
          <li><a href="#example-2">Example</a>
            <ul>
              <li><a href="#for-each-point-returns-index-of-its-nearest-point-01-06-08--1-2-1">For each point returns index of its nearest point ([0.1, 0.6, 0.8] =&gt; [1, 2, 1]):</a></li>
            </ul>
          </li>
        </ul>
      </li>
      <li><a href="#image">#Image</a>
        <ul>
          <li><a href="#modes-1">Modes</a></li>
          <li><a href="#examples">Examples</a>
            <ul>
              <li><a href="#creates-a-png-image-of-a-rainbow-gradient">Creates a PNG image of a rainbow gradient:</a></li>
              <li><a href="#adds-noise-to-a-png-image">Adds noise to a PNG image:</a></li>
            </ul>
          </li>
          <li><a href="#drawing">Drawing</a></li>
        </ul>
      </li>
      <li><a href="#animation">#Animation</a>
     -  <a href="#creates-a-gif-of-a-bouncing-ball">Creates a GIF of a bouncing ball:</a></li>
      <li><a href="#audio">#Audio</a>
        <ul>
          <li><a href="#sample-values">Sample Values</a></li>
          <li><a href="#read-float-samples-from-wav-file">Read Float Samples from WAV File</a></li>
          <li><a href="#write-float-samples-to-wav-file">Write Float Samples to WAV File</a></li>
          <li><a href="#examples-1">Examples</a>
            <ul>
              <li><a href="#saves-a-sine-wave-to-a-mono-wav-file">Saves a sine wave to a mono WAV file:</a></li>
              <li><a href="#adds-noise-to-a-mono-wav-file">Adds noise to a mono WAV file:</a></li>
              <li><a href="#plays-a-wav-file">Plays a WAV file:</a></li>
            </ul>
          </li>
          <li><a href="#text-to-speech">Text to Speech</a></li>
        </ul>
      </li>
      <li><a href="#synthesizer">#Synthesizer</a>
     -  <a href="#plays-popcorn-by-gershon-kingsley">Plays Popcorn by Gershon Kingsley:</a></li>
      <li><a href="#pygame">#Pygame</a>
        <ul>
          <li><a href="#basic-example-1">Basic Example</a></li>
          <li><a href="#rectangle">Rectangle</a></li>
          <li><a href="#surface">Surface</a></li>
          <li><a href="#font">Font</a></li>
          <li><a href="#sound">Sound</a></li>
          <li><a href="#basic-mario-brothers-example">Basic Mario Brothers Example</a></li>
        </ul>
      </li>
      <li><a href="#pandas">#Pandas</a>
        <ul>
          <li><a href="#series">Series</a>
            <ul>
              <li><a href="#aggregate-transform-map">Aggregate, Transform, Map:</a></li>
            </ul>
          </li>
          <li><a href="#dataframe">DataFrame</a>
            <ul>
              <li><a href="#merge-join-concat">Merge, Join, Concat:</a></li>
              <li><a href="#aggregate-transform-map-1">Aggregate, Transform, Map:</a></li>
              <li><a href="#encode-decode">Encode, Decode:</a></li>
            </ul>
          </li>
          <li><a href="#groupby">GroupBy</a>
            <ul>
              <li><a href="#aggregate-transform-map-2">Aggregate, Transform, Map:</a></li>
            </ul>
          </li>
          <li><a href="#rolling">Rolling</a></li>
        </ul>
      </li>
      <li><a href="#plotly">#Plotly</a>
     -  <a href="#covid-deaths-by-continent">Covid deaths by continent:</a>
     -  <a href="#confirmed-covid-cases-dow-jones-gold-and-bitcoin-price">Confirmed covid cases, Dow Jones, gold, and Bitcoin price:</a></li>
      <li><a href="#pysimplegui">#PySimpleGUI</a></li>
      <li><a href="#appendix">#Appendix</a>
        <ul>
          <li><a href="#cython">Cython</a>
            <ul>
              <li><a href="#definitions">Definitions:</a></li>
            </ul>
          </li>
          <li><a href="#pyinstaller">PyInstaller</a></li>
          <li><a href="#basic-script-template">Basic Script Template</a></li>
        </ul>
      </li>
      <li>流浪⬝𝓲三丰异想世界
        <ul>
          <li>侠之大者，四海为家；一人一驹，浪迹天涯</li>
        </ul>
      </li>
      <li>Recent Post</li>
      <li>Newsletter</li>
    </ul>
  </li>
</ul>
 -->
  <!--回到顶部按钮-->
<div class="top" title="返回顶部"><i class="fa fa-bicycle" aria-hidden="true"></i></div>
<!-- End Top Scroll -->

  <!-- JS -->
<script src="/assets/js/jquery.min.js"></script>
<script src="/assets/js/jekyll-search.js"></script>
<script>
  SimpleJekyllSearch({
    searchInput: document.getElementById('search-input'),
    resultsContainer: document.getElementById('results-container'),
    json: '/search.json',
    searchResultTemplate: '<li><a href="{url}" title="{desc}">{title}</a></li>',
    noResultsText: 'Woo...你找到了一个没有知识的荒原.',
    fuzzy: false,
    exclude: ['Welcome']
  });
</script>
<script src="/assets/js/main.js"></script>

  <!--
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', '', 'auto');
  ga('send', 'pageview');
</script>
-->
<!-- End Analytics -->


</body>
</html>
